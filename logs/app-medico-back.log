2024-01-19 10:02:50,432 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 180 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:02:50,434 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:02:50,478 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 10:02:50,479 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 10:02:51,119 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:02:51,133 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 9 ms. Found 0 JPA repository interfaces.
2024-01-19 10:02:51,334 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:02:51,352 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:02:51,605 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:02:51,611 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:02:51,612 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:02:51,612 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:02:51,660 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:02:51,661 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1179 ms
2024-01-19 10:02:51,745 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 10:02:51,855 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7f6f0c53
2024-01-19 10:02:51,857 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 10:02:51,945 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:02:52,058 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:02:52,098 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:02:52,115 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:02:52,116 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:02:52,116 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:02:52,116 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:02:52,116 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:02:52,116 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:02:52,116 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:02:52,135 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:02:52,137 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:02:52,185 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:02:52,222 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 10:02:52,247 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:02:52,393 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:02:52,419 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:02:52,919 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:02:52,972 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:02:53,283 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:02:53,293 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:02:53,488 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@31749be9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@41903a86, org.springframework.security.web.context.SecurityContextHolderFilter@62f80576, org.springframework.security.web.header.HeaderWriterFilter@76aae2a7, org.springframework.web.filter.CorsFilter@63202b6b, org.springframework.security.web.csrf.CsrfFilter@2c7843c1, org.springframework.security.web.authentication.logout.LogoutFilter@26c5bfe, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@6748bb44, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@49624ea4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@34df242a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@550a8875, org.springframework.security.web.session.SessionManagementFilter@58819, org.springframework.security.web.access.ExceptionTranslationFilter@3f179094, org.springframework.security.web.access.intercept.AuthorizationFilter@1baf98a9]
2024-01-19 10:02:53,845 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:02:53,874 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:02:53,891 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:02:53,897 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 3.715 seconds (process running for 4.831)
2024-01-19 10:03:05,601 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:03:05,603 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 10:03:05,606 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 10:03:09,484 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 9916 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:03:09,486 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:03:09,517 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 10:03:09,518 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 10:03:10,083 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:03:10,097 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 10 ms. Found 0 JPA repository interfaces.
2024-01-19 10:03:10,291 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:03:10,308 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:03:10,540 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:03:10,545 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:03:10,546 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:03:10,546 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:03:10,592 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:03:10,592 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1074 ms
2024-01-19 10:03:10,671 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 10:03:10,781 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@c74ce31
2024-01-19 10:03:10,783 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 10:03:10,873 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:03:10,988 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:03:11,024 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:03:11,041 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:03:11,041 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:03:11,041 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:03:11,042 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:03:11,042 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:03:11,042 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:03:11,042 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:03:11,063 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:03:11,064 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:03:11,114 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:03:11,153 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 10:03:11,182 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:03:11,360 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:03:11,399 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:03:11,931 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:03:11,975 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:03:12,340 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:03:12,352 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:03:12,560 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2d794244, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@30ae5db8, org.springframework.security.web.context.SecurityContextHolderFilter@2bede68c, org.springframework.security.web.header.HeaderWriterFilter@4eabf201, org.springframework.web.filter.CorsFilter@69b7d3da, org.springframework.security.web.csrf.CsrfFilter@497035ee, org.springframework.security.web.authentication.logout.LogoutFilter@5c45e7f9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5441b03f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@76f92609, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@332576a2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@610c37d8, org.springframework.security.web.session.SessionManagementFilter@601623bd, org.springframework.security.web.access.ExceptionTranslationFilter@5a3a4a5a, org.springframework.security.web.access.intercept.AuthorizationFilter@79e0d44b]
2024-01-19 10:03:12,907 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:03:12,936 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:03:12,954 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:03:12,960 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 3.72 seconds (process running for 4.777)
2024-01-19 10:03:27,920 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:03:27,922 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 10:03:27,925 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 10:03:48,055 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 18468 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:03:48,056 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:03:48,087 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 10:03:48,087 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 10:03:48,656 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:03:48,670 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 9 ms. Found 0 JPA repository interfaces.
2024-01-19 10:03:48,857 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:03:48,872 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:03:49,107 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:03:49,113 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:03:49,114 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:03:49,114 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:03:49,160 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:03:49,161 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1072 ms
2024-01-19 10:03:49,239 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 10:03:49,351 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@f4c3e73
2024-01-19 10:03:49,353 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 10:03:49,443 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:03:49,563 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:03:49,597 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:03:49,615 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:03:49,615 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:03:49,615 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:03:49,615 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:03:49,615 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:03:49,615 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:03:49,615 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:03:49,635 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:03:49,637 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:03:49,683 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:03:49,715 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 10:03:49,740 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:03:49,884 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:03:49,910 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:03:50,381 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:03:50,423 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:03:50,724 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:03:50,734 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:03:50,909 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@fd66cb3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@710dbe84, org.springframework.security.web.context.SecurityContextHolderFilter@29cb22f2, org.springframework.security.web.header.HeaderWriterFilter@5bb0db5, org.springframework.web.filter.CorsFilter@38ba3bd2, org.springframework.security.web.csrf.CsrfFilter@64b9e994, org.springframework.security.web.authentication.logout.LogoutFilter@74612e4f, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5ad27592, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@28a5b2cc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1e007fea, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@dad51fa, org.springframework.security.web.session.SessionManagementFilter@70c74f12, org.springframework.security.web.access.ExceptionTranslationFilter@1460fc57, org.springframework.security.web.access.intercept.AuthorizationFilter@1257f596]
2024-01-19 10:03:51,232 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:03:51,260 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:03:51,276 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:03:51,283 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 3.481 seconds (process running for 4.646)
2024-01-19 10:04:03,909 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:04:03,911 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 10:04:03,914 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 10:04:07,277 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 19864 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:04:07,278 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:04:07,308 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 10:04:07,309 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 10:04:07,897 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:04:07,912 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 10 ms. Found 0 JPA repository interfaces.
2024-01-19 10:04:08,116 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:04:08,132 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:04:08,378 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:04:08,383 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:04:08,384 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:04:08,385 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:04:08,432 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:04:08,433 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1123 ms
2024-01-19 10:04:08,512 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 10:04:08,623 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1dc19200
2024-01-19 10:04:08,624 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 10:04:08,720 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:04:08,843 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:04:08,877 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:04:08,894 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:04:08,894 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:04:08,894 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:04:08,894 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:04:08,894 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:04:08,894 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:04:08,894 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:04:08,924 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:04:08,925 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:04:08,975 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:04:09,011 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 10:04:09,031 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:04:09,189 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:04:09,216 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:04:09,709 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:04:09,752 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:04:10,074 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:04:10,085 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:04:10,278 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2dc76626, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@444aace7, org.springframework.security.web.context.SecurityContextHolderFilter@7fbb6ece, org.springframework.security.web.header.HeaderWriterFilter@5abe65c7, org.springframework.web.filter.CorsFilter@230f1715, org.springframework.security.web.csrf.CsrfFilter@25ac28e, org.springframework.security.web.authentication.logout.LogoutFilter@43337ab0, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@dad51fa, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@67ef5fb3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@69de3e76, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2b44e2b, org.springframework.security.web.session.SessionManagementFilter@28a5b2cc, org.springframework.security.web.access.ExceptionTranslationFilter@2e353ce7, org.springframework.security.web.access.intercept.AuthorizationFilter@40f81682]
2024-01-19 10:04:10,613 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:04:10,641 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:04:10,657 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:04:10,663 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 3.649 seconds (process running for 4.739)
2024-01-19 10:04:23,783 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:04:23,785 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 10:04:23,788 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 10:04:35,586 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:04:35,589 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:04:35,623 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 10:04:35,623 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 10:04:36,195 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:04:36,208 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 9 ms. Found 0 JPA repository interfaces.
2024-01-19 10:04:36,408 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:04:36,424 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:04:36,656 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:04:36,662 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:04:36,663 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:04:36,664 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:04:36,710 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:04:36,711 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1087 ms
2024-01-19 10:04:36,790 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 10:04:36,899 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@75bcb759
2024-01-19 10:04:36,900 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 10:04:36,989 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:04:37,117 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:04:37,150 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:04:37,168 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:04:37,169 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:04:37,169 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:04:37,169 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:04:37,169 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:04:37,169 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:04:37,169 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:04:37,190 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:04:37,191 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:04:37,239 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:04:37,273 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 10:04:37,299 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:04:37,447 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:04:37,472 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:04:37,942 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:04:37,992 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:04:38,301 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:04:38,311 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:04:38,489 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5a9cac05, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5154b16d, org.springframework.security.web.context.SecurityContextHolderFilter@15bdbe6e, org.springframework.security.web.header.HeaderWriterFilter@78320bbf, org.springframework.web.filter.CorsFilter@26d43b6c, org.springframework.security.web.csrf.CsrfFilter@afe73a6, org.springframework.security.web.authentication.logout.LogoutFilter@4688bd9e, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@1fcd074c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5909b74a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4cd92f76, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@62010ea6, org.springframework.security.web.session.SessionManagementFilter@31e5e339, org.springframework.security.web.access.ExceptionTranslationFilter@c27b88c, org.springframework.security.web.access.intercept.AuthorizationFilter@4976015b]
2024-01-19 10:04:38,813 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:04:38,840 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:04:38,856 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:04:38,862 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 3.535 seconds (process running for 4.6)
2024-01-19 10:33:08,721 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-01-19 10:33:08,753 INFO o.a.j.l.DirectJDKLog [Thread-5] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:08,809 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-5] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:33:08,820 INFO c.z.h.HikariDataSource [Thread-5] HikariPool-1 - Shutdown initiated...
2024-01-19 10:33:08,826 INFO c.z.h.HikariDataSource [Thread-5] HikariPool-1 - Shutdown completed.
2024-01-19 10:33:08,945 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:33:08,946 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:33:09,112 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:33:09,115 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2024-01-19 10:33:09,189 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:33:09,193 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:33:09,237 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:33:09,238 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:09,238 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:33:09,238 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:33:09,262 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:33:09,262 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 314 ms
2024-01-19 10:33:09,279 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-2 - Starting...
2024-01-19 10:33:09,308 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@245ee0ee
2024-01-19 10:33:09,309 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-2 - Start completed.
2024-01-19 10:33:09,316 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:33:09,331 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:33:09,344 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:33:09,344 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:33:09,345 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:33:09,345 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:33:09,345 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:33:09,345 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:33:09,345 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:33:09,355 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:33:09,357 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:33:09,368 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:33:09,371 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:33:09,374 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:33:09,375 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:33:09,399 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:33:09,426 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:33:09,467 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:33:09,473 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:33:09,527 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2d28417, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@45a5bb72, org.springframework.security.web.context.SecurityContextHolderFilter@33bcccad, org.springframework.security.web.header.HeaderWriterFilter@7be04212, org.springframework.web.filter.CorsFilter@279aa5ba, org.springframework.security.web.csrf.CsrfFilter@2a13fa62, org.springframework.security.web.authentication.logout.LogoutFilter@1f98ea2b, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@19d51096, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7aaadb6b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@323e6fe, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@167a407f, org.springframework.security.web.session.SessionManagementFilter@6c9f6fc, org.springframework.security.web.access.ExceptionTranslationFilter@286c367f, org.springframework.security.web.access.intercept.AuthorizationFilter@41446327]
2024-01-19 10:33:09,606 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:33:09,621 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:09,628 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:33:09,632 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.712 seconds (process running for 1715.389)
2024-01-19 10:33:09,633 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:33:28,549 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-01-19 10:33:28,551 INFO o.a.j.l.DirectJDKLog [Thread-7] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:28,561 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-7] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:33:28,562 INFO c.z.h.HikariDataSource [Thread-7] HikariPool-2 - Shutdown initiated...
2024-01-19 10:33:28,565 INFO c.z.h.HikariDataSource [Thread-7] HikariPool-2 - Shutdown completed.
2024-01-19 10:33:28,635 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:33:28,636 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:33:28,778 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:33:28,781 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2024-01-19 10:33:28,829 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:33:28,830 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:33:28,857 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:33:28,857 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:28,857 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:33:28,857 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:33:28,880 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:33:28,880 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 243 ms
2024-01-19 10:33:28,897 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-3 - Starting...
2024-01-19 10:33:28,919 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-3 - Added connection org.postgresql.jdbc.PgConnection@124fbf78
2024-01-19 10:33:28,919 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-3 - Start completed.
2024-01-19 10:33:28,928 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:33:28,944 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:33:28,958 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:33:28,959 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:33:28,959 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:33:28,959 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:33:28,959 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:33:28,959 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:33:28,959 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:33:28,968 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:33:28,970 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:33:28,981 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:33:28,984 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:33:28,987 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:33:28,988 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:33:29,010 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:33:29,036 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:33:29,071 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:33:29,075 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:33:29,118 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7fdb897b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70cd9a94, org.springframework.security.web.context.SecurityContextHolderFilter@6f762cca, org.springframework.security.web.header.HeaderWriterFilter@7e22647c, org.springframework.web.filter.CorsFilter@606b1f6e, org.springframework.security.web.csrf.CsrfFilter@3b6df745, org.springframework.security.web.authentication.logout.LogoutFilter@5be80509, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@648008af, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7ab4de33, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@17d8449d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4cab6bc, org.springframework.security.web.session.SessionManagementFilter@3bf5332e, org.springframework.security.web.access.ExceptionTranslationFilter@27d6402f, org.springframework.security.web.access.intercept.AuthorizationFilter@52585dce]
2024-01-19 10:33:29,185 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:33:29,200 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:29,207 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:33:29,210 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.601 seconds (process running for 1734.967)
2024-01-19 10:33:29,211 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:33:31,647 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-01-19 10:33:31,648 INFO o.a.j.l.DirectJDKLog [Thread-11] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:31,659 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-11] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:33:31,659 INFO c.z.h.HikariDataSource [Thread-11] HikariPool-3 - Shutdown initiated...
2024-01-19 10:33:31,663 INFO c.z.h.HikariDataSource [Thread-11] HikariPool-3 - Shutdown completed.
2024-01-19 10:33:31,730 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:33:31,731 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:33:31,886 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:33:31,890 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.
2024-01-19 10:33:31,944 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:33:31,945 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:33:31,971 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:33:31,971 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:31,971 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:33:31,972 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:33:32,000 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:33:32,000 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 267 ms
2024-01-19 10:33:32,018 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-4 - Starting...
2024-01-19 10:33:32,049 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-4 - Added connection org.postgresql.jdbc.PgConnection@1a6f41e9
2024-01-19 10:33:32,049 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-4 - Start completed.
2024-01-19 10:33:32,061 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:33:32,080 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:33:32,097 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:33:32,098 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:33:32,098 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:33:32,098 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:33:32,098 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:33:32,098 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:33:32,098 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:33:32,108 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:33:32,109 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:33:32,121 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:33:32,123 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:33:32,127 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:33:32,128 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:33:32,153 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:33:32,185 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:33:32,230 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:33:32,235 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:33:32,295 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4deab249, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1347cb77, org.springframework.security.web.context.SecurityContextHolderFilter@669ffb78, org.springframework.security.web.header.HeaderWriterFilter@3e60c313, org.springframework.web.filter.CorsFilter@2ab50ffa, org.springframework.security.web.csrf.CsrfFilter@12584849, org.springframework.security.web.authentication.logout.LogoutFilter@67dc994, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@2533ee12, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3e9354a7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@653703d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@104c27c0, org.springframework.security.web.session.SessionManagementFilter@3655f7fb, org.springframework.security.web.access.ExceptionTranslationFilter@12b2ffb, org.springframework.security.web.access.intercept.AuthorizationFilter@3f20cd68]
2024-01-19 10:33:32,393 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:33:32,407 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:32,424 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:33:32,431 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.726 seconds (process running for 1738.188)
2024-01-19 10:33:32,432 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:33:45,065 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-01-19 10:33:45,066 INFO o.a.j.l.DirectJDKLog [Thread-15] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:45,076 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-15] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:33:45,077 INFO c.z.h.HikariDataSource [Thread-15] HikariPool-4 - Shutdown initiated...
2024-01-19 10:33:45,079 INFO c.z.h.HikariDataSource [Thread-15] HikariPool-4 - Shutdown completed.
2024-01-19 10:33:45,142 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:33:45,142 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:33:45,274 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:33:45,278 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.
2024-01-19 10:33:45,325 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:33:45,326 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:33:45,355 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:33:45,356 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:45,356 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:33:45,356 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:33:45,391 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:33:45,391 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 248 ms
2024-01-19 10:33:45,409 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-5 - Starting...
2024-01-19 10:33:45,441 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-5 - Added connection org.postgresql.jdbc.PgConnection@298eebe3
2024-01-19 10:33:45,441 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-5 - Start completed.
2024-01-19 10:33:45,450 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:33:45,468 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:33:45,487 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:33:45,487 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:33:45,487 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:33:45,487 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:33:45,488 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:33:45,488 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:33:45,488 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:33:45,500 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:33:45,502 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:33:45,516 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:33:45,519 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:33:45,524 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:33:45,526 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:33:45,552 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:33:45,583 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:33:45,636 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:33:45,641 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:33:45,714 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3291bbf1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1d4f18e4, org.springframework.security.web.context.SecurityContextHolderFilter@30b5caee, org.springframework.security.web.header.HeaderWriterFilter@12e66cc8, org.springframework.web.filter.CorsFilter@2fd2acc4, org.springframework.security.web.csrf.CsrfFilter@79e22571, org.springframework.security.web.authentication.logout.LogoutFilter@62658ae4, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@7ced2c22, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2078ede6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@159550d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3a4b1920, org.springframework.security.web.session.SessionManagementFilter@5814b530, org.springframework.security.web.access.ExceptionTranslationFilter@433a7cf2, org.springframework.security.web.access.intercept.AuthorizationFilter@4e2f8001]
2024-01-19 10:33:45,815 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:33:45,828 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:45,842 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:33:45,847 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.726 seconds (process running for 1751.604)
2024-01-19 10:33:45,848 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:33:48,292 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-01-19 10:33:48,297 INFO o.a.j.l.DirectJDKLog [Thread-19] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:48,370 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-19] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:33:48,371 INFO c.z.h.HikariDataSource [Thread-19] HikariPool-5 - Shutdown initiated...
2024-01-19 10:33:48,403 INFO c.z.h.HikariDataSource [Thread-19] HikariPool-5 - Shutdown completed.
2024-01-19 10:33:48,552 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:33:48,553 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:33:48,987 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:33:48,993 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 5 ms. Found 0 JPA repository interfaces.
2024-01-19 10:33:49,160 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:33:49,162 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:33:49,248 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:33:49,249 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:49,249 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:33:49,250 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:33:49,332 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:33:49,333 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 778 ms
2024-01-19 10:33:49,365 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-6 - Starting...
2024-01-19 10:33:49,411 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-6 - Added connection org.postgresql.jdbc.PgConnection@1c6efadb
2024-01-19 10:33:49,411 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-6 - Start completed.
2024-01-19 10:33:49,432 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:33:49,458 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:33:49,490 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:33:49,491 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:33:49,491 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:33:49,491 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:33:49,491 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:33:49,491 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:33:49,491 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:33:49,509 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:33:49,513 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:33:49,536 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:33:49,547 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:33:49,559 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:33:49,562 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:33:49,618 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:33:49,665 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:33:49,771 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:33:49,792 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:33:49,960 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3c7c8a8e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5b48dcf0, org.springframework.security.web.context.SecurityContextHolderFilter@131b7cbb, org.springframework.security.web.header.HeaderWriterFilter@380ab62, org.springframework.web.filter.CorsFilter@7ebaf05, org.springframework.security.web.csrf.CsrfFilter@de4ea51, org.springframework.security.web.authentication.logout.LogoutFilter@2b549c84, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@334380de, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@61c1bfa2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@671cd343, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@28819a56, org.springframework.security.web.session.SessionManagementFilter@3907bfa8, org.springframework.security.web.access.ExceptionTranslationFilter@7520f113, org.springframework.security.web.access.intercept.AuthorizationFilter@46034f8b]
2024-01-19 10:33:50,227 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:33:50,262 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:33:50,305 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:33:50,317 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 1.842 seconds (process running for 1756.074)
2024-01-19 10:33:50,320 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:36:33,493 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-01-19 10:36:33,494 INFO o.a.j.l.DirectJDKLog [Thread-23] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:36:33,504 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-23] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:36:33,505 INFO c.z.h.HikariDataSource [Thread-23] HikariPool-6 - Shutdown initiated...
2024-01-19 10:36:33,507 INFO c.z.h.HikariDataSource [Thread-23] HikariPool-6 - Shutdown completed.
2024-01-19 10:36:33,568 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:36:33,569 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:36:33,703 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:36:33,706 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2024-01-19 10:36:33,748 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:36:33,749 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:36:33,777 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:36:33,778 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:36:33,778 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:36:33,778 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:36:33,813 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:36:33,813 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 243 ms
2024-01-19 10:36:33,828 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-7 - Starting...
2024-01-19 10:36:33,856 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-7 - Added connection org.postgresql.jdbc.PgConnection@41fcfb59
2024-01-19 10:36:33,856 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-7 - Start completed.
2024-01-19 10:36:33,864 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:36:33,876 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:36:33,887 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:36:33,887 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:36:33,887 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:36:33,887 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:36:33,887 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:36:33,887 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:36:33,887 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:36:33,897 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:36:33,898 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:36:33,908 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:36:33,910 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:36:33,913 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:36:33,914 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:36:33,933 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:36:33,964 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:36:34,000 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:36:34,004 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:36:34,046 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@24cd8d79, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6177a3df, org.springframework.security.web.context.SecurityContextHolderFilter@50e13b7a, org.springframework.security.web.header.HeaderWriterFilter@4235cbdc, org.springframework.web.filter.CorsFilter@4c754c7c, org.springframework.security.web.csrf.CsrfFilter@6b2fc0b0, org.springframework.security.web.authentication.logout.LogoutFilter@35e8bf12, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@542da8c1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@372ce805, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5b2bbe17, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@75a78e93, org.springframework.security.web.session.SessionManagementFilter@455e5921, org.springframework.security.web.access.ExceptionTranslationFilter@74b26300, org.springframework.security.web.access.intercept.AuthorizationFilter@6309d4d1]
2024-01-19 10:36:34,111 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:36:34,119 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:36:34,127 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:36:34,131 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.585 seconds (process running for 1919.89)
2024-01-19 10:36:34,132 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:41:33,403 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 4 class path changes (4 additions, 0 deletions, 0 modifications)
2024-01-19 10:41:33,405 INFO o.a.j.l.DirectJDKLog [Thread-27] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:41:33,415 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-27] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:41:33,416 INFO c.z.h.HikariDataSource [Thread-27] HikariPool-7 - Shutdown initiated...
2024-01-19 10:41:33,419 INFO c.z.h.HikariDataSource [Thread-27] HikariPool-7 - Shutdown completed.
2024-01-19 10:41:33,476 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:41:33,476 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:41:33,607 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:41:33,611 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.
2024-01-19 10:41:33,653 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:41:33,654 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:41:33,682 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:41:33,682 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:41:33,682 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:41:33,682 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:41:33,705 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:41:33,705 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 228 ms
2024-01-19 10:41:33,720 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-8 - Starting...
2024-01-19 10:41:33,750 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-8 - Added connection org.postgresql.jdbc.PgConnection@2e9a490c
2024-01-19 10:41:33,750 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-8 - Start completed.
2024-01-19 10:41:33,757 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:41:33,770 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:41:33,782 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:41:33,782 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:41:33,782 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:41:33,782 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:41:33,782 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:41:33,782 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:41:33,782 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:41:33,790 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:41:33,791 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:41:33,801 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:41:33,803 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:41:33,806 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:41:33,807 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:41:33,827 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:41:33,854 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:41:33,889 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:41:33,894 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:41:33,936 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@d602efb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3ed45d28, org.springframework.security.web.context.SecurityContextHolderFilter@67d1abc8, org.springframework.security.web.header.HeaderWriterFilter@6069066b, org.springframework.web.filter.CorsFilter@2f424a72, org.springframework.security.web.csrf.CsrfFilter@154fc305, org.springframework.security.web.authentication.logout.LogoutFilter@7442e36c, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@6edae9cf, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@52690345, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7a1b1d3d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@16ef5ac4, org.springframework.security.web.session.SessionManagementFilter@c6d16ab, org.springframework.security.web.access.ExceptionTranslationFilter@fc7494e, org.springframework.security.web.access.intercept.AuthorizationFilter@4c7baf97]
2024-01-19 10:41:34,002 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:41:34,010 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:41:34,016 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:41:34,019 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.563 seconds (process running for 2219.778)
2024-01-19 10:41:34,019 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:43:04,511 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 2 class path changes (0 additions, 2 deletions, 0 modifications)
2024-01-19 10:43:04,512 INFO o.a.j.l.DirectJDKLog [Thread-31] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:43:04,523 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-31] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:43:04,524 INFO c.z.h.HikariDataSource [Thread-31] HikariPool-8 - Shutdown initiated...
2024-01-19 10:43:04,527 INFO c.z.h.HikariDataSource [Thread-31] HikariPool-8 - Shutdown completed.
2024-01-19 10:43:04,588 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:43:04,588 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:43:04,719 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:43:04,721 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2024-01-19 10:43:04,762 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:43:04,767 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:43:04,798 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:43:04,799 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:43:04,799 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:43:04,799 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:43:04,821 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:43:04,821 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 232 ms
2024-01-19 10:43:04,838 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-9 - Starting...
2024-01-19 10:43:04,866 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-9 - Added connection org.postgresql.jdbc.PgConnection@78188873
2024-01-19 10:43:04,866 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-9 - Start completed.
2024-01-19 10:43:04,873 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:43:04,886 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:43:04,898 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:43:04,898 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:43:04,898 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:43:04,898 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:43:04,898 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:43:04,898 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:43:04,898 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:43:04,907 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:43:04,909 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:43:04,920 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:43:04,922 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:43:04,926 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:43:04,927 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:43:04,947 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:43:04,975 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:43:05,019 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:43:05,023 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:43:05,081 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7f04ac65, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4912dc7e, org.springframework.security.web.context.SecurityContextHolderFilter@325eea24, org.springframework.security.web.header.HeaderWriterFilter@140b2726, org.springframework.web.filter.CorsFilter@504251e1, org.springframework.security.web.csrf.CsrfFilter@56d27d97, org.springframework.security.web.authentication.logout.LogoutFilter@69011838, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@4e87c0e4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3e32225c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@73cd00ab, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@20b22bed, org.springframework.security.web.session.SessionManagementFilter@77a50f82, org.springframework.security.web.access.ExceptionTranslationFilter@2e54469d, org.springframework.security.web.access.intercept.AuthorizationFilter@2fa6cdf0]
2024-01-19 10:43:05,163 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:43:05,175 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:43:05,182 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:43:05,185 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.618 seconds (process running for 2310.945)
2024-01-19 10:43:05,187 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:43:08,640 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 3 class path changes (2 additions, 0 deletions, 1 modification)
2024-01-19 10:43:08,641 INFO o.a.j.l.DirectJDKLog [Thread-35] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:43:08,653 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-35] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:43:08,654 INFO c.z.h.HikariDataSource [Thread-35] HikariPool-9 - Shutdown initiated...
2024-01-19 10:43:08,658 INFO c.z.h.HikariDataSource [Thread-35] HikariPool-9 - Shutdown completed.
2024-01-19 10:43:08,726 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:43:08,726 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:43:08,900 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:43:08,904 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.
2024-01-19 10:43:08,958 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:43:08,959 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:43:08,991 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:43:08,992 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:43:08,992 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:43:08,992 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:43:09,025 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:43:09,025 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 297 ms
2024-01-19 10:43:09,046 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-10 - Starting...
2024-01-19 10:43:09,075 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-10 - Added connection org.postgresql.jdbc.PgConnection@6f8a7dd4
2024-01-19 10:43:09,075 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-10 - Start completed.
2024-01-19 10:43:09,086 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:43:09,105 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:43:09,125 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:43:09,125 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:43:09,125 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:43:09,125 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:43:09,125 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:43:09,125 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:43:09,126 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:43:09,136 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:43:09,138 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:43:09,152 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:43:09,156 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:43:09,160 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:43:09,161 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:43:09,194 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:43:09,226 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:43:09,274 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:43:09,280 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:43:09,349 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@51654377, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@200aa0aa, org.springframework.security.web.context.SecurityContextHolderFilter@359fefd4, org.springframework.security.web.header.HeaderWriterFilter@3db0068, org.springframework.web.filter.CorsFilter@538c0387, org.springframework.security.web.csrf.CsrfFilter@23ec7a8e, org.springframework.security.web.authentication.logout.LogoutFilter@1b84012, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@121e39f6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5b23bf7c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@a02c30, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@303e5189, org.springframework.security.web.session.SessionManagementFilter@7567d3fc, org.springframework.security.web.access.ExceptionTranslationFilter@7d326c0f, org.springframework.security.web.access.intercept.AuthorizationFilter@46e6a27e]
2024-01-19 10:43:09,450 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:43:09,473 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:43:09,492 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:43:09,500 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.795 seconds (process running for 2315.259)
2024-01-19 10:43:09,502 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:44:59,062 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-01-19 10:44:59,064 INFO o.a.j.l.DirectJDKLog [Thread-39] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:44:59,077 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-39] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:44:59,077 INFO c.z.h.HikariDataSource [Thread-39] HikariPool-10 - Shutdown initiated...
2024-01-19 10:44:59,081 INFO c.z.h.HikariDataSource [Thread-39] HikariPool-10 - Shutdown completed.
2024-01-19 10:44:59,161 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:44:59,161 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:44:59,371 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:44:59,375 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.
2024-01-19 10:44:59,462 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:44:59,463 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:44:59,510 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:44:59,510 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:44:59,511 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:44:59,511 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:44:59,553 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:44:59,553 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 391 ms
2024-01-19 10:44:59,579 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-11 - Starting...
2024-01-19 10:44:59,626 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-11 - Added connection org.postgresql.jdbc.PgConnection@7d9da96c
2024-01-19 10:44:59,627 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-11 - Start completed.
2024-01-19 10:44:59,640 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:44:59,664 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:44:59,685 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:44:59,685 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:44:59,685 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:44:59,685 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:44:59,685 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:44:59,685 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:44:59,685 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:44:59,698 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:44:59,700 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:44:59,717 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:44:59,721 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:44:59,725 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:44:59,727 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:44:59,758 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:44:59,794 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:44:59,846 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:44:59,852 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:44:59,919 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@37f8dff8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@67898064, org.springframework.security.web.context.SecurityContextHolderFilter@30a67519, org.springframework.security.web.header.HeaderWriterFilter@1c0489dd, org.springframework.web.filter.CorsFilter@13f8dfdc, org.springframework.security.web.csrf.CsrfFilter@1a575fb, org.springframework.security.web.authentication.logout.LogoutFilter@7014ece3, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@60dc54f4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@67c94a30, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5f3b7d75, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@110152a3, org.springframework.security.web.session.SessionManagementFilter@1a06d10f, org.springframework.security.web.access.ExceptionTranslationFilter@5cb1712c, org.springframework.security.web.access.intercept.AuthorizationFilter@5975ae1f]
2024-01-19 10:45:00,047 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:45:00,067 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:45:00,076 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:45:00,081 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.949 seconds (process running for 2425.841)
2024-01-19 10:45:00,082 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:46:48,850 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-01-19 10:46:48,852 INFO o.a.j.l.DirectJDKLog [Thread-43] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:46:48,872 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-43] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:46:48,873 INFO c.z.h.HikariDataSource [Thread-43] HikariPool-11 - Shutdown initiated...
2024-01-19 10:46:48,877 INFO c.z.h.HikariDataSource [Thread-43] HikariPool-11 - Shutdown completed.
2024-01-19 10:46:48,942 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:46:48,943 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:46:49,099 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:46:49,102 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.
2024-01-19 10:46:49,143 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:46:49,144 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:46:49,179 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:46:49,179 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:46:49,179 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:46:49,179 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:46:49,209 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:46:49,209 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 265 ms
2024-01-19 10:46:49,225 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-12 - Starting...
2024-01-19 10:46:49,256 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-12 - Added connection org.postgresql.jdbc.PgConnection@3dd99342
2024-01-19 10:46:49,256 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-12 - Start completed.
2024-01-19 10:46:49,263 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:46:49,277 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:46:49,288 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:46:49,288 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:46:49,288 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:46:49,288 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:46:49,288 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:46:49,288 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:46:49,288 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:46:49,296 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:46:49,297 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:46:49,307 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:46:49,310 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:46:49,313 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:46:49,314 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:46:49,333 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:46:49,364 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:46:49,399 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:46:49,404 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:46:49,449 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@528019c4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@33fa0e11, org.springframework.security.web.context.SecurityContextHolderFilter@74767c3e, org.springframework.security.web.header.HeaderWriterFilter@2a4358a8, org.springframework.web.filter.CorsFilter@42e421c1, org.springframework.security.web.csrf.CsrfFilter@467dd99a, org.springframework.security.web.authentication.logout.LogoutFilter@111f5280, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3960d73a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@44cd8222, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@747b140b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7d82e7a0, org.springframework.security.web.session.SessionManagementFilter@5cefdf30, org.springframework.security.web.access.ExceptionTranslationFilter@31102379, org.springframework.security.web.access.intercept.AuthorizationFilter@159c8e69]
2024-01-19 10:46:49,546 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:46:49,577 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:46:49,589 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:46:49,594 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.672 seconds (process running for 2535.354)
2024-01-19 10:46:49,595 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:47:27,844 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-01-19 10:47:27,845 INFO o.a.j.l.DirectJDKLog [Thread-47] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:47:27,859 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-47] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:47:27,859 INFO c.z.h.HikariDataSource [Thread-47] HikariPool-12 - Shutdown initiated...
2024-01-19 10:47:27,861 INFO c.z.h.HikariDataSource [Thread-47] HikariPool-12 - Shutdown completed.
2024-01-19 10:47:27,921 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:47:27,921 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:47:28,048 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:47:28,051 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2024-01-19 10:47:28,091 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:47:28,092 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:47:28,117 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:47:28,118 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:47:28,118 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:47:28,118 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:47:28,140 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:47:28,140 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 218 ms
2024-01-19 10:47:28,155 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-13 - Starting...
2024-01-19 10:47:28,182 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-13 - Added connection org.postgresql.jdbc.PgConnection@214a5408
2024-01-19 10:47:28,182 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-13 - Start completed.
2024-01-19 10:47:28,190 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:47:28,202 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:47:28,215 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:47:28,215 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:47:28,215 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:47:28,215 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:47:28,215 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:47:28,215 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:47:28,215 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:47:28,223 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:47:28,225 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:47:28,235 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:47:28,238 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:47:28,241 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:47:28,242 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:47:28,261 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:47:28,286 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:47:28,319 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:47:28,325 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:47:28,369 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@438bbd1d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@460a984c, org.springframework.security.web.context.SecurityContextHolderFilter@6c2cded4, org.springframework.security.web.header.HeaderWriterFilter@176175c8, org.springframework.web.filter.CorsFilter@2da5924c, org.springframework.security.web.csrf.CsrfFilter@4b186ebd, org.springframework.security.web.authentication.logout.LogoutFilter@4f47ff3a, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@33453a60, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@74eb31aa, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6838d5ca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@37a93ba2, org.springframework.security.web.session.SessionManagementFilter@64c93976, org.springframework.security.web.access.ExceptionTranslationFilter@14319dd6, org.springframework.security.web.access.intercept.AuthorizationFilter@4c34fe07]
2024-01-19 10:47:28,433 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:47:28,445 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:47:28,458 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:47:28,462 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.561 seconds (process running for 2574.222)
2024-01-19 10:47:28,463 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:48:06,798 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-01-19 10:48:06,802 INFO o.a.j.l.DirectJDKLog [Thread-51] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:48:06,813 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-51] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:48:06,814 INFO c.z.h.HikariDataSource [Thread-51] HikariPool-13 - Shutdown initiated...
2024-01-19 10:48:06,816 INFO c.z.h.HikariDataSource [Thread-51] HikariPool-13 - Shutdown completed.
2024-01-19 10:48:06,886 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:48:06,886 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:48:07,015 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:48:07,019 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2024-01-19 10:48:07,065 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:48:07,066 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:48:07,095 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:48:07,095 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:48:07,096 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:48:07,096 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:48:07,120 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:48:07,120 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 233 ms
2024-01-19 10:48:07,136 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-14 - Starting...
2024-01-19 10:48:07,164 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-14 - Added connection org.postgresql.jdbc.PgConnection@243bc044
2024-01-19 10:48:07,164 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-14 - Start completed.
2024-01-19 10:48:07,173 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:48:07,186 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:48:07,203 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:48:07,203 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:48:07,203 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:48:07,203 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:48:07,203 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:48:07,203 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:48:07,203 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:48:07,212 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:48:07,214 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:48:07,223 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:48:07,226 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:48:07,229 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:48:07,230 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:48:07,247 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:48:07,273 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:48:07,304 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:48:07,311 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:48:07,357 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3f7288be, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@480d4ca0, org.springframework.security.web.context.SecurityContextHolderFilter@5101cfb3, org.springframework.security.web.header.HeaderWriterFilter@301fc490, org.springframework.web.filter.CorsFilter@6fd32277, org.springframework.security.web.csrf.CsrfFilter@56211510, org.springframework.security.web.authentication.logout.LogoutFilter@1c51d8ca, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@2df78242, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@347eef24, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7a0b967f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7e27585d, org.springframework.security.web.session.SessionManagementFilter@fd6c2cc, org.springframework.security.web.access.ExceptionTranslationFilter@355a1817, org.springframework.security.web.access.intercept.AuthorizationFilter@790bde48]
2024-01-19 10:48:07,428 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:48:07,441 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:48:07,447 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:48:07,451 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.595 seconds (process running for 2613.211)
2024-01-19 10:48:07,452 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:50:09,637 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 2 class path changes (2 additions, 0 deletions, 0 modifications)
2024-01-19 10:50:09,638 INFO o.a.j.l.DirectJDKLog [Thread-55] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:50:09,651 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-55] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:50:09,651 INFO c.z.h.HikariDataSource [Thread-55] HikariPool-14 - Shutdown initiated...
2024-01-19 10:50:09,653 INFO c.z.h.HikariDataSource [Thread-55] HikariPool-14 - Shutdown completed.
2024-01-19 10:50:09,720 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:50:09,720 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:50:09,866 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:50:09,869 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2024-01-19 10:50:09,914 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:50:09,915 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:50:09,944 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:50:09,945 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:50:09,945 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:50:09,945 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:50:09,967 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:50:09,967 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 244 ms
2024-01-19 10:50:09,984 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-15 - Starting...
2024-01-19 10:50:10,013 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-15 - Added connection org.postgresql.jdbc.PgConnection@cef091d
2024-01-19 10:50:10,014 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-15 - Start completed.
2024-01-19 10:50:10,021 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:50:10,041 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:50:10,057 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:50:10,057 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:50:10,057 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:50:10,057 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:50:10,057 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:50:10,057 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:50:10,057 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:50:10,066 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:50:10,067 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:50:10,078 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:50:10,081 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:50:10,084 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:50:10,085 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:50:10,102 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:50:10,129 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:50:10,169 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:50:10,176 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:50:10,226 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2b1ca146, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5fe3af6, org.springframework.security.web.context.SecurityContextHolderFilter@1ef723b3, org.springframework.security.web.header.HeaderWriterFilter@736a3a0f, org.springframework.web.filter.CorsFilter@239d8224, org.springframework.security.web.csrf.CsrfFilter@4519f2d7, org.springframework.security.web.authentication.logout.LogoutFilter@2d083a68, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@59e41b7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2b8935e2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@991c8de, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@54f9fc19, org.springframework.security.web.session.SessionManagementFilter@14f2e4b0, org.springframework.security.web.access.ExceptionTranslationFilter@7bf9c641, org.springframework.security.web.access.intercept.AuthorizationFilter@6929ed80]
2024-01-19 10:50:10,315 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:50:10,326 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:50:10,332 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:50:10,335 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.64 seconds (process running for 2736.096)
2024-01-19 10:50:10,336 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:50:34,232 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-01-19 10:50:34,233 INFO o.a.j.l.DirectJDKLog [Thread-59] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:50:34,244 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-59] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:50:34,244 INFO c.z.h.HikariDataSource [Thread-59] HikariPool-15 - Shutdown initiated...
2024-01-19 10:50:34,247 INFO c.z.h.HikariDataSource [Thread-59] HikariPool-15 - Shutdown completed.
2024-01-19 10:50:34,305 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:50:34,305 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:50:34,434 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:50:34,438 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.
2024-01-19 10:50:34,481 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:50:34,481 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:50:34,506 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:50:34,506 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:50:34,507 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:50:34,507 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:50:34,530 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:50:34,530 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 224 ms
2024-01-19 10:50:34,546 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-16 - Starting...
2024-01-19 10:50:34,567 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-16 - Added connection org.postgresql.jdbc.PgConnection@497b1ae3
2024-01-19 10:50:34,567 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-16 - Start completed.
2024-01-19 10:50:34,573 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:50:34,586 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:50:34,597 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:50:34,597 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:50:34,597 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:50:34,597 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:50:34,597 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:50:34,598 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:50:34,598 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:50:34,606 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:50:34,607 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:50:34,616 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:50:34,619 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:50:34,622 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:50:34,623 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:50:34,641 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:50:34,667 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:50:34,704 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:50:34,709 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:50:34,756 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1c3f4723, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2aae08dd, org.springframework.security.web.context.SecurityContextHolderFilter@5293ca7c, org.springframework.security.web.header.HeaderWriterFilter@661e9b94, org.springframework.web.filter.CorsFilter@38cac170, org.springframework.security.web.csrf.CsrfFilter@450b9e55, org.springframework.security.web.authentication.logout.LogoutFilter@22031dfd, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@26694ae6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2f9c156a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3d4cf936, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@541882f5, org.springframework.security.web.session.SessionManagementFilter@4b731c71, org.springframework.security.web.access.ExceptionTranslationFilter@140d2ff3, org.springframework.security.web.access.intercept.AuthorizationFilter@3724aa42]
2024-01-19 10:50:34,826 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:50:34,838 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:50:34,844 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:50:34,847 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.559 seconds (process running for 2760.608)
2024-01-19 10:50:34,848 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:50:37,283 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-01-19 10:50:37,284 INFO o.a.j.l.DirectJDKLog [Thread-63] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:50:37,295 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-63] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:50:37,295 INFO c.z.h.HikariDataSource [Thread-63] HikariPool-16 - Shutdown initiated...
2024-01-19 10:50:37,298 INFO c.z.h.HikariDataSource [Thread-63] HikariPool-16 - Shutdown completed.
2024-01-19 10:50:37,365 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:50:37,365 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:50:37,509 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:50:37,512 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2024-01-19 10:50:37,551 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:50:37,551 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:50:37,576 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:50:37,576 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:50:37,576 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:50:37,576 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:50:37,601 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:50:37,601 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 234 ms
2024-01-19 10:50:37,619 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-17 - Starting...
2024-01-19 10:50:37,640 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-17 - Added connection org.postgresql.jdbc.PgConnection@51b72c4f
2024-01-19 10:50:37,640 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-17 - Start completed.
2024-01-19 10:50:37,647 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:50:37,660 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:50:37,672 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:50:37,672 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:50:37,672 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:50:37,672 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:50:37,672 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:50:37,672 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:50:37,672 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:50:37,691 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:50:37,692 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:50:37,702 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:50:37,704 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:50:37,707 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:50:37,708 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:50:37,725 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:50:37,754 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:50:37,783 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:50:37,788 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:50:37,831 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@431bc00d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@34477aeb, org.springframework.security.web.context.SecurityContextHolderFilter@191aef13, org.springframework.security.web.header.HeaderWriterFilter@5a00774b, org.springframework.web.filter.CorsFilter@7ed74f49, org.springframework.security.web.csrf.CsrfFilter@111b3efd, org.springframework.security.web.authentication.logout.LogoutFilter@2841f370, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@64666582, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@18ef85b9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@410c13c0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@29ca7f64, org.springframework.security.web.session.SessionManagementFilter@513edf1f, org.springframework.security.web.access.ExceptionTranslationFilter@40182d84, org.springframework.security.web.access.intercept.AuthorizationFilter@6d54f1c3]
2024-01-19 10:50:37,896 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:50:37,905 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:50:37,912 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:50:37,915 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.579 seconds (process running for 2763.676)
2024-01-19 10:50:37,916 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:51:53,019 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 2 class path changes (0 additions, 2 deletions, 0 modifications)
2024-01-19 10:51:53,020 INFO o.a.j.l.DirectJDKLog [Thread-67] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:51:53,030 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-67] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:51:53,030 INFO c.z.h.HikariDataSource [Thread-67] HikariPool-17 - Shutdown initiated...
2024-01-19 10:51:53,032 INFO c.z.h.HikariDataSource [Thread-67] HikariPool-17 - Shutdown completed.
2024-01-19 10:51:53,099 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:51:53,099 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:51:53,223 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:51:53,226 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2024-01-19 10:51:53,263 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:51:53,264 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:51:53,293 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:51:53,293 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:51:53,294 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:51:53,294 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:51:53,316 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:51:53,316 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 216 ms
2024-01-19 10:51:53,336 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-18 - Starting...
2024-01-19 10:51:53,365 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-18 - Added connection org.postgresql.jdbc.PgConnection@236ec60e
2024-01-19 10:51:53,365 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-18 - Start completed.
2024-01-19 10:51:53,372 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:51:53,386 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:51:53,398 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:51:53,399 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:51:53,399 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:51:53,399 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:51:53,399 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:51:53,399 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:51:53,399 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:51:53,406 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:51:53,407 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:51:53,418 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:51:53,420 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:51:53,423 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:51:53,424 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:51:53,442 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:51:53,467 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:51:53,497 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:51:53,501 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:51:53,548 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@601cf240, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@49a2a170, org.springframework.security.web.context.SecurityContextHolderFilter@76d09c70, org.springframework.security.web.header.HeaderWriterFilter@14ece70f, org.springframework.web.filter.CorsFilter@3a2e0fd5, org.springframework.security.web.csrf.CsrfFilter@6f6bc797, org.springframework.security.web.authentication.logout.LogoutFilter@52eeb674, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@4766b1ce, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@21afd15b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@52089efe, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@48b4219f, org.springframework.security.web.session.SessionManagementFilter@47b6ac6e, org.springframework.security.web.access.ExceptionTranslationFilter@52f0ab0a, org.springframework.security.web.access.intercept.AuthorizationFilter@1b7d0059]
2024-01-19 10:51:53,614 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:51:53,622 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:51:53,629 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:51:53,632 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.561 seconds (process running for 2839.393)
2024-01-19 10:51:53,633 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:51:56,054 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-01-19 10:51:56,056 INFO o.a.j.l.DirectJDKLog [Thread-71] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:51:56,075 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-71] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:51:56,076 INFO c.z.h.HikariDataSource [Thread-71] HikariPool-18 - Shutdown initiated...
2024-01-19 10:51:56,080 INFO c.z.h.HikariDataSource [Thread-71] HikariPool-18 - Shutdown completed.
2024-01-19 10:51:56,149 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:51:56,149 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:51:56,323 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:51:56,328 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 4 ms. Found 0 JPA repository interfaces.
2024-01-19 10:51:56,371 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:51:56,371 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:51:56,400 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:51:56,400 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:51:56,400 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:51:56,400 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:51:56,429 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:51:56,429 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 279 ms
2024-01-19 10:51:56,453 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-19 - Starting...
2024-01-19 10:51:56,486 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-19 - Added connection org.postgresql.jdbc.PgConnection@18de55c8
2024-01-19 10:51:56,487 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-19 - Start completed.
2024-01-19 10:51:56,498 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:51:56,516 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:51:56,534 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:51:56,535 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:51:56,535 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:51:56,535 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:51:56,535 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:51:56,535 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:51:56,535 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:51:56,547 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:51:56,549 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:51:56,562 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:51:56,564 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:51:56,568 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:51:56,568 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:51:56,588 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:51:56,617 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:51:56,651 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:51:56,655 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:51:56,702 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@cbf8e23, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1cea6107, org.springframework.security.web.context.SecurityContextHolderFilter@1074a910, org.springframework.security.web.header.HeaderWriterFilter@18f725d4, org.springframework.web.filter.CorsFilter@4169c70c, org.springframework.security.web.csrf.CsrfFilter@19176323, org.springframework.security.web.authentication.logout.LogoutFilter@12ceecc4, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@6972e705, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@72436f3a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@53bb2d23, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3fdd5aeb, org.springframework.security.web.session.SessionManagementFilter@32d8ca13, org.springframework.security.web.access.ExceptionTranslationFilter@71cb935, org.springframework.security.web.access.intercept.AuthorizationFilter@71c5936d]
2024-01-19 10:51:56,769 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:51:56,779 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:51:56,785 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:51:56,789 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.663 seconds (process running for 2842.549)
2024-01-19 10:51:56,790 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:52:22,761 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-01-19 10:52:22,762 INFO o.a.j.l.DirectJDKLog [Thread-75] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:52:22,771 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-75] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:52:22,772 INFO c.z.h.HikariDataSource [Thread-75] HikariPool-19 - Shutdown initiated...
2024-01-19 10:52:22,775 INFO c.z.h.HikariDataSource [Thread-75] HikariPool-19 - Shutdown completed.
2024-01-19 10:52:22,835 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:52:22,835 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:52:22,955 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:52:22,958 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2024-01-19 10:52:22,997 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:52:22,997 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:52:23,022 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:52:23,022 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:52:23,022 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:52:23,022 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:52:23,045 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:52:23,045 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 209 ms
2024-01-19 10:52:23,063 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-20 - Starting...
2024-01-19 10:52:23,084 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-20 - Added connection org.postgresql.jdbc.PgConnection@5e37885f
2024-01-19 10:52:23,084 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-20 - Start completed.
2024-01-19 10:52:23,093 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:52:23,106 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:52:23,117 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:52:23,117 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:52:23,117 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:52:23,117 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:52:23,117 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:52:23,117 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:52:23,117 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:52:23,127 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:52:23,129 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:52:23,139 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:52:23,142 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:52:23,145 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:52:23,146 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:52:23,164 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:52:23,191 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:52:23,223 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:52:23,227 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:52:23,276 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@37ea88da, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2817e420, org.springframework.security.web.context.SecurityContextHolderFilter@560d67a8, org.springframework.security.web.header.HeaderWriterFilter@73c51c97, org.springframework.web.filter.CorsFilter@3a5693b5, org.springframework.security.web.csrf.CsrfFilter@21d82661, org.springframework.security.web.authentication.logout.LogoutFilter@6d0a86f7, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@eee9ace, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@8593e8f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5323aab7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@409456db, org.springframework.security.web.session.SessionManagementFilter@3606b427, org.springframework.security.web.access.ExceptionTranslationFilter@4783213f, org.springframework.security.web.access.intercept.AuthorizationFilter@625e01a6]
2024-01-19 10:52:23,349 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:52:23,357 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:52:23,365 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:52:23,368 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.558 seconds (process running for 2869.129)
2024-01-19 10:52:23,369 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:52:25,802 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-01-19 10:52:25,803 INFO o.a.j.l.DirectJDKLog [Thread-79] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:52:25,813 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-79] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:52:25,813 INFO c.z.h.HikariDataSource [Thread-79] HikariPool-20 - Shutdown initiated...
2024-01-19 10:52:25,815 INFO c.z.h.HikariDataSource [Thread-79] HikariPool-20 - Shutdown completed.
2024-01-19 10:52:25,882 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:52:25,882 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:52:26,010 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:52:26,012 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2024-01-19 10:52:26,049 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:52:26,050 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:52:26,075 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:52:26,075 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:52:26,075 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:52:26,075 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:52:26,098 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:52:26,098 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 215 ms
2024-01-19 10:52:26,116 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-21 - Starting...
2024-01-19 10:52:26,137 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-21 - Added connection org.postgresql.jdbc.PgConnection@22e5ef27
2024-01-19 10:52:26,137 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-21 - Start completed.
2024-01-19 10:52:26,144 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:52:26,157 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:52:26,168 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:52:26,168 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:52:26,168 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:52:26,168 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:52:26,168 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:52:26,168 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:52:26,168 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:52:26,176 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:52:26,177 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:52:26,187 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:52:26,189 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:52:26,192 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:52:26,193 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:52:26,209 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:52:26,236 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:52:26,266 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:52:26,269 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:52:26,314 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6156f08d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@659abc30, org.springframework.security.web.context.SecurityContextHolderFilter@78cb361f, org.springframework.security.web.header.HeaderWriterFilter@48db0556, org.springframework.web.filter.CorsFilter@332ea1a2, org.springframework.security.web.csrf.CsrfFilter@183a3c3, org.springframework.security.web.authentication.logout.LogoutFilter@faee7b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@19bd4f2c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@a8cc04b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1a6d95f9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@40194cc4, org.springframework.security.web.session.SessionManagementFilter@64ca1cfe, org.springframework.security.web.access.ExceptionTranslationFilter@78915491, org.springframework.security.web.access.intercept.AuthorizationFilter@15f87342]
2024-01-19 10:52:26,375 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:52:26,384 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:52:26,391 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:52:26,394 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.538 seconds (process running for 2872.155)
2024-01-19 10:52:26,395 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:53:32,272 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-01-19 10:53:32,274 INFO o.a.j.l.DirectJDKLog [Thread-83] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:53:32,290 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-83] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:53:32,290 INFO c.z.h.HikariDataSource [Thread-83] HikariPool-21 - Shutdown initiated...
2024-01-19 10:53:32,292 INFO c.z.h.HikariDataSource [Thread-83] HikariPool-21 - Shutdown completed.
2024-01-19 10:53:32,364 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:53:32,364 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:53:32,488 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:53:32,491 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2024-01-19 10:53:32,527 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:53:32,528 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:53:32,555 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:53:32,555 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:53:32,555 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:53:32,555 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:53:32,576 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:53:32,576 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 211 ms
2024-01-19 10:53:32,592 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-22 - Starting...
2024-01-19 10:53:32,621 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-22 - Added connection org.postgresql.jdbc.PgConnection@506ddad2
2024-01-19 10:53:32,622 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-22 - Start completed.
2024-01-19 10:53:32,628 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:53:32,643 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:53:32,655 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:53:32,655 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:53:32,655 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:53:32,655 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:53:32,655 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:53:32,655 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:53:32,655 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:53:32,662 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:53:32,663 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:53:32,673 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:53:32,675 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:53:32,678 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:53:32,679 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:53:32,696 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:53:32,731 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:53:32,765 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:53:32,770 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:53:32,810 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@65e5ed1b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@181b6502, org.springframework.security.web.context.SecurityContextHolderFilter@51cf6fe, org.springframework.security.web.header.HeaderWriterFilter@227b63b1, org.springframework.web.filter.CorsFilter@5f4a920a, org.springframework.security.web.csrf.CsrfFilter@3b51096, org.springframework.security.web.authentication.logout.LogoutFilter@4f78ee2b, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@6de44f3a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@49a560a6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@30baf4c8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@10189b46, org.springframework.security.web.session.SessionManagementFilter@2e867218, org.springframework.security.web.access.ExceptionTranslationFilter@256d2318, org.springframework.security.web.access.intercept.AuthorizationFilter@4a41aae9]
2024-01-19 10:53:32,870 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:53:32,880 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:53:32,887 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:53:32,891 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.558 seconds (process running for 2938.651)
2024-01-19 10:53:32,892 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:53:35,727 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 2 class path changes (2 additions, 0 deletions, 0 modifications)
2024-01-19 10:53:35,728 INFO o.a.j.l.DirectJDKLog [Thread-87] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:53:35,737 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-87] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:53:35,738 INFO c.z.h.HikariDataSource [Thread-87] HikariPool-22 - Shutdown initiated...
2024-01-19 10:53:35,740 INFO c.z.h.HikariDataSource [Thread-87] HikariPool-22 - Shutdown completed.
2024-01-19 10:53:35,801 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:53:35,801 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:53:35,922 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:53:35,925 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2024-01-19 10:53:35,960 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:53:35,961 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:53:35,983 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:53:35,983 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:53:35,984 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:53:35,984 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:53:36,006 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:53:36,006 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 204 ms
2024-01-19 10:53:36,021 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-23 - Starting...
2024-01-19 10:53:36,040 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-23 - Added connection org.postgresql.jdbc.PgConnection@d8a04db
2024-01-19 10:53:36,041 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-23 - Start completed.
2024-01-19 10:53:36,049 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:53:36,062 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:53:36,072 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:53:36,072 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:53:36,072 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:53:36,072 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:53:36,072 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:53:36,072 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:53:36,072 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:53:36,089 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:53:36,090 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:53:36,100 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:53:36,102 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:53:36,105 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:53:36,106 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:53:36,121 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:53:36,155 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:53:36,186 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:53:36,191 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:53:36,235 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5e2ec2c7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5b7f7904, org.springframework.security.web.context.SecurityContextHolderFilter@713bd4a4, org.springframework.security.web.header.HeaderWriterFilter@3e5a2696, org.springframework.web.filter.CorsFilter@40f23dee, org.springframework.security.web.csrf.CsrfFilter@6bf6cde7, org.springframework.security.web.authentication.logout.LogoutFilter@1a768a55, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@70a4daa4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@b817081, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@640099f1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1655beae, org.springframework.security.web.session.SessionManagementFilter@2cffad29, org.springframework.security.web.access.ExceptionTranslationFilter@6713ba78, org.springframework.security.web.access.intercept.AuthorizationFilter@7a5c395c]
2024-01-19 10:53:36,300 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 10:53:36,309 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 10:53:36,319 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 10:53:36,322 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.547 seconds (process running for 2942.083)
2024-01-19 10:53:36,323 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 10:58:13,361 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-01-19 10:58:13,363 INFO o.a.j.l.DirectJDKLog [Thread-91] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 10:58:13,374 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-91] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:58:13,374 INFO c.z.h.HikariDataSource [Thread-91] HikariPool-23 - Shutdown initiated...
2024-01-19 10:58:13,377 INFO c.z.h.HikariDataSource [Thread-91] HikariPool-23 - Shutdown completed.
2024-01-19 10:58:13,455 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 10:58:13,456 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 10:58:13,598 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 10:58:13,629 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 31 ms. Found 1 JPA repository interface.
2024-01-19 10:58:13,687 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 10:58:13,688 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 10:58:13,723 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 10:58:13,723 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 10:58:13,723 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 10:58:13,723 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 10:58:13,747 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 10:58:13,747 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 290 ms
2024-01-19 10:58:13,767 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-24 - Starting...
2024-01-19 10:58:13,797 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-24 - Added connection org.postgresql.jdbc.PgConnection@2d43846c
2024-01-19 10:58:13,797 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-24 - Start completed.
2024-01-19 10:58:13,805 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 10:58:13,817 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 10:58:13,832 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 10:58:13,832 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 10:58:13,832 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 10:58:13,832 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 10:58:13,832 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 10:58:13,832 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 10:58:13,832 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 10:58:13,839 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 10:58:13,840 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 10:58:13,852 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 10:58:13,854 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 10:58:13,858 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 10:58:13,859 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 10:58:13,877 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 10:58:13,911 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:58:13,956 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 10:58:13,962 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 10:58:14,020 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3f7456d5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4a2e154d, org.springframework.security.web.context.SecurityContextHolderFilter@38c96287, org.springframework.security.web.header.HeaderWriterFilter@35a97f65, org.springframework.web.filter.CorsFilter@18b86acb, org.springframework.security.web.csrf.CsrfFilter@c2607cc, org.springframework.security.web.authentication.logout.LogoutFilter@579ac193, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@4e847cc9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@36f4cd0b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4858dee7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@75372f21, org.springframework.security.web.session.SessionManagementFilter@4ed1db1, org.springframework.security.web.access.ExceptionTranslationFilter@75ef6b8e, org.springframework.security.web.access.intercept.AuthorizationFilter@4f93baf1]
2024-01-19 10:58:14,260 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
2024-01-19 10:58:14,261 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 10:58:14,261 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-24 - Shutdown initiated...
2024-01-19 10:58:14,264 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-24 - Shutdown completed.
2024-01-19 10:58:14,264 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 10:58:14,270 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 10:58:14,291 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:967)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:107)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:124)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:258)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111)
	... 33 common frames omitted
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'slug' found for type 'Doctor'
	at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:90)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:443)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:419)
	at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:372)
	at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:354)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:332)
	at org.springframework.data.repository.query.parser.Part.<init>(Part.java:81)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:259)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:260)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:389)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:390)
	at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:103)
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:100)
	... 37 common frames omitted
2024-01-19 11:01:36,270 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:01:36,270 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:01:36,556 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:01:36,557 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 0 ms. Found 0 JPA repository interfaces.
2024-01-19 11:01:36,647 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:01:36,649 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:01:36,715 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:01:36,717 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:01:36,717 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:01:36,717 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:01:36,777 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:01:36,778 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 506 ms
2024-01-19 11:01:36,826 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-25 - Starting...
2024-01-19 11:01:36,897 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-25 - Added connection org.postgresql.jdbc.PgConnection@758756c6
2024-01-19 11:01:36,898 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-25 - Start completed.
2024-01-19 11:01:36,912 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:01:36,949 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:01:36,973 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:01:36,973 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:01:36,973 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:01:36,973 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:01:36,973 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:01:36,973 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:01:36,973 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:01:36,988 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:01:36,990 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:01:37,014 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:01:37,020 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:01:37,025 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:01:37,026 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:01:37,046 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:01:37,046 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:01:37,108 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:01:37,258 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:01:37,287 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6f70ed53, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@767a07c4, org.springframework.security.web.context.SecurityContextHolderFilter@73e37580, org.springframework.security.web.header.HeaderWriterFilter@44640498, org.springframework.web.filter.CorsFilter@1a91983b, org.springframework.security.web.csrf.CsrfFilter@b9ed239, org.springframework.security.web.authentication.logout.LogoutFilter@3822b7e7, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@50822b68, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@e917edf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@342115da, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5b89296a, org.springframework.security.web.access.ExceptionTranslationFilter@64cbc827, org.springframework.security.web.access.intercept.AuthorizationFilter@7db236b6]
2024-01-19 11:01:37,315 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:01:37,342 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:01:37,360 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:01:37,365 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 1.134 seconds (process running for 3423.126)
2024-01-19 11:01:37,368 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation delta:


==========================
CONDITION EVALUATION DELTA
==========================


Positive matches:
-----------------

   OAuth2ResourceServerJwtConfiguration.OAuth2SecurityFilterChainConfiguration matched:
      - AllNestedConditions 2 matched 0 did not; NestedCondition on DefaultWebSecurityCondition.Beans @ConditionalOnMissingBean (types: org.springframework.security.web.SecurityFilterChain; SearchStrategy: all) did not find any beans; NestedCondition on DefaultWebSecurityCondition.Classes @ConditionalOnClass found required classes 'org.springframework.security.web.SecurityFilterChain', 'org.springframework.security.config.annotation.web.builders.HttpSecurity' (DefaultWebSecurityCondition)

   OAuth2ResourceServerJwtConfiguration.OAuth2SecurityFilterChainConfiguration#jwtSecurityFilterChain matched:
      - @ConditionalOnBean (types: org.springframework.security.oauth2.jwt.JwtDecoder; SearchStrategy: all) found bean 'jwtDecoderByJwkKeySetUri' (OnBeanCondition)

   SpringBootWebSecurityConfiguration.WebSecurityEnablerConfiguration matched:
      - @ConditionalOnClass found required class 'org.springframework.security.config.annotation.web.configuration.EnableWebSecurity' (OnClassCondition)
      - @ConditionalOnMissingBean (names: springSecurityFilterChain; SearchStrategy: all) did not find any beans (OnBeanCondition)


Negative matches:
-----------------

    None


Exclusions:
-----------

    None


Unconditional classes:
----------------------

    None



2024-01-19 11:01:42,813 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2024-01-19 11:01:42,814 INFO o.a.j.l.DirectJDKLog [Thread-95] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:01:42,825 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-95] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:01:42,825 INFO c.z.h.HikariDataSource [Thread-95] HikariPool-25 - Shutdown initiated...
2024-01-19 11:01:42,827 INFO c.z.h.HikariDataSource [Thread-95] HikariPool-25 - Shutdown completed.
2024-01-19 11:01:42,888 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:01:42,888 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:01:43,045 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:01:43,046 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 0 ms. Found 0 JPA repository interfaces.
2024-01-19 11:01:43,084 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:01:43,085 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:01:43,116 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:01:43,117 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:01:43,117 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:01:43,117 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:01:43,143 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:01:43,143 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 254 ms
2024-01-19 11:01:43,161 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-26 - Starting...
2024-01-19 11:01:43,186 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-26 - Added connection org.postgresql.jdbc.PgConnection@2f11b5bd
2024-01-19 11:01:43,186 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-26 - Start completed.
2024-01-19 11:01:43,194 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:01:43,212 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:01:43,227 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:01:43,228 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:01:43,228 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:01:43,228 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:01:43,228 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:01:43,228 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:01:43,228 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:01:43,239 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:01:43,241 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:01:43,253 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:01:43,256 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:01:43,260 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:01:43,261 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:01:43,271 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:01:43,271 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:01:43,307 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:01:43,411 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:01:43,419 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@611eae00, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6b795b5b, org.springframework.security.web.context.SecurityContextHolderFilter@41ecfd8e, org.springframework.security.web.header.HeaderWriterFilter@1ed6fb7f, org.springframework.web.filter.CorsFilter@293505b2, org.springframework.security.web.csrf.CsrfFilter@4eb71f20, org.springframework.security.web.authentication.logout.LogoutFilter@7d6a15cf, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@4bcd202d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@37d4b48c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@72688384, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@b5b84f1, org.springframework.security.web.access.ExceptionTranslationFilter@253c08aa, org.springframework.security.web.access.intercept.AuthorizationFilter@6624954b]
2024-01-19 11:01:43,436 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:01:43,449 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:01:43,461 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:01:43,466 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.597 seconds (process running for 3429.227)
2024-01-19 11:01:43,467 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:02:39,847 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2024-01-19 11:02:39,849 INFO o.a.j.l.DirectJDKLog [Thread-102] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:02:39,864 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-102] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:02:39,865 INFO c.z.h.HikariDataSource [Thread-102] HikariPool-26 - Shutdown initiated...
2024-01-19 11:02:39,869 INFO c.z.h.HikariDataSource [Thread-102] HikariPool-26 - Shutdown completed.
2024-01-19 11:02:39,957 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:02:39,958 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:02:40,124 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:02:40,125 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 0 ms. Found 0 JPA repository interfaces.
2024-01-19 11:02:40,166 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:02:40,167 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:02:40,204 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:02:40,205 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:02:40,205 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:02:40,205 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:02:40,246 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:02:40,246 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 287 ms
2024-01-19 11:02:40,281 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-27 - Starting...
2024-01-19 11:02:40,324 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-27 - Added connection org.postgresql.jdbc.PgConnection@750db65c
2024-01-19 11:02:40,324 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-27 - Start completed.
2024-01-19 11:02:40,334 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:02:40,351 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:02:40,365 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:02:40,365 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:02:40,365 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:02:40,365 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:02:40,365 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:02:40,365 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:02:40,365 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:02:40,377 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:02:40,379 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:02:40,390 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:02:40,393 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:02:40,397 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:02:40,399 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:02:40,410 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:02:40,410 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:02:40,444 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:02:40,569 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:02:40,577 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@386d76ba, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@61d86bf3, org.springframework.security.web.context.SecurityContextHolderFilter@6caecd87, org.springframework.security.web.header.HeaderWriterFilter@76e48b85, org.springframework.web.filter.CorsFilter@77768857, org.springframework.security.web.csrf.CsrfFilter@686a8180, org.springframework.security.web.authentication.logout.LogoutFilter@5193de82, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@6dae2ac4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@50743713, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1921f88b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6b926477, org.springframework.security.web.access.ExceptionTranslationFilter@7c16a14f, org.springframework.security.web.access.intercept.AuthorizationFilter@228687d8]
2024-01-19 11:02:40,602 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:02:40,617 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:02:40,627 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:02:40,634 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.7 seconds (process running for 3486.397)
2024-01-19 11:02:40,636 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:07:47,438 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2024-01-19 11:07:47,440 INFO o.a.j.l.DirectJDKLog [Thread-106] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:07:47,451 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-106] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:07:47,452 INFO c.z.h.HikariDataSource [Thread-106] HikariPool-27 - Shutdown initiated...
2024-01-19 11:07:47,453 INFO c.z.h.HikariDataSource [Thread-106] HikariPool-27 - Shutdown completed.
2024-01-19 11:07:47,529 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:07:47,529 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:07:47,650 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:07:47,651 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 0 ms. Found 0 JPA repository interfaces.
2024-01-19 11:07:47,683 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:07:47,683 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:07:47,714 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:07:47,714 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:07:47,714 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:07:47,714 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:07:47,738 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:07:47,738 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 208 ms
2024-01-19 11:07:47,753 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-28 - Starting...
2024-01-19 11:07:47,782 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-28 - Added connection org.postgresql.jdbc.PgConnection@2128e9f5
2024-01-19 11:07:47,782 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-28 - Start completed.
2024-01-19 11:07:47,792 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:07:47,807 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:07:47,826 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:07:47,826 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:07:47,826 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:07:47,827 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:07:47,827 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:07:47,827 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:07:47,827 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:07:47,838 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:07:47,839 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:07:47,852 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:07:47,855 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:07:47,861 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:07:47,863 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:07:47,875 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:07:47,876 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:07:47,927 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:07:48,029 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:07:48,037 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@249cfd9e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@29094bc, org.springframework.security.web.context.SecurityContextHolderFilter@134163, org.springframework.security.web.header.HeaderWriterFilter@2a96a044, org.springframework.web.filter.CorsFilter@661b3c75, org.springframework.security.web.csrf.CsrfFilter@59c3db7a, org.springframework.security.web.authentication.logout.LogoutFilter@2fec7aca, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@1233e16, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@47cc5210, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2a653cd5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7ed07d2e, org.springframework.security.web.access.ExceptionTranslationFilter@4f54420e, org.springframework.security.web.access.intercept.AuthorizationFilter@4d55275c]
2024-01-19 11:07:48,052 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:07:48,060 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:07:48,066 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:07:48,069 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.562 seconds (process running for 3793.84)
2024-01-19 11:07:48,070 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:07:51,515 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2024-01-19 11:07:51,516 INFO o.a.j.l.DirectJDKLog [Thread-110] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:07:51,525 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-110] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:07:51,526 INFO c.z.h.HikariDataSource [Thread-110] HikariPool-28 - Shutdown initiated...
2024-01-19 11:07:51,527 INFO c.z.h.HikariDataSource [Thread-110] HikariPool-28 - Shutdown completed.
2024-01-19 11:07:51,587 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:07:51,587 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:07:51,700 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:07:51,700 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 0 ms. Found 0 JPA repository interfaces.
2024-01-19 11:07:51,735 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:07:51,736 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:07:51,772 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:07:51,772 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:07:51,772 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:07:51,772 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:07:51,801 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:07:51,801 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 213 ms
2024-01-19 11:07:51,817 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-29 - Starting...
2024-01-19 11:07:51,843 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-29 - Added connection org.postgresql.jdbc.PgConnection@4e2b8f2a
2024-01-19 11:07:51,843 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-29 - Start completed.
2024-01-19 11:07:51,852 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:07:51,865 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:07:51,877 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:07:51,878 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:07:51,878 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:07:51,878 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:07:51,878 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:07:51,878 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:07:51,878 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:07:51,887 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:07:51,888 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:07:51,896 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:07:51,899 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:07:51,902 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:07:51,902 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:07:51,910 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:07:51,910 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:07:51,936 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:07:52,020 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:07:52,026 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@67e9e198, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d2dd2f4, org.springframework.security.web.context.SecurityContextHolderFilter@68dc2a68, org.springframework.security.web.header.HeaderWriterFilter@3ba6dc6f, org.springframework.web.filter.CorsFilter@ef2ea71, org.springframework.security.web.csrf.CsrfFilter@6490b5d7, org.springframework.security.web.authentication.logout.LogoutFilter@12181628, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@1b4eb771, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@90314a9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@16d60358, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@60e931e1, org.springframework.security.web.access.ExceptionTranslationFilter@6a6ea49d, org.springframework.security.web.access.intercept.AuthorizationFilter@49354129]
2024-01-19 11:07:52,041 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:07:52,055 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:07:52,061 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:07:52,065 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.497 seconds (process running for 3797.836)
2024-01-19 11:07:52,065 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:09:16,020 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2024-01-19 11:09:16,021 INFO o.a.j.l.DirectJDKLog [Thread-114] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:09:16,031 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-114] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:09:16,031 INFO c.z.h.HikariDataSource [Thread-114] HikariPool-29 - Shutdown initiated...
2024-01-19 11:09:16,034 INFO c.z.h.HikariDataSource [Thread-114] HikariPool-29 - Shutdown completed.
2024-01-19 11:09:16,105 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:09:16,105 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:09:16,226 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:09:16,227 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.
2024-01-19 11:09:16,262 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:09:16,262 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:09:16,292 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:09:16,293 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:09:16,293 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:09:16,293 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:09:16,317 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:09:16,318 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 212 ms
2024-01-19 11:09:16,334 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-30 - Starting...
2024-01-19 11:09:16,363 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-30 - Added connection org.postgresql.jdbc.PgConnection@d590da3
2024-01-19 11:09:16,363 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-30 - Start completed.
2024-01-19 11:09:16,370 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:09:16,385 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:09:16,397 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:09:16,397 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:09:16,397 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:09:16,397 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:09:16,397 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:09:16,397 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:09:16,397 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:09:16,406 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:09:16,407 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:09:16,416 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:09:16,418 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:09:16,421 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:09:16,421 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:09:16,428 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:09:16,428 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:09:16,453 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:09:16,531 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:09:16,537 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4b6e16cd, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7679fede, org.springframework.security.web.context.SecurityContextHolderFilter@3187f214, org.springframework.security.web.header.HeaderWriterFilter@28e7b4cc, org.springframework.web.filter.CorsFilter@4aba7b50, org.springframework.security.web.csrf.CsrfFilter@1ddde263, org.springframework.security.web.authentication.logout.LogoutFilter@620942f8, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@6628c98c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@43bbd0bd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@79c4900c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6afeaf22, org.springframework.security.web.access.ExceptionTranslationFilter@60eb55cb, org.springframework.security.web.access.intercept.AuthorizationFilter@4e9e4c25]
2024-01-19 11:09:16,551 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:09:16,560 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:09:16,567 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:09:16,570 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.493 seconds (process running for 3882.342)
2024-01-19 11:09:16,571 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:09:31,224 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2024-01-19 11:09:31,225 INFO o.a.j.l.DirectJDKLog [Thread-118] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:09:31,235 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-118] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:09:31,235 INFO c.z.h.HikariDataSource [Thread-118] HikariPool-30 - Shutdown initiated...
2024-01-19 11:09:31,238 INFO c.z.h.HikariDataSource [Thread-118] HikariPool-30 - Shutdown completed.
2024-01-19 11:09:31,295 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:09:31,296 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:09:31,405 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:09:31,405 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 0 ms. Found 0 JPA repository interfaces.
2024-01-19 11:09:31,437 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:09:31,438 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:09:31,464 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:09:31,465 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:09:31,465 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:09:31,465 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:09:31,488 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:09:31,488 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 191 ms
2024-01-19 11:09:31,503 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-31 - Starting...
2024-01-19 11:09:31,524 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-31 - Added connection org.postgresql.jdbc.PgConnection@1fbf704d
2024-01-19 11:09:31,524 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-31 - Start completed.
2024-01-19 11:09:31,531 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:09:31,544 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:09:31,554 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:09:31,554 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:09:31,554 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:09:31,554 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:09:31,554 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:09:31,554 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:09:31,554 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:09:31,564 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:09:31,565 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:09:31,575 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:09:31,577 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:09:31,580 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:09:31,581 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:09:31,588 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:09:31,588 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:09:31,614 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:09:31,689 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:09:31,694 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3130280, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@652a3ac3, org.springframework.security.web.context.SecurityContextHolderFilter@401ce8f7, org.springframework.security.web.header.HeaderWriterFilter@15d07152, org.springframework.web.filter.CorsFilter@ac00a0, org.springframework.security.web.csrf.CsrfFilter@6527736d, org.springframework.security.web.authentication.logout.LogoutFilter@720921, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@f247452, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1e7e4782, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3142abec, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2c066203, org.springframework.security.web.access.ExceptionTranslationFilter@7b504cd, org.springframework.security.web.access.intercept.AuthorizationFilter@1f8f5d83]
2024-01-19 11:09:31,708 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:09:31,718 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:09:31,724 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:09:31,727 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.449 seconds (process running for 3897.5)
2024-01-19 11:09:31,728 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:13:00,992 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2024-01-19 11:13:00,994 INFO o.a.j.l.DirectJDKLog [Thread-122] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:13:01,005 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-122] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:13:01,005 INFO c.z.h.HikariDataSource [Thread-122] HikariPool-31 - Shutdown initiated...
2024-01-19 11:13:01,008 INFO c.z.h.HikariDataSource [Thread-122] HikariPool-31 - Shutdown completed.
2024-01-19 11:13:01,070 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:13:01,070 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:13:01,188 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:13:01,189 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 0 ms. Found 0 JPA repository interfaces.
2024-01-19 11:13:01,222 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:13:01,223 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:13:01,252 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:13:01,252 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:13:01,252 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:13:01,252 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:13:01,276 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:13:01,276 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 204 ms
2024-01-19 11:13:01,292 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-32 - Starting...
2024-01-19 11:13:01,322 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-32 - Added connection org.postgresql.jdbc.PgConnection@4416e131
2024-01-19 11:13:01,322 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-32 - Start completed.
2024-01-19 11:13:01,328 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:13:01,341 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:13:01,352 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:13:01,353 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:13:01,353 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:13:01,353 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:13:01,353 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:13:01,353 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:13:01,353 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:13:01,361 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:13:01,362 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:13:01,370 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:13:01,372 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:13:01,375 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:13:01,375 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:13:01,383 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:13:01,383 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:13:01,406 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:13:01,486 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:13:01,491 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7a0f63dd, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5ddb48fd, org.springframework.security.web.context.SecurityContextHolderFilter@5528fc2c, org.springframework.security.web.header.HeaderWriterFilter@c3b311a, org.springframework.web.filter.CorsFilter@687bf290, org.springframework.security.web.csrf.CsrfFilter@3c540f2f, org.springframework.security.web.authentication.logout.LogoutFilter@47df7e9c, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@18258576, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4999bcd1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@62736b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5c41d4dc, org.springframework.security.web.access.ExceptionTranslationFilter@41d11c7d, org.springframework.security.web.access.intercept.AuthorizationFilter@24b224e2]
2024-01-19 11:13:01,504 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:13:01,511 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:13:01,518 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:13:01,521 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.468 seconds (process running for 4107.297)
2024-01-19 11:13:01,522 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:13:09,027 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2024-01-19 11:13:09,028 INFO o.a.j.l.DirectJDKLog [Thread-126] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:13:09,038 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-126] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:13:09,039 INFO c.z.h.HikariDataSource [Thread-126] HikariPool-32 - Shutdown initiated...
2024-01-19 11:13:09,041 INFO c.z.h.HikariDataSource [Thread-126] HikariPool-32 - Shutdown completed.
2024-01-19 11:13:09,101 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:13:09,101 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:13:09,214 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:13:09,215 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 0 ms. Found 0 JPA repository interfaces.
2024-01-19 11:13:09,246 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:13:09,247 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:13:09,272 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:13:09,273 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:13:09,273 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:13:09,273 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:13:09,297 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:13:09,297 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 195 ms
2024-01-19 11:13:09,311 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-33 - Starting...
2024-01-19 11:13:09,332 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-33 - Added connection org.postgresql.jdbc.PgConnection@61b8eb43
2024-01-19 11:13:09,333 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-33 - Start completed.
2024-01-19 11:13:09,339 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:13:09,352 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:13:09,363 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:13:09,363 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:13:09,363 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:13:09,363 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:13:09,363 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:13:09,363 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:13:09,363 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:13:09,374 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:13:09,375 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:13:09,384 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:13:09,386 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:13:09,388 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:13:09,389 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:13:09,397 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:13:09,397 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:13:09,422 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:13:09,496 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:13:09,501 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@30861e52, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@58daceac, org.springframework.security.web.context.SecurityContextHolderFilter@6f4c636c, org.springframework.security.web.header.HeaderWriterFilter@2a0dcacc, org.springframework.web.filter.CorsFilter@74c7afd5, org.springframework.security.web.csrf.CsrfFilter@3c4f9295, org.springframework.security.web.authentication.logout.LogoutFilter@6096d157, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@1e66ef82, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2f579f2a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@28d26ccd, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5df44430, org.springframework.security.web.access.ExceptionTranslationFilter@a61bc79, org.springframework.security.web.access.intercept.AuthorizationFilter@48ac83a9]
2024-01-19 11:13:09,513 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:13:09,521 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:13:09,528 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:13:09,532 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.451 seconds (process running for 4115.307)
2024-01-19 11:13:09,533 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:13:17,027 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2024-01-19 11:13:17,029 INFO o.a.j.l.DirectJDKLog [Thread-130] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:13:17,045 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-130] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:13:17,046 INFO c.z.h.HikariDataSource [Thread-130] HikariPool-33 - Shutdown initiated...
2024-01-19 11:13:17,051 INFO c.z.h.HikariDataSource [Thread-130] HikariPool-33 - Shutdown completed.
2024-01-19 11:13:17,144 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:13:17,144 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:13:17,347 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:13:17,348 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 0 ms. Found 0 JPA repository interfaces.
2024-01-19 11:13:17,396 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:13:17,397 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:13:17,435 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:13:17,436 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:13:17,436 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:13:17,436 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:13:17,470 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:13:17,470 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 324 ms
2024-01-19 11:13:17,490 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-34 - Starting...
2024-01-19 11:13:17,520 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-34 - Added connection org.postgresql.jdbc.PgConnection@276e58a9
2024-01-19 11:13:17,521 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-34 - Start completed.
2024-01-19 11:13:17,530 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:13:17,547 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:13:17,564 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:13:17,564 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:13:17,564 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:13:17,564 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:13:17,564 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:13:17,564 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:13:17,564 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:13:17,575 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:13:17,576 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:13:17,587 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:13:17,590 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:13:17,594 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:13:17,595 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:13:17,605 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:13:17,605 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:13:17,642 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:13:17,755 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:13:17,767 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3eec9499, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@528f13cb, org.springframework.security.web.context.SecurityContextHolderFilter@2ef62782, org.springframework.security.web.header.HeaderWriterFilter@6d8026e9, org.springframework.web.filter.CorsFilter@6147da16, org.springframework.security.web.csrf.CsrfFilter@3f854bcb, org.springframework.security.web.authentication.logout.LogoutFilter@9f1d4a8, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@406d406f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3bb8fa84, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7afffd01, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4b838069, org.springframework.security.web.access.ExceptionTranslationFilter@68b52674, org.springframework.security.web.access.intercept.AuthorizationFilter@473e98b4]
2024-01-19 11:13:17,788 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:13:17,801 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:13:17,821 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:13:17,827 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.707 seconds (process running for 4123.602)
2024-01-19 11:13:17,829 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:15:02,187 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2024-01-19 11:15:02,188 INFO o.a.j.l.DirectJDKLog [Thread-134] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:15:02,201 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-134] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:15:02,202 INFO c.z.h.HikariDataSource [Thread-134] HikariPool-34 - Shutdown initiated...
2024-01-19 11:15:02,203 INFO c.z.h.HikariDataSource [Thread-134] HikariPool-34 - Shutdown completed.
2024-01-19 11:15:02,265 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:15:02,265 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:15:02,387 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:15:02,388 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 0 ms. Found 0 JPA repository interfaces.
2024-01-19 11:15:02,420 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:15:02,421 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:15:02,454 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:15:02,454 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:15:02,454 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:15:02,454 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:15:02,478 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:15:02,478 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 212 ms
2024-01-19 11:15:02,494 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-35 - Starting...
2024-01-19 11:15:02,523 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-35 - Added connection org.postgresql.jdbc.PgConnection@2f9dc0a7
2024-01-19 11:15:02,523 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-35 - Start completed.
2024-01-19 11:15:02,530 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:15:02,544 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:15:02,554 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:15:02,554 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:15:02,554 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:15:02,554 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:15:02,554 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:15:02,554 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:15:02,554 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:15:02,567 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:15:02,568 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:15:02,576 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:15:02,579 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:15:02,581 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:15:02,582 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:15:02,589 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:15:02,590 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:15:02,614 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:15:02,699 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:15:02,705 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1c6aea0a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4302850b, org.springframework.security.web.context.SecurityContextHolderFilter@1ed1c41c, org.springframework.security.web.header.HeaderWriterFilter@1c1e75c, org.springframework.web.filter.CorsFilter@7c942b79, org.springframework.security.web.csrf.CsrfFilter@25c91895, org.springframework.security.web.authentication.logout.LogoutFilter@49ea6868, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@aa674df, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@73317ae3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@577e40d5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@452da8b8, org.springframework.security.web.access.ExceptionTranslationFilter@1d57379f, org.springframework.security.web.access.intercept.AuthorizationFilter@1095f78d]
2024-01-19 11:15:02,722 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:15:02,738 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:15:02,745 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:15:02,748 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.501 seconds (process running for 4228.524)
2024-01-19 11:15:02,749 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:15:28,010 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 22 class path changes (21 additions, 0 deletions, 1 modification)
2024-01-19 11:15:28,012 INFO o.a.j.l.DirectJDKLog [Thread-138] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:15:28,038 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-138] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:15:28,039 INFO c.z.h.HikariDataSource [Thread-138] HikariPool-35 - Shutdown initiated...
2024-01-19 11:15:28,044 INFO c.z.h.HikariDataSource [Thread-138] HikariPool-35 - Shutdown completed.
2024-01-19 11:15:28,162 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:15:28,163 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:15:28,516 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:15:28,535 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 18 ms. Found 1 JPA repository interface.
2024-01-19 11:15:28,612 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:15:28,613 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:15:28,668 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:15:28,668 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:15:28,668 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:15:28,668 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:15:28,715 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:15:28,715 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 551 ms
2024-01-19 11:15:28,746 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-36 - Starting...
2024-01-19 11:15:28,783 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-36 - Added connection org.postgresql.jdbc.PgConnection@18ae2c78
2024-01-19 11:15:28,783 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-36 - Start completed.
2024-01-19 11:15:28,796 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:15:28,825 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:15:28,847 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:15:28,847 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:15:28,847 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:15:28,847 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:15:28,847 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:15:28,847 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:15:28,848 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:15:28,940 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:15:28,943 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:15:28,960 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:15:28,964 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:15:28,970 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:15:28,971 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:15:29,007 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:15:29,047 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:15:29,107 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:15:29,114 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:15:29,200 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@79a27d5c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5e06374c, org.springframework.security.web.context.SecurityContextHolderFilter@3882e0fd, org.springframework.security.web.header.HeaderWriterFilter@ce21f7d, org.springframework.web.filter.CorsFilter@4e097874, org.springframework.security.web.csrf.CsrfFilter@2673e5ac, org.springframework.security.web.authentication.logout.LogoutFilter@316ae113, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@1f2665d2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2ad743b7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3652a867, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@622d8c92, org.springframework.security.web.session.SessionManagementFilter@1e52be8, org.springframework.security.web.access.ExceptionTranslationFilter@631e3b29, org.springframework.security.web.access.intercept.AuthorizationFilter@20243a3]
2024-01-19 11:15:29,341 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
2024-01-19 11:15:29,341 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:15:29,342 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-36 - Shutdown initiated...
2024-01-19 11:15:29,354 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-36 - Shutdown completed.
2024-01-19 11:15:29,355 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 11:15:29,363 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 11:15:29,366 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:967)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:107)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:124)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:258)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111)
	... 33 common frames omitted
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'slug' found for type 'Doctor'
	at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:90)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:443)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:419)
	at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:372)
	at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:354)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:332)
	at org.springframework.data.repository.query.parser.Part.<init>(Part.java:81)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:259)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:260)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:389)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:390)
	at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:103)
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:100)
	... 37 common frames omitted
2024-01-19 11:15:53,381 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:15:53,381 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:15:53,512 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:15:53,519 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 6 ms. Found 1 JPA repository interface.
2024-01-19 11:15:53,559 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:15:53,559 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:15:53,595 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:15:53,595 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:15:53,596 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:15:53,596 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:15:53,622 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:15:53,622 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 240 ms
2024-01-19 11:15:53,639 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-37 - Starting...
2024-01-19 11:15:53,671 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-37 - Added connection org.postgresql.jdbc.PgConnection@64a31cd0
2024-01-19 11:15:53,671 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-37 - Start completed.
2024-01-19 11:15:53,678 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:15:53,690 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:15:53,701 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:15:53,701 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:15:53,701 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:15:53,701 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:15:53,701 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:15:53,701 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:15:53,701 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:15:53,713 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:15:53,714 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:15:53,725 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:15:53,727 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:15:53,730 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:15:53,731 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:15:53,748 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:15:53,782 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:15:53,816 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:15:53,820 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:15:53,899 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@162b39ff, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a6f9513, org.springframework.security.web.context.SecurityContextHolderFilter@33b8ee21, org.springframework.security.web.header.HeaderWriterFilter@5f3d1e7a, org.springframework.web.filter.CorsFilter@78c9ec81, org.springframework.security.web.csrf.CsrfFilter@5f72f70b, org.springframework.security.web.authentication.logout.LogoutFilter@74eeeaf7, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@1591c0e8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@18985a17, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2f6159b0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6344e5f0, org.springframework.security.web.session.SessionManagementFilter@7b3a84e2, org.springframework.security.web.access.ExceptionTranslationFilter@8c479f8, org.springframework.security.web.access.intercept.AuthorizationFilter@bf52e39]
2024-01-19 11:15:54,012 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
2024-01-19 11:15:54,013 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:15:54,013 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-37 - Shutdown initiated...
2024-01-19 11:15:54,057 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-37 - Shutdown completed.
2024-01-19 11:15:54,057 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 11:15:54,063 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 11:15:54,065 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:967)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:107)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:124)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:258)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111)
	... 33 common frames omitted
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'slug' found for type 'Doctor'
	at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:90)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:443)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:419)
	at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:372)
	at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:354)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:332)
	at org.springframework.data.repository.query.parser.Part.<init>(Part.java:81)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:259)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:260)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:389)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:390)
	at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:103)
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:100)
	... 37 common frames omitted
2024-01-19 11:16:34,521 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.yaml.snakeyaml.scanner.ScannerException: while scanning a simple key
 in 'reader', line 51, column 1:
    resili
    ^
could not find expected ':'
 in 'reader', line 53, column 1:
    
    ^

	at org.yaml.snakeyaml.scanner.ScannerImpl.stalePossibleSimpleKeys(ScannerImpl.java:502)
	at org.yaml.snakeyaml.scanner.ScannerImpl.needMoreTokens(ScannerImpl.java:307)
	at org.yaml.snakeyaml.scanner.ScannerImpl.checkToken(ScannerImpl.java:237)
	at org.yaml.snakeyaml.parser.ParserImpl$ParseBlockMappingKey.produce(ParserImpl.java:637)
	at org.yaml.snakeyaml.parser.ParserImpl.peekEvent(ParserImpl.java:161)
	at org.yaml.snakeyaml.comments.CommentEventsCollector$1.peek(CommentEventsCollector.java:57)
	at org.yaml.snakeyaml.comments.CommentEventsCollector$1.peek(CommentEventsCollector.java:43)
	at org.yaml.snakeyaml.comments.CommentEventsCollector.collectEvents(CommentEventsCollector.java:136)
	at org.yaml.snakeyaml.comments.CommentEventsCollector.collectEvents(CommentEventsCollector.java:116)
	at org.yaml.snakeyaml.composer.Composer.composeScalarNode(Composer.java:241)
	at org.yaml.snakeyaml.composer.Composer.composeNode(Composer.java:205)
	at org.yaml.snakeyaml.composer.Composer.composeValueNode(Composer.java:369)
	at org.yaml.snakeyaml.composer.Composer.composeMappingChildren(Composer.java:348)
	at org.yaml.snakeyaml.composer.Composer.composeMappingNode(Composer.java:323)
	at org.yaml.snakeyaml.composer.Composer.composeNode(Composer.java:209)
	at org.yaml.snakeyaml.composer.Composer.composeValueNode(Composer.java:369)
	at org.yaml.snakeyaml.composer.Composer.composeMappingChildren(Composer.java:348)
	at org.yaml.snakeyaml.composer.Composer.composeMappingNode(Composer.java:323)
	at org.yaml.snakeyaml.composer.Composer.composeNode(Composer.java:209)
	at org.yaml.snakeyaml.composer.Composer.getNode(Composer.java:131)
	at org.yaml.snakeyaml.constructor.BaseConstructor.getData(BaseConstructor.java:162)
	at org.springframework.boot.env.OriginTrackedYamlLoader$OriginTrackingConstructor.getData(OriginTrackedYamlLoader.java:99)
	at org.yaml.snakeyaml.Yaml$1.next(Yaml.java:515)
	at org.springframework.beans.factory.config.YamlProcessor.process(YamlProcessor.java:203)
	at org.springframework.beans.factory.config.YamlProcessor.process(YamlProcessor.java:169)
	at org.springframework.boot.env.OriginTrackedYamlLoader.load(OriginTrackedYamlLoader.java:84)
	at org.springframework.boot.env.YamlPropertySourceLoader.load(YamlPropertySourceLoader.java:50)
	at org.springframework.boot.context.config.StandardConfigDataLoader.load(StandardConfigDataLoader.java:54)
	at org.springframework.boot.context.config.StandardConfigDataLoader.load(StandardConfigDataLoader.java:36)
	at org.springframework.boot.context.config.ConfigDataLoaders.load(ConfigDataLoaders.java:96)
	at org.springframework.boot.context.config.ConfigDataImporter.load(ConfigDataImporter.java:132)
	at org.springframework.boot.context.config.ConfigDataImporter.resolveAndLoad(ConfigDataImporter.java:87)
	at org.springframework.boot.context.config.ConfigDataEnvironmentContributors.withProcessedImports(ConfigDataEnvironmentContributors.java:115)
	at org.springframework.boot.context.config.ConfigDataEnvironment.processInitial(ConfigDataEnvironment.java:242)
	at org.springframework.boot.context.config.ConfigDataEnvironment.processAndApply(ConfigDataEnvironment.java:229)
	at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:96)
	at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:89)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:109)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:94)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:137)
	at org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)
	at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)
	at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:366)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
2024-01-19 11:16:40,050 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.yaml.snakeyaml.scanner.ScannerException: while scanning a simple key
 in 'reader', line 51, column 1:
    resili
    ^
could not find expected ':'
 in 'reader', line 53, column 1:
    
    ^

	at org.yaml.snakeyaml.scanner.ScannerImpl.stalePossibleSimpleKeys(ScannerImpl.java:502)
	at org.yaml.snakeyaml.scanner.ScannerImpl.needMoreTokens(ScannerImpl.java:307)
	at org.yaml.snakeyaml.scanner.ScannerImpl.checkToken(ScannerImpl.java:237)
	at org.yaml.snakeyaml.parser.ParserImpl$ParseBlockMappingKey.produce(ParserImpl.java:637)
	at org.yaml.snakeyaml.parser.ParserImpl.peekEvent(ParserImpl.java:161)
	at org.yaml.snakeyaml.comments.CommentEventsCollector$1.peek(CommentEventsCollector.java:57)
	at org.yaml.snakeyaml.comments.CommentEventsCollector$1.peek(CommentEventsCollector.java:43)
	at org.yaml.snakeyaml.comments.CommentEventsCollector.collectEvents(CommentEventsCollector.java:136)
	at org.yaml.snakeyaml.comments.CommentEventsCollector.collectEvents(CommentEventsCollector.java:116)
	at org.yaml.snakeyaml.composer.Composer.composeScalarNode(Composer.java:241)
	at org.yaml.snakeyaml.composer.Composer.composeNode(Composer.java:205)
	at org.yaml.snakeyaml.composer.Composer.composeValueNode(Composer.java:369)
	at org.yaml.snakeyaml.composer.Composer.composeMappingChildren(Composer.java:348)
	at org.yaml.snakeyaml.composer.Composer.composeMappingNode(Composer.java:323)
	at org.yaml.snakeyaml.composer.Composer.composeNode(Composer.java:209)
	at org.yaml.snakeyaml.composer.Composer.composeValueNode(Composer.java:369)
	at org.yaml.snakeyaml.composer.Composer.composeMappingChildren(Composer.java:348)
	at org.yaml.snakeyaml.composer.Composer.composeMappingNode(Composer.java:323)
	at org.yaml.snakeyaml.composer.Composer.composeNode(Composer.java:209)
	at org.yaml.snakeyaml.composer.Composer.getNode(Composer.java:131)
	at org.yaml.snakeyaml.constructor.BaseConstructor.getData(BaseConstructor.java:162)
	at org.springframework.boot.env.OriginTrackedYamlLoader$OriginTrackingConstructor.getData(OriginTrackedYamlLoader.java:99)
	at org.yaml.snakeyaml.Yaml$1.next(Yaml.java:515)
	at org.springframework.beans.factory.config.YamlProcessor.process(YamlProcessor.java:203)
	at org.springframework.beans.factory.config.YamlProcessor.process(YamlProcessor.java:169)
	at org.springframework.boot.env.OriginTrackedYamlLoader.load(OriginTrackedYamlLoader.java:84)
	at org.springframework.boot.env.YamlPropertySourceLoader.load(YamlPropertySourceLoader.java:50)
	at org.springframework.boot.context.config.StandardConfigDataLoader.load(StandardConfigDataLoader.java:54)
	at org.springframework.boot.context.config.StandardConfigDataLoader.load(StandardConfigDataLoader.java:36)
	at org.springframework.boot.context.config.ConfigDataLoaders.load(ConfigDataLoaders.java:96)
	at org.springframework.boot.context.config.ConfigDataImporter.load(ConfigDataImporter.java:132)
	at org.springframework.boot.context.config.ConfigDataImporter.resolveAndLoad(ConfigDataImporter.java:87)
	at org.springframework.boot.context.config.ConfigDataEnvironmentContributors.withProcessedImports(ConfigDataEnvironmentContributors.java:115)
	at org.springframework.boot.context.config.ConfigDataEnvironment.processInitial(ConfigDataEnvironment.java:242)
	at org.springframework.boot.context.config.ConfigDataEnvironment.processAndApply(ConfigDataEnvironment.java:229)
	at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:96)
	at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:89)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:109)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:94)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:171)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:149)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:137)
	at org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)
	at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)
	at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:366)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
2024-01-19 11:16:51,725 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:16:51,726 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:16:51,892 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:16:51,902 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 8 ms. Found 1 JPA repository interface.
2024-01-19 11:16:51,946 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:16:51,947 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:16:51,981 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:16:51,982 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:16:51,982 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:16:51,982 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:16:52,014 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:16:52,014 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 287 ms
2024-01-19 11:16:52,040 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-38 - Starting...
2024-01-19 11:16:52,081 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-38 - Added connection org.postgresql.jdbc.PgConnection@7f5c2d8c
2024-01-19 11:16:52,081 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-38 - Start completed.
2024-01-19 11:16:52,092 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:16:52,109 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:16:52,123 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:16:52,123 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:16:52,123 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:16:52,123 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:16:52,123 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:16:52,123 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:16:52,123 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:16:52,133 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:16:52,134 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:16:52,147 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:16:52,154 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:16:52,158 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:16:52,159 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:16:52,179 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:16:52,212 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:16:52,252 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:16:52,257 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:16:52,313 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@437e1ac4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5b5cdd9e, org.springframework.security.web.context.SecurityContextHolderFilter@49baa914, org.springframework.security.web.header.HeaderWriterFilter@2d021b03, org.springframework.web.filter.CorsFilter@50ba5c23, org.springframework.security.web.csrf.CsrfFilter@767964cf, org.springframework.security.web.authentication.logout.LogoutFilter@2b81e115, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@6753d672, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3941bc81, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@42672a9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@29a3e000, org.springframework.security.web.session.SessionManagementFilter@7458f44c, org.springframework.security.web.access.ExceptionTranslationFilter@45f6bfb5, org.springframework.security.web.access.intercept.AuthorizationFilter@28146f31]
2024-01-19 11:16:52,456 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
2024-01-19 11:16:52,457 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:16:52,457 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-38 - Shutdown initiated...
2024-01-19 11:16:52,465 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-38 - Shutdown completed.
2024-01-19 11:16:52,466 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 11:16:52,471 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 11:16:52,473 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:967)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:107)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:124)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:258)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111)
	... 33 common frames omitted
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'slug' found for type 'Doctor'
	at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:90)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:443)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:419)
	at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:372)
	at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:354)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:332)
	at org.springframework.data.repository.query.parser.Part.<init>(Part.java:81)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:259)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:260)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:389)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:390)
	at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:103)
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:100)
	... 37 common frames omitted
2024-01-19 11:18:02,553 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:18:02,553 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:18:02,770 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:18:02,784 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 13 ms. Found 1 JPA repository interface.
2024-01-19 11:18:02,876 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:18:02,877 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:18:02,937 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:18:02,938 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:18:02,938 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:18:02,938 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:18:02,981 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:18:02,982 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 428 ms
2024-01-19 11:18:03,015 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-39 - Starting...
2024-01-19 11:18:03,061 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-39 - Added connection org.postgresql.jdbc.PgConnection@6ffe0981
2024-01-19 11:18:03,061 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-39 - Start completed.
2024-01-19 11:18:03,072 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:18:03,092 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:18:03,109 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:18:03,109 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:18:03,109 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:18:03,109 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:18:03,110 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:18:03,110 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:18:03,110 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:18:03,120 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:18:03,122 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:18:03,140 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:18:03,144 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:18:03,150 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:18:03,151 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:18:03,177 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:18:03,212 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:18:03,278 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:18:03,294 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:18:03,374 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4700f1c0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4235f108, org.springframework.security.web.context.SecurityContextHolderFilter@564a175, org.springframework.security.web.header.HeaderWriterFilter@221e8e8b, org.springframework.web.filter.CorsFilter@1a5af582, org.springframework.security.web.csrf.CsrfFilter@592754e4, org.springframework.security.web.authentication.logout.LogoutFilter@2fc0ad8c, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@6d069d21, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@521535f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@531dffa6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@43ec8c7d, org.springframework.security.web.session.SessionManagementFilter@66874935, org.springframework.security.web.access.ExceptionTranslationFilter@653caf21, org.springframework.security.web.access.intercept.AuthorizationFilter@1c2883f7]
2024-01-19 11:18:03,506 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
2024-01-19 11:18:03,506 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:18:03,506 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-39 - Shutdown initiated...
2024-01-19 11:18:03,510 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-39 - Shutdown completed.
2024-01-19 11:18:03,511 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 11:18:03,519 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 11:18:03,521 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:967)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:107)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:124)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:258)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111)
	... 33 common frames omitted
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'slug' found for type 'Doctor'
	at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:90)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:443)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:419)
	at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:372)
	at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:354)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:332)
	at org.springframework.data.repository.query.parser.Part.<init>(Part.java:81)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:259)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:260)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:389)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:390)
	at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:103)
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:100)
	... 37 common frames omitted
2024-01-19 11:19:13,847 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:19:13,847 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:19:13,983 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:19:13,992 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 8 ms. Found 1 JPA repository interface.
2024-01-19 11:19:14,032 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:19:14,032 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:19:14,061 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:19:14,061 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:19:14,061 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:19:14,061 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:19:14,084 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:19:14,084 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 236 ms
2024-01-19 11:19:14,102 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-40 - Starting...
2024-01-19 11:19:14,132 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-40 - Added connection org.postgresql.jdbc.PgConnection@2c0558f5
2024-01-19 11:19:14,132 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-40 - Start completed.
2024-01-19 11:19:14,139 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:19:14,152 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:19:14,164 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:19:14,165 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:19:14,165 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:19:14,165 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:19:14,165 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:19:14,165 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:19:14,165 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:19:14,172 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:19:14,173 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:19:14,185 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:19:14,187 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:19:14,193 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:19:14,194 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:19:14,210 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:19:14,243 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:19:14,277 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:19:14,283 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:19:14,334 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@12985e2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@38109a2c, org.springframework.security.web.context.SecurityContextHolderFilter@510d0993, org.springframework.security.web.header.HeaderWriterFilter@63308ab8, org.springframework.web.filter.CorsFilter@39e6672d, org.springframework.security.web.csrf.CsrfFilter@500bbf16, org.springframework.security.web.authentication.logout.LogoutFilter@88199d1, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@562cb8e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@153ba1a4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@72b98cf1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2a4bf524, org.springframework.security.web.session.SessionManagementFilter@5cf3ee14, org.springframework.security.web.access.ExceptionTranslationFilter@4370f056, org.springframework.security.web.access.intercept.AuthorizationFilter@7e9fed1e]
2024-01-19 11:19:14,393 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
2024-01-19 11:19:14,393 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:19:14,394 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-40 - Shutdown initiated...
2024-01-19 11:19:14,414 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-40 - Shutdown completed.
2024-01-19 11:19:14,414 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 11:19:14,418 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 11:19:14,419 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:967)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:107)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:124)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:258)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111)
	... 33 common frames omitted
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'slug' found for type 'Doctor'
	at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:90)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:443)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:419)
	at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:372)
	at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:354)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:332)
	at org.springframework.data.repository.query.parser.Part.<init>(Part.java:81)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:259)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:260)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:389)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:390)
	at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:103)
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:100)
	... 37 common frames omitted
2024-01-19 11:19:16,912 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:19:16,913 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:19:17,051 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:19:17,058 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 7 ms. Found 1 JPA repository interface.
2024-01-19 11:19:17,094 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:19:17,095 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:19:17,119 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:19:17,119 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:19:17,119 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:19:17,119 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:19:17,143 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:19:17,143 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 229 ms
2024-01-19 11:19:17,158 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-41 - Starting...
2024-01-19 11:19:17,179 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-41 - Added connection org.postgresql.jdbc.PgConnection@48086010
2024-01-19 11:19:17,179 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-41 - Start completed.
2024-01-19 11:19:17,185 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:19:17,197 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:19:17,208 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:19:17,208 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:19:17,208 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:19:17,208 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:19:17,208 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:19:17,208 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:19:17,208 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:19:17,217 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:19:17,218 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:19:17,228 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:19:17,230 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:19:17,232 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:19:17,233 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:19:17,248 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:19:17,276 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:19:17,304 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:19:17,308 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:19:17,344 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1b4bd54f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@69da5f98, org.springframework.security.web.context.SecurityContextHolderFilter@2ff43a9f, org.springframework.security.web.header.HeaderWriterFilter@6da32283, org.springframework.web.filter.CorsFilter@5cf097cc, org.springframework.security.web.csrf.CsrfFilter@3bc91ead, org.springframework.security.web.authentication.logout.LogoutFilter@a3bda40, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@4ff6ff2b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@77b4bd0e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3f72e41, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@248724de, org.springframework.security.web.session.SessionManagementFilter@5c3b6bc3, org.springframework.security.web.access.ExceptionTranslationFilter@50bb275, org.springframework.security.web.access.intercept.AuthorizationFilter@620ae2a5]
2024-01-19 11:19:17,402 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
2024-01-19 11:19:17,402 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:19:17,403 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-41 - Shutdown initiated...
2024-01-19 11:19:17,425 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-41 - Shutdown completed.
2024-01-19 11:19:17,425 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 11:19:17,429 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 11:19:17,431 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:967)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:107)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:124)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:258)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111)
	... 33 common frames omitted
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'slug' found for type 'Doctor'
	at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:90)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:443)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:419)
	at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:372)
	at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:354)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:332)
	at org.springframework.data.repository.query.parser.Part.<init>(Part.java:81)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:259)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:260)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:389)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:390)
	at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:103)
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:100)
	... 37 common frames omitted
2024-01-19 11:21:17,750 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 10592 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:21:17,750 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:21:17,873 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:21:17,881 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 7 ms. Found 1 JPA repository interface.
2024-01-19 11:21:17,918 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:21:17,919 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:21:17,949 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:21:17,949 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:21:17,949 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:21:17,949 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:21:17,972 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:21:17,972 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 221 ms
2024-01-19 11:21:17,987 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-42 - Starting...
2024-01-19 11:21:18,015 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-42 - Added connection org.postgresql.jdbc.PgConnection@4e103fe4
2024-01-19 11:21:18,015 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-42 - Start completed.
2024-01-19 11:21:18,022 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:21:18,034 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:21:18,045 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:21:18,045 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:21:18,045 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:21:18,046 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:21:18,046 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:21:18,046 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:21:18,046 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:21:18,051 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:21:18,053 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:21:18,062 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:21:18,064 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:21:18,067 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:21:18,068 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:21:18,083 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:21:18,113 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:21:18,144 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:21:18,148 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:21:18,187 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2e410c5c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@24334ff8, org.springframework.security.web.context.SecurityContextHolderFilter@273f644b, org.springframework.security.web.header.HeaderWriterFilter@4319d33, org.springframework.web.filter.CorsFilter@6295a908, org.springframework.security.web.csrf.CsrfFilter@37f05696, org.springframework.security.web.authentication.logout.LogoutFilter@7585264d, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@72aaeb0a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@459d7788, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4dcdb20d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@47c2eceb, org.springframework.security.web.session.SessionManagementFilter@12ced462, org.springframework.security.web.access.ExceptionTranslationFilter@3c3bcf73, org.springframework.security.web.access.intercept.AuthorizationFilter@7bf7b2e4]
2024-01-19 11:21:18,250 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
2024-01-19 11:21:18,250 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:21:18,251 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-42 - Shutdown initiated...
2024-01-19 11:21:18,274 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-42 - Shutdown completed.
2024-01-19 11:21:18,275 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 11:21:18,279 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 11:21:18,281 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:967)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:107)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:124)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:258)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111)
	... 33 common frames omitted
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'slug' found for type 'Doctor'
	at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:90)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:443)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:419)
	at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:372)
	at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:354)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:332)
	at org.springframework.data.repository.query.parser.Part.<init>(Part.java:81)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:259)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:260)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:389)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:390)
	at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:103)
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:100)
	... 37 common frames omitted
2024-01-19 11:29:32,858 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 4996 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:29:32,859 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:29:32,891 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 11:29:32,892 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 11:29:33,462 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:29:33,547 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 81 ms. Found 1 JPA repository interface.
2024-01-19 11:29:33,765 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:29:33,789 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:29:33,996 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:29:34,004 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:29:34,005 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:29:34,006 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:29:34,060 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:29:34,061 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1168 ms
2024-01-19 11:29:34,159 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 11:29:34,286 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@23d92a36
2024-01-19 11:29:34,287 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 11:29:34,391 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:29:34,544 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:29:34,578 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:29:34,595 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:29:34,595 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:29:34,595 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:29:34,595 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:29:34,595 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:29:34,595 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:29:34,595 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:29:34,616 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:29:34,617 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:29:34,678 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:29:34,729 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 11:29:34,764 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:29:34,949 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:29:34,987 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:29:35,637 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:29:35,691 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:29:36,109 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:29:36,122 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:29:36,359 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2fd23d56, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7ec3f049, org.springframework.security.web.context.SecurityContextHolderFilter@647a81e7, org.springframework.security.web.header.HeaderWriterFilter@780e0261, org.springframework.web.filter.CorsFilter@11994f2a, org.springframework.security.web.csrf.CsrfFilter@7e4b6346, org.springframework.security.web.authentication.logout.LogoutFilter@4159963d, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@81ce52e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2133c345, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@63ad165, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7aa12fb9, org.springframework.security.web.session.SessionManagementFilter@1a73bfe4, org.springframework.security.web.access.ExceptionTranslationFilter@5df93450, org.springframework.security.web.access.intercept.AuthorizationFilter@7b40316f]
2024-01-19 11:29:36,753 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
2024-01-19 11:29:36,757 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:29:36,760 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-19 11:29:36,763 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-19 11:29:36,765 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 11:29:36,775 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 11:29:36,791 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'doctorRepository' defined in com.medico.app.repository.DoctorRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:967)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); Reason: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.Optional com.medico.app.repository.DoctorRepository.findBySlug(java.lang.String); No property 'slug' found for type 'Doctor'
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:107)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:124)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:258)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111)
	... 33 common frames omitted
Caused by: org.springframework.data.mapping.PropertyReferenceException: No property 'slug' found for type 'Doctor'
	at org.springframework.data.mapping.PropertyPath.<init>(PropertyPath.java:90)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:443)
	at org.springframework.data.mapping.PropertyPath.create(PropertyPath.java:419)
	at org.springframework.data.mapping.PropertyPath.lambda$from$0(PropertyPath.java:372)
	at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:354)
	at org.springframework.data.mapping.PropertyPath.from(PropertyPath.java:332)
	at org.springframework.data.repository.query.parser.Part.<init>(Part.java:81)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.lambda$new$0(PartTree.java:259)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$OrPart.<init>(PartTree.java:260)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.lambda$new$0(PartTree.java:389)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:992)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682)
	at org.springframework.data.repository.query.parser.PartTree$Predicate.<init>(PartTree.java:390)
	at org.springframework.data.repository.query.parser.PartTree.<init>(PartTree.java:103)
	at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:100)
	... 37 common frames omitted
2024-01-19 11:31:20,101 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 15908 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:31:20,104 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:31:20,135 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 11:31:20,136 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 11:31:20,715 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:31:20,800 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 80 ms. Found 1 JPA repository interface.
2024-01-19 11:31:21,010 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:31:21,026 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:31:21,210 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:31:21,215 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:31:21,217 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:31:21,217 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:31:21,268 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:31:21,268 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1132 ms
2024-01-19 11:31:21,361 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 11:31:21,465 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3993f5e6
2024-01-19 11:31:21,467 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 11:31:21,559 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:31:21,678 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:31:21,711 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:31:21,729 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:31:21,729 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:31:21,729 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:31:21,729 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:31:21,729 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:31:21,729 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:31:21,729 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:31:21,751 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:31:21,754 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:31:21,804 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:31:21,845 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 11:31:21,868 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:31:22,017 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:31:22,044 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:31:22,541 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:31:22,585 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:31:22,909 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:31:22,919 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:31:23,096 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@77f97927, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@15c139f6, org.springframework.security.web.context.SecurityContextHolderFilter@2011620e, org.springframework.security.web.header.HeaderWriterFilter@70630017, org.springframework.web.filter.CorsFilter@234dcb08, org.springframework.security.web.csrf.CsrfFilter@3a3e7a2d, org.springframework.security.web.authentication.logout.LogoutFilter@17ea5f9d, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@636aba1c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@687e5059, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@669f3651, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6cdc0da7, org.springframework.security.web.session.SessionManagementFilter@15141a3c, org.springframework.security.web.access.ExceptionTranslationFilter@3f3597fd, org.springframework.security.web.access.intercept.AuthorizationFilter@171c2670]
2024-01-19 11:31:23,525 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:31:23,564 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:31:23,581 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:31:23,588 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 3.738 seconds (process running for 4.819)
2024-01-19 11:31:29,810 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 11:31:29,810 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-2] Initializing Servlet 'dispatcherServlet'
2024-01-19 11:31:29,811 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-2] Completed initialization in 1 ms
2024-01-19 11:31:29,815 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Securing GET /test/user
2024-01-19 11:31:29,818 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-2] Cache miss for REQUEST dispatch to '/api/test/user' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:31:29,911 DEBUG o.s.s.o.j.JwtTimestampValidator [http-nio-8090-exec-2] Jwt expired at 2024-01-19T08:38:59Z
2024-01-19 11:31:29,912 DEBUG o.s.s.o.s.r.a.JwtAuthenticationProvider [http-nio-8090-exec-2] Failed to authenticate since the JWT was invalid
2024-01-19 11:31:41,345 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-9] Securing GET /test/anonymous
2024-01-19 11:31:41,348 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-9] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:31:41,349 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-9] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:31:41,352 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-9] Secured GET /test/anonymous
2024-01-19 11:32:14,360 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:32:14,362 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 11:32:14,366 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 11:32:20,762 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 17876 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:32:20,766 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:32:20,799 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 11:32:20,800 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 11:32:21,400 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:32:21,490 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 84 ms. Found 1 JPA repository interface.
2024-01-19 11:32:21,729 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:32:21,748 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:32:21,972 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:32:21,980 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:32:21,981 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:32:21,982 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:32:22,045 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:32:22,045 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1245 ms
2024-01-19 11:32:22,160 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 11:32:22,283 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@533637f3
2024-01-19 11:32:22,284 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 11:32:22,383 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:32:22,528 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:32:22,568 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:32:22,586 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:32:22,587 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:32:22,588 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:32:22,588 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:32:22,588 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:32:22,588 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:32:22,588 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:32:22,615 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:32:22,617 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:32:22,678 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:32:22,735 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 11:32:22,775 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:32:22,977 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:32:23,011 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:32:23,569 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:32:23,629 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:32:23,995 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:32:24,012 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:32:24,305 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@499d9987, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@398614f9, org.springframework.security.web.context.SecurityContextHolderFilter@758ec214, org.springframework.security.web.header.HeaderWriterFilter@4ec23785, org.springframework.web.filter.CorsFilter@6f3b4b56, org.springframework.security.web.csrf.CsrfFilter@2726096d, org.springframework.security.web.authentication.logout.LogoutFilter@5a9e9424, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@64f653ac, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@9b42fd1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4388c9e7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@733cfed4, org.springframework.security.web.session.SessionManagementFilter@424905b3, org.springframework.security.web.access.ExceptionTranslationFilter@4a114905, org.springframework.security.web.access.intercept.AuthorizationFilter@158ad05b]
2024-01-19 11:32:24,877 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:32:24,910 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:32:24,930 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:32:24,938 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 4.431 seconds (process running for 5.58)
2024-01-19 11:32:25,260 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 11:32:25,261 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-1] Initializing Servlet 'dispatcherServlet'
2024-01-19 11:32:25,262 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-1] Completed initialization in 1 ms
2024-01-19 11:32:25,267 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-1] Securing GET /test/anonymous
2024-01-19 11:32:25,271 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-1] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:32:25,281 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-1] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:32:25,282 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-1] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:32:25,287 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-1] Secured GET /test/anonymous
2024-01-19 11:32:25,299 WARN c.m.a.e.GlobalExceptionHandler [http-nio-8090-exec-1] gggggg
java.lang.RuntimeException: gggggg
	at com.medico.app.controller.CustomerController.getAnonymous(CustomerController.java:21)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:128)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
2024-01-19 11:32:25,375 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-1] Resolved [java.lang.RuntimeException: gggggg]
2024-01-19 11:32:27,618 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-9] Securing GET /test/anonymous
2024-01-19 11:32:27,618 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-9] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:32:27,620 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-9] Secured GET /test/anonymous
2024-01-19 11:32:27,620 WARN c.m.a.e.GlobalExceptionHandler [http-nio-8090-exec-9] gggggg
java.lang.RuntimeException: gggggg
	at com.medico.app.controller.CustomerController.getAnonymous(CustomerController.java:21)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:128)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
2024-01-19 11:32:27,622 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-9] Resolved [java.lang.RuntimeException: gggggg]
2024-01-19 11:35:12,488 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:35:12,490 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 11:35:12,493 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 11:35:46,876 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 24540 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:35:46,878 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:35:46,910 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 11:35:46,910 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 11:35:47,511 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:35:47,592 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 76 ms. Found 1 JPA repository interface.
2024-01-19 11:35:47,813 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:35:47,833 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:35:48,081 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:35:48,086 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:35:48,088 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:35:48,088 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:35:48,138 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:35:48,139 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1229 ms
2024-01-19 11:35:48,255 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 11:35:48,378 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3993f5e6
2024-01-19 11:35:48,380 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 11:35:48,489 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:35:48,620 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:35:48,650 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:35:48,666 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:35:48,666 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:35:48,666 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:35:48,666 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:35:48,667 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:35:48,667 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:35:48,667 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:35:48,695 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:35:48,698 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:35:48,748 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:35:48,789 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 11:35:48,811 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:35:48,954 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:35:48,978 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:35:49,473 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:35:49,535 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:35:49,847 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:35:49,857 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:35:50,048 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@77f97927, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@15c139f6, org.springframework.security.web.context.SecurityContextHolderFilter@2011620e, org.springframework.security.web.header.HeaderWriterFilter@70630017, org.springframework.web.filter.CorsFilter@234dcb08, org.springframework.security.web.csrf.CsrfFilter@3a3e7a2d, org.springframework.security.web.authentication.logout.LogoutFilter@17ea5f9d, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@636aba1c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@687e5059, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@669f3651, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6cdc0da7, org.springframework.security.web.session.SessionManagementFilter@15141a3c, org.springframework.security.web.access.ExceptionTranslationFilter@3f3597fd, org.springframework.security.web.access.intercept.AuthorizationFilter@171c2670]
2024-01-19 11:35:50,499 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:35:50,526 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:35:50,542 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:35:50,548 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 3.909 seconds (process running for 4.993)
2024-01-19 11:36:04,203 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-8] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 11:36:04,204 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-8] Initializing Servlet 'dispatcherServlet'
2024-01-19 11:36:04,205 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-8] Completed initialization in 1 ms
2024-01-19 11:36:04,210 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-8] Securing GET /test/anonymous
2024-01-19 11:36:04,213 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-8] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:36:04,222 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-8] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:36:04,222 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-8] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:36:04,225 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-8] Secured GET /test/anonymous
2024-01-19 11:36:04,235 WARN c.m.a.e.GlobalExceptionHandler [http-nio-8090-exec-8] gggggg
java.lang.RuntimeException: gggggg
	at com.medico.app.controller.CustomerController.getAnonymous(CustomerController.java:21)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:128)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
2024-01-19 11:36:04,287 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-8] Resolved [java.lang.RuntimeException: gggggg]
2024-01-19 11:36:47,853 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Securing GET /test/anonymous
2024-01-19 11:36:47,854 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-4] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:36:47,856 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Secured GET /test/anonymous
2024-01-19 11:36:47,857 WARN c.m.a.e.GlobalExceptionHandler [http-nio-8090-exec-4] gggggg
java.lang.RuntimeException: gggggg
	at com.medico.app.controller.CustomerController.getAnonymous(CustomerController.java:21)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:128)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
2024-01-19 11:36:47,858 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-4] Resolved [java.lang.RuntimeException: gggggg]
2024-01-19 11:37:19,839 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:37:19,841 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 11:37:19,844 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 11:37:26,069 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 3660 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:37:26,071 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:37:26,103 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 11:37:26,103 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 11:37:26,687 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:37:26,779 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 87 ms. Found 1 JPA repository interface.
2024-01-19 11:37:26,994 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:37:27,008 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:37:27,200 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:37:27,206 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:37:27,208 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:37:27,209 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:37:27,260 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:37:27,260 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1156 ms
2024-01-19 11:37:27,354 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 11:37:27,458 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4096ed11
2024-01-19 11:37:27,459 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 11:37:27,548 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:37:27,679 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:37:27,711 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:37:27,728 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:37:27,728 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:37:27,728 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:37:27,728 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:37:27,728 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:37:27,728 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:37:27,728 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:37:27,749 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:37:27,752 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:37:27,828 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:37:27,880 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 11:37:27,924 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:37:28,113 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:37:28,149 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:37:28,724 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:37:28,785 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:37:29,202 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:37:29,217 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:37:29,574 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@20743998, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@423bb542, org.springframework.security.web.context.SecurityContextHolderFilter@7e306e2b, org.springframework.security.web.header.HeaderWriterFilter@390a7b47, org.springframework.web.filter.CorsFilter@559af4e0, org.springframework.security.web.csrf.CsrfFilter@b3607b9, org.springframework.security.web.authentication.logout.LogoutFilter@3cee72dc, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@424aaf9a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@18679d75, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@28b8589d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4f12b92a, org.springframework.security.web.session.SessionManagementFilter@4ec23785, org.springframework.security.web.access.ExceptionTranslationFilter@13c8a096, org.springframework.security.web.access.intercept.AuthorizationFilter@7d970929]
2024-01-19 11:37:30,284 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:37:30,326 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:37:30,352 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:37:30,362 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 4.542 seconds (process running for 5.64)
2024-01-19 11:37:30,452 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 11:37:30,452 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-1] Initializing Servlet 'dispatcherServlet'
2024-01-19 11:37:30,454 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-1] Completed initialization in 1 ms
2024-01-19 11:37:30,459 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-1] Securing GET /test/anonymous
2024-01-19 11:37:30,463 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-1] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:37:30,474 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-1] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:37:30,475 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-1] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:37:30,480 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-1] Secured GET /test/anonymous
2024-01-19 11:37:30,495 INFO c.m.a.e.GlobalExceptionHandler [http-nio-8090-exec-1] null
com.medico.app.exeption.RootException: null
	at com.medico.app.controller.CustomerController.getAnonymous(CustomerController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:128)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
2024-01-19 11:37:30,570 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-1] Resolved [com.medico.app.exeption.RootException]
2024-01-19 11:37:32,193 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Securing GET /test/anonymous
2024-01-19 11:37:32,193 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:37:32,195 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Secured GET /test/anonymous
2024-01-19 11:37:32,196 INFO c.m.a.e.GlobalExceptionHandler [http-nio-8090-exec-2] null
com.medico.app.exeption.RootException: null
	at com.medico.app.controller.CustomerController.getAnonymous(CustomerController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:128)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
2024-01-19 11:37:32,197 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-2] Resolved [com.medico.app.exeption.RootException]
2024-01-19 11:38:41,837 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:38:41,839 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 11:38:41,842 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 11:38:48,053 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 9496 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:38:48,055 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:38:48,086 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 11:38:48,087 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 11:38:48,656 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:38:48,742 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 82 ms. Found 1 JPA repository interface.
2024-01-19 11:38:48,946 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:38:48,962 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:38:49,139 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:38:49,145 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:38:49,146 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:38:49,146 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:38:49,207 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:38:49,207 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1119 ms
2024-01-19 11:38:49,304 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 11:38:49,400 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@533637f3
2024-01-19 11:38:49,401 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 11:38:49,495 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:38:49,609 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:38:49,637 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:38:49,653 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:38:49,653 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:38:49,653 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:38:49,653 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:38:49,653 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:38:49,653 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:38:49,654 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:38:49,672 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:38:49,673 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:38:49,725 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:38:49,769 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 11:38:49,798 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:38:49,935 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:38:49,964 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:38:50,444 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:38:50,495 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:38:50,808 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:38:50,818 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:38:50,997 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@499d9987, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@398614f9, org.springframework.security.web.context.SecurityContextHolderFilter@758ec214, org.springframework.security.web.header.HeaderWriterFilter@4ec23785, org.springframework.web.filter.CorsFilter@6f3b4b56, org.springframework.security.web.csrf.CsrfFilter@2726096d, org.springframework.security.web.authentication.logout.LogoutFilter@5a9e9424, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@64f653ac, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@9b42fd1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4388c9e7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@733cfed4, org.springframework.security.web.session.SessionManagementFilter@424905b3, org.springframework.security.web.access.ExceptionTranslationFilter@4a114905, org.springframework.security.web.access.intercept.AuthorizationFilter@158ad05b]
2024-01-19 11:38:51,434 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:38:51,461 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:38:51,487 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:38:51,494 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 3.689 seconds (process running for 4.773)
2024-01-19 11:42:58,568 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:42:58,571 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 11:42:58,573 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 11:43:05,349 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 24368 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:43:05,351 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:43:05,381 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 11:43:05,382 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 11:43:05,973 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:43:06,057 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 79 ms. Found 1 JPA repository interface.
2024-01-19 11:43:06,269 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:43:06,292 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:43:06,524 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:43:06,533 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:06,535 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:43:06,535 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:43:06,599 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:43:06,599 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1216 ms
2024-01-19 11:43:06,704 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 11:43:06,823 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@384f985a
2024-01-19 11:43:06,824 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 11:43:06,944 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:43:07,121 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:43:07,161 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:43:07,188 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:43:07,188 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:43:07,188 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:43:07,188 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:43:07,189 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:43:07,189 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:43:07,189 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:43:07,210 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:43:07,213 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:43:07,284 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:43:07,392 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 11:43:07,450 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:43:07,681 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:43:07,730 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:43:08,516 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:43:08,573 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:43:09,039 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:43:09,051 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:43:09,262 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@d27ff95, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5eae85da, org.springframework.security.web.context.SecurityContextHolderFilter@57d1f299, org.springframework.security.web.header.HeaderWriterFilter@a425fd2, org.springframework.web.filter.CorsFilter@5563934, org.springframework.security.web.csrf.CsrfFilter@5357f5c0, org.springframework.security.web.authentication.logout.LogoutFilter@11558f4b, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@4c42fc3f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@49842268, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1af7b39a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@57c72161, org.springframework.security.web.session.SessionManagementFilter@4d35299e, org.springframework.security.web.access.ExceptionTranslationFilter@7a166c23, org.springframework.security.web.access.intercept.AuthorizationFilter@7095eaef]
2024-01-19 11:43:09,772 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:43:09,816 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:09,835 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:43:09,843 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 4.742 seconds (process running for 5.886)
2024-01-19 11:43:10,969 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 11:43:10,969 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-2] Initializing Servlet 'dispatcherServlet'
2024-01-19 11:43:10,970 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-2] Completed initialization in 1 ms
2024-01-19 11:43:10,975 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Securing GET /test/anonymous
2024-01-19 11:43:10,978 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-2] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:43:10,987 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:10,987 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-2] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:43:10,990 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Secured GET /test/anonymous
2024-01-19 11:43:11,049 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-2] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:43:14,312 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-10] Securing GET /test/anonymous
2024-01-19 11:43:14,313 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-10] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:14,314 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-10] Secured GET /test/anonymous
2024-01-19 11:43:14,316 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-10] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:43:18,415 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-6] Securing GET /test/anonymous
2024-01-19 11:43:18,415 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-6] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:18,417 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-6] Secured GET /test/anonymous
2024-01-19 11:43:18,418 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-6] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:43:27,566 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-8] Securing GET /test/anonymous
2024-01-19 11:43:27,567 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-8] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:27,568 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-8] Secured GET /test/anonymous
2024-01-19 11:43:27,570 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-8] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:43:28,552 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Securing GET /test/anonymous
2024-01-19 11:43:28,553 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-4] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:28,555 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Secured GET /test/anonymous
2024-01-19 11:43:28,558 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-4] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:43:28,693 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-01-19 11:43:28,696 INFO o.a.j.l.DirectJDKLog [Thread-5] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:28,719 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-5] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:43:28,721 INFO c.z.h.HikariDataSource [Thread-5] HikariPool-1 - Shutdown initiated...
2024-01-19 11:43:28,726 INFO c.z.h.HikariDataSource [Thread-5] HikariPool-1 - Shutdown completed.
2024-01-19 11:43:28,828 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 24368 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:43:28,829 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:43:28,977 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:43:28,985 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 7 ms. Found 1 JPA repository interface.
2024-01-19 11:43:29,034 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:43:29,035 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:43:29,068 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:43:29,068 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:29,068 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:43:29,068 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:43:29,096 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:43:29,096 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 266 ms
2024-01-19 11:43:29,117 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-2 - Starting...
2024-01-19 11:43:29,144 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@384ae50e
2024-01-19 11:43:29,145 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-2 - Start completed.
2024-01-19 11:43:29,153 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:43:29,169 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:43:29,182 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:43:29,182 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:43:29,182 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:43:29,182 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:43:29,182 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:43:29,183 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:43:29,183 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:43:29,191 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:43:29,193 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:43:29,203 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:43:29,206 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:43:29,209 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:43:29,210 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:43:29,232 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:43:29,259 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:43:29,308 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:43:29,315 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:43:29,367 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1cfa2150, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@63199e4, org.springframework.security.web.context.SecurityContextHolderFilter@35515c16, org.springframework.security.web.header.HeaderWriterFilter@7682a8a7, org.springframework.web.filter.CorsFilter@19cac6a6, org.springframework.security.web.csrf.CsrfFilter@16677627, org.springframework.security.web.authentication.logout.LogoutFilter@102771d1, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@37f86787, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2d274e0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@61f6238d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6d7a4e47, org.springframework.security.web.session.SessionManagementFilter@182ac77a, org.springframework.security.web.access.ExceptionTranslationFilter@2e6ba56, org.springframework.security.web.access.intercept.AuthorizationFilter@5179c3bf]
2024-01-19 11:43:29,458 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:43:29,471 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:29,478 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:43:29,483 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.682 seconds (process running for 25.526)
2024-01-19 11:43:29,485 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:43:31,901 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-01-19 11:43:31,902 INFO o.a.j.l.DirectJDKLog [Thread-7] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:31,913 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-7] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:43:31,913 INFO c.z.h.HikariDataSource [Thread-7] HikariPool-2 - Shutdown initiated...
2024-01-19 11:43:31,917 INFO c.z.h.HikariDataSource [Thread-7] HikariPool-2 - Shutdown completed.
2024-01-19 11:43:31,977 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 24368 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:43:31,978 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:43:32,122 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:43:32,132 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 9 ms. Found 1 JPA repository interface.
2024-01-19 11:43:32,201 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:43:32,202 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:43:32,229 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:43:32,230 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:32,230 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:43:32,230 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:43:32,253 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:43:32,254 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 274 ms
2024-01-19 11:43:32,270 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-3 - Starting...
2024-01-19 11:43:32,293 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-3 - Added connection org.postgresql.jdbc.PgConnection@31892139
2024-01-19 11:43:32,293 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-3 - Start completed.
2024-01-19 11:43:32,305 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:43:32,325 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:43:32,344 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:43:32,344 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:43:32,345 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:43:32,345 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:43:32,345 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:43:32,345 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:43:32,345 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:43:32,359 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:43:32,361 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:43:32,375 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:43:32,378 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:43:32,382 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:43:32,383 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:43:32,413 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:43:32,447 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:43:32,488 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:43:32,493 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:43:32,559 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@696aee1e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@61f832ef, org.springframework.security.web.context.SecurityContextHolderFilter@7d4d96e, org.springframework.security.web.header.HeaderWriterFilter@6679f42e, org.springframework.web.filter.CorsFilter@1589aa57, org.springframework.security.web.csrf.CsrfFilter@6f722116, org.springframework.security.web.authentication.logout.LogoutFilter@1ed00684, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@7790324e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ed9655c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@47a8342d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@63fde8ea, org.springframework.security.web.session.SessionManagementFilter@79d03dd3, org.springframework.security.web.access.ExceptionTranslationFilter@4ba45810, org.springframework.security.web.access.intercept.AuthorizationFilter@3d093186]
2024-01-19 11:43:32,671 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:43:32,683 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:32,691 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:43:32,695 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.738 seconds (process running for 28.738)
2024-01-19 11:43:32,697 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:43:33,593 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 11:43:33,594 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-2] Initializing Servlet 'dispatcherServlet'
2024-01-19 11:43:33,594 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-2] Completed initialization in 0 ms
2024-01-19 11:43:33,594 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Securing GET /test/anonymous
2024-01-19 11:43:33,595 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-2] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:43:33,595 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:33,595 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-2] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:43:33,596 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Secured GET /test/anonymous
2024-01-19 11:43:33,602 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-2] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:43:34,607 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Securing GET /test/anonymous
2024-01-19 11:43:34,607 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-4] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:34,608 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Secured GET /test/anonymous
2024-01-19 11:43:34,610 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-4] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:43:35,651 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-6] Securing GET /test/anonymous
2024-01-19 11:43:35,651 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-6] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:35,652 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-6] Secured GET /test/anonymous
2024-01-19 11:43:35,653 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-6] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:43:36,283 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-5] Securing GET /test/anonymous
2024-01-19 11:43:36,284 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-5] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:36,284 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-5] Secured GET /test/anonymous
2024-01-19 11:43:36,286 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-5] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:43:37,131 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-10] Securing GET /test/anonymous
2024-01-19 11:43:37,132 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-10] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:37,132 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-10] Secured GET /test/anonymous
2024-01-19 11:43:37,133 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-10] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:43:49,589 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Securing GET /test/anonymous
2024-01-19 11:43:49,590 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:49,591 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Secured GET /test/anonymous
2024-01-19 11:43:49,594 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-2] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:43:50,269 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Securing GET /test/anonymous
2024-01-19 11:43:50,270 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-4] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:50,271 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Secured GET /test/anonymous
2024-01-19 11:43:50,274 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-4] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:43:51,212 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-6] Securing GET /test/anonymous
2024-01-19 11:43:51,212 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-6] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:51,213 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-6] Secured GET /test/anonymous
2024-01-19 11:43:51,215 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-6] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:43:51,590 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (0 additions, 1 deletion, 0 modifications)
2024-01-19 11:43:51,591 INFO o.a.j.l.DirectJDKLog [Thread-11] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:51,602 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-11] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:43:51,602 INFO c.z.h.HikariDataSource [Thread-11] HikariPool-3 - Shutdown initiated...
2024-01-19 11:43:51,608 INFO c.z.h.HikariDataSource [Thread-11] HikariPool-3 - Shutdown completed.
2024-01-19 11:43:51,687 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 24368 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:43:51,687 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:43:51,855 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:43:51,867 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 12 ms. Found 1 JPA repository interface.
2024-01-19 11:43:51,925 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:43:51,926 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:43:51,980 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:43:51,980 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:51,980 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:43:51,981 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:43:52,014 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:43:52,014 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 325 ms
2024-01-19 11:43:52,034 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-4 - Starting...
2024-01-19 11:43:52,067 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-4 - Added connection org.postgresql.jdbc.PgConnection@3cb9cef4
2024-01-19 11:43:52,067 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-4 - Start completed.
2024-01-19 11:43:52,077 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:43:52,095 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:43:52,111 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:43:52,111 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:43:52,111 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:43:52,112 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:43:52,112 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:43:52,112 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:43:52,112 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:43:52,123 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:43:52,125 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:43:52,137 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:43:52,141 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:43:52,147 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:43:52,148 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:43:52,174 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:43:52,205 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:43:52,240 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:43:52,245 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:43:52,290 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1296666d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@d22d04a, org.springframework.security.web.context.SecurityContextHolderFilter@e937e01, org.springframework.security.web.header.HeaderWriterFilter@20f2bb19, org.springframework.web.filter.CorsFilter@257377f7, org.springframework.security.web.csrf.CsrfFilter@371ec664, org.springframework.security.web.authentication.logout.LogoutFilter@7872ed6a, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@7de0cd06, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6a357a54, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5faa2e78, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5e8006a2, org.springframework.security.web.session.SessionManagementFilter@4fffac7c, org.springframework.security.web.access.ExceptionTranslationFilter@2fcd7d0, org.springframework.security.web.access.intercept.AuthorizationFilter@3703ff56]
2024-01-19 11:43:52,386 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:43:52,395 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:52,402 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:43:52,406 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.756 seconds (process running for 48.449)
2024-01-19 11:43:52,407 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:43:53,838 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-01-19 11:43:53,840 INFO o.a.j.l.DirectJDKLog [Thread-15] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:53,853 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-15] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:43:53,853 INFO c.z.h.HikariDataSource [Thread-15] HikariPool-4 - Shutdown initiated...
2024-01-19 11:43:53,859 INFO c.z.h.HikariDataSource [Thread-15] HikariPool-4 - Shutdown completed.
2024-01-19 11:43:53,941 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 24368 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:43:53,941 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:43:54,211 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:43:54,227 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 15 ms. Found 1 JPA repository interface.
2024-01-19 11:43:54,296 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:43:54,298 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:43:54,337 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:43:54,338 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:54,338 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:43:54,338 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:43:54,372 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:43:54,373 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 430 ms
2024-01-19 11:43:54,396 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-5 - Starting...
2024-01-19 11:43:54,429 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-5 - Added connection org.postgresql.jdbc.PgConnection@1a276010
2024-01-19 11:43:54,429 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-5 - Start completed.
2024-01-19 11:43:54,445 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:43:54,473 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:43:54,498 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:43:54,498 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:43:54,498 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:43:54,498 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:43:54,498 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:43:54,498 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:43:54,498 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:43:54,515 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:43:54,518 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:43:54,544 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:43:54,548 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:43:54,561 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:43:54,562 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:43:54,600 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:43:54,636 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:43:54,721 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:43:54,739 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:43:54,905 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@37858ea8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@a6f1644, org.springframework.security.web.context.SecurityContextHolderFilter@1ab8b9fc, org.springframework.security.web.header.HeaderWriterFilter@5f204ca1, org.springframework.web.filter.CorsFilter@4b5b29d8, org.springframework.security.web.csrf.CsrfFilter@3fe3cbe7, org.springframework.security.web.authentication.logout.LogoutFilter@34058750, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@2fa2b30b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@220886db, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7f10937f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@715be153, org.springframework.security.web.session.SessionManagementFilter@3b25f18c, org.springframework.security.web.access.ExceptionTranslationFilter@68aa1444, org.springframework.security.web.access.intercept.AuthorizationFilter@292d1b1a]
2024-01-19 11:43:55,134 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:43:55,150 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:43:55,165 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:43:55,170 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 1.267 seconds (process running for 51.213)
2024-01-19 11:43:55,172 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 11:43:55,881 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-3] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 11:43:55,881 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-3] Initializing Servlet 'dispatcherServlet'
2024-01-19 11:43:55,883 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-3] Completed initialization in 2 ms
2024-01-19 11:43:55,883 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-3] Securing GET /test/anonymous
2024-01-19 11:43:55,883 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-3] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:43:55,883 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-3] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:55,884 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-3] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:43:55,885 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-3] Secured GET /test/anonymous
2024-01-19 11:43:57,038 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Securing GET /test/anonymous
2024-01-19 11:43:57,038 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:43:57,040 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Secured GET /test/anonymous
2024-01-19 11:44:12,519 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:44:12,519 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-5 - Shutdown initiated...
2024-01-19 11:44:12,522 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-5 - Shutdown completed.
2024-01-19 11:44:18,761 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 23208 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:44:18,764 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:44:18,800 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 11:44:18,800 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 11:44:19,557 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:44:19,667 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 104 ms. Found 1 JPA repository interface.
2024-01-19 11:44:19,910 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:44:19,927 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:44:20,132 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:44:20,139 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:44:20,140 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:44:20,141 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:44:20,196 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:44:20,197 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1396 ms
2024-01-19 11:44:20,305 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 11:44:20,429 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2af7cc9f
2024-01-19 11:44:20,430 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 11:44:20,534 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:44:20,675 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:44:20,714 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:44:20,732 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:44:20,732 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:44:20,732 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:44:20,732 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:44:20,732 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:44:20,732 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:44:20,733 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:44:20,758 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:44:20,760 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:44:20,825 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:44:20,875 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 11:44:20,910 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:44:21,093 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:44:21,126 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:44:21,713 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:44:21,782 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:44:22,346 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:44:22,366 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:44:22,646 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4a828b09, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@24512a24, org.springframework.security.web.context.SecurityContextHolderFilter@72c927c6, org.springframework.security.web.header.HeaderWriterFilter@4388c9e7, org.springframework.web.filter.CorsFilter@768b182, org.springframework.security.web.csrf.CsrfFilter@28bd8507, org.springframework.security.web.authentication.logout.LogoutFilter@20743998, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@1d77cda9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1f7feeb6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7fd5b77d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7ef74bda, org.springframework.security.web.session.SessionManagementFilter@2480d47a, org.springframework.security.web.access.ExceptionTranslationFilter@7f60358b, org.springframework.security.web.access.intercept.AuthorizationFilter@6f3b4b56]
2024-01-19 11:44:23,372 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:44:23,428 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:44:23,460 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:44:23,471 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 4.97 seconds (process running for 6.067)
2024-01-19 11:44:23,744 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 11:44:23,745 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-1] Initializing Servlet 'dispatcherServlet'
2024-01-19 11:44:23,746 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-1] Completed initialization in 1 ms
2024-01-19 11:44:23,753 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-1] Securing GET /test/anonymous
2024-01-19 11:44:23,758 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-1] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:44:23,771 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-1] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:44:23,772 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-1] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:44:23,777 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-1] Secured GET /test/anonymous
2024-01-19 11:44:23,861 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-1] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:44:24,963 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Securing GET /test/anonymous
2024-01-19 11:44:24,963 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-4] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:44:24,965 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Secured GET /test/anonymous
2024-01-19 11:44:24,966 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-4] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:44:25,914 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-6] Securing GET /test/anonymous
2024-01-19 11:44:25,914 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-6] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:44:25,916 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-6] Secured GET /test/anonymous
2024-01-19 11:44:25,917 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-6] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:44:35,040 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:44:35,043 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 11:44:35,046 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 11:44:42,065 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 14028 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:44:42,067 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:44:42,104 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 11:44:42,104 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 11:44:42,799 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:44:42,897 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 92 ms. Found 1 JPA repository interface.
2024-01-19 11:44:43,143 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:44:43,160 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:44:43,387 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:44:43,394 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:44:43,395 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:44:43,396 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:44:43,461 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:44:43,461 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1356 ms
2024-01-19 11:44:43,554 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 11:44:43,682 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4e85a080
2024-01-19 11:44:43,683 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 11:44:43,781 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:44:43,920 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:44:43,970 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:44:43,988 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:44:43,989 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:44:43,989 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:44:43,989 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:44:43,989 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:44:43,989 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:44:43,989 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:44:44,018 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:44:44,021 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:44:44,084 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:44:44,129 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 11:44:44,172 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:44:44,357 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:44:44,389 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:44:45,359 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:44:45,423 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:44:45,906 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:44:45,921 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:44:46,186 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@48aab6e5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2c9042bc, org.springframework.security.web.context.SecurityContextHolderFilter@155d94c, org.springframework.security.web.header.HeaderWriterFilter@56a4e44a, org.springframework.web.filter.CorsFilter@6d3d1705, org.springframework.security.web.csrf.CsrfFilter@12f531e7, org.springframework.security.web.authentication.logout.LogoutFilter@e46c432, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@254c8417, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@71f1b1af, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@611d2869, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@73cd1b0a, org.springframework.security.web.session.SessionManagementFilter@3d245f65, org.springframework.security.web.access.ExceptionTranslationFilter@205a69d6, org.springframework.security.web.access.intercept.AuthorizationFilter@49a6fe0c]
2024-01-19 11:44:46,900 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:44:46,939 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:44:46,963 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:44:46,972 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 5.22 seconds (process running for 6.712)
2024-01-19 11:44:47,261 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-3] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 11:44:47,262 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-3] Initializing Servlet 'dispatcherServlet'
2024-01-19 11:44:47,263 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-3] Completed initialization in 1 ms
2024-01-19 11:44:47,270 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-3] Securing GET /test/anonymous
2024-01-19 11:44:47,275 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-3] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:44:47,286 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-3] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:44:47,287 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-3] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:44:47,292 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-3] Secured GET /test/anonymous
2024-01-19 11:44:48,374 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Securing GET /test/anonymous
2024-01-19 11:44:48,375 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:44:48,377 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Secured GET /test/anonymous
2024-01-19 11:45:18,236 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:45:18,238 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 11:45:18,240 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 11:45:24,604 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 21736 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:45:24,606 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:45:24,639 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 11:45:24,639 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 11:45:25,226 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:45:25,314 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 83 ms. Found 1 JPA repository interface.
2024-01-19 11:45:25,535 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:45:25,550 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:45:25,743 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:45:25,749 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:45:25,750 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:45:25,750 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:45:25,804 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:45:25,804 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1164 ms
2024-01-19 11:45:25,897 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 11:45:26,007 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6c36b956
2024-01-19 11:45:26,008 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 11:45:26,101 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:45:26,225 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:45:26,257 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:45:26,273 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:45:26,274 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:45:26,274 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:45:26,274 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:45:26,274 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:45:26,274 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:45:26,274 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:45:26,297 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:45:26,299 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:45:26,349 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:45:26,389 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 11:45:26,413 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:45:26,563 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:45:26,590 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:45:27,096 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:45:27,155 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:45:27,466 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:45:27,476 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:45:27,664 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@fada44a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a9e9424, org.springframework.security.web.context.SecurityContextHolderFilter@184cd49a, org.springframework.security.web.header.HeaderWriterFilter@b3607b9, org.springframework.web.filter.CorsFilter@3c9fc0aa, org.springframework.security.web.csrf.CsrfFilter@2f414ca0, org.springframework.security.web.authentication.logout.LogoutFilter@424905b3, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@66e010e5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@13c8a096, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@479c9f2a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7d970929, org.springframework.security.web.session.SessionManagementFilter@2726096d, org.springframework.security.web.access.ExceptionTranslationFilter@71d78dc5, org.springframework.security.web.access.intercept.AuthorizationFilter@6c61048c]
2024-01-19 11:45:28,192 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:45:28,223 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:45:28,242 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:45:28,249 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 3.899 seconds (process running for 5.001)
2024-01-19 11:45:30,423 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-3] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 11:45:30,423 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-3] Initializing Servlet 'dispatcherServlet'
2024-01-19 11:45:30,424 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-3] Completed initialization in 1 ms
2024-01-19 11:45:30,428 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-3] Securing GET /test/anonymous
2024-01-19 11:45:30,431 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-3] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:45:30,440 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-3] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:45:30,441 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-3] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:45:30,445 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-3] Secured GET /test/anonymous
2024-01-19 11:45:30,458 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-3] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:45:30,461 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-3] Securing GET /error
2024-01-19 11:45:30,466 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-3] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:45:31,904 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Securing GET /test/anonymous
2024-01-19 11:45:31,904 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:45:31,906 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Secured GET /test/anonymous
2024-01-19 11:45:31,906 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-2] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:45:31,907 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Securing GET /error
2024-01-19 11:45:31,909 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:45:34,140 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Securing GET /test/anonymous
2024-01-19 11:45:34,141 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-4] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:45:34,143 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Secured GET /test/anonymous
2024-01-19 11:45:34,144 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-4] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:45:34,145 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Securing GET /error
2024-01-19 11:45:34,148 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-4] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:45:39,177 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-5] Securing GET /test/anonymous
2024-01-19 11:45:39,178 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-5] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:45:39,179 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-5] Secured GET /test/anonymous
2024-01-19 11:45:39,180 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-5] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:45:39,180 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-5] Securing GET /error
2024-01-19 11:45:39,181 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-5] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:45:41,344 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-7] Securing GET /test/anonymous
2024-01-19 11:45:41,345 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-7] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:45:41,347 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-7] Secured GET /test/anonymous
2024-01-19 11:45:41,348 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-7] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:45:41,349 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-7] Securing GET /error
2024-01-19 11:45:41,353 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-7] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:45:56,323 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:45:56,325 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 11:45:56,329 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 11:46:03,427 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 25492 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:46:03,432 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:46:03,495 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 11:46:03,496 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 11:46:04,301 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:46:04,405 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 98 ms. Found 1 JPA repository interface.
2024-01-19 11:46:04,650 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:46:04,667 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:46:04,885 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:46:04,892 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:46:04,894 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:46:04,894 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:46:04,953 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:46:04,953 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1456 ms
2024-01-19 11:46:05,055 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 11:46:05,201 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@b57099b
2024-01-19 11:46:05,203 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 11:46:05,319 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:46:05,477 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:46:05,512 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:46:05,531 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:46:05,531 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:46:05,532 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:46:05,532 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:46:05,532 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:46:05,532 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:46:05,532 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:46:05,566 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:46:05,569 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:46:05,630 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:46:05,673 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 11:46:05,708 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:46:05,890 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:46:05,922 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:46:06,491 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:46:06,547 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:46:06,896 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:46:06,906 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:46:07,120 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6d3d1705, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@73cd1b0a, org.springframework.security.web.context.SecurityContextHolderFilter@71f1b1af, org.springframework.security.web.header.HeaderWriterFilter@32ae265, org.springframework.web.filter.CorsFilter@6e4d8608, org.springframework.security.web.csrf.CsrfFilter@72979a5a, org.springframework.security.web.authentication.logout.LogoutFilter@6c343580, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@48aab6e5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4ead12bf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b0654df, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4066acdf, org.springframework.security.web.session.SessionManagementFilter@33e47313, org.springframework.security.web.access.ExceptionTranslationFilter@56a4e44a, org.springframework.security.web.access.intercept.AuthorizationFilter@65c27121]
2024-01-19 11:46:07,620 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:46:07,654 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:46:07,674 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:46:07,681 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 4.706 seconds (process running for 6.228)
2024-01-19 11:46:09,183 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-4] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 11:46:09,183 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-4] Initializing Servlet 'dispatcherServlet'
2024-01-19 11:46:09,184 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-4] Completed initialization in 1 ms
2024-01-19 11:46:09,188 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Securing GET /test/anonymous
2024-01-19 11:46:09,191 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-4] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:46:09,200 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-4] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:46:09,201 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-4] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:46:09,204 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Secured GET /test/anonymous
2024-01-19 11:46:09,266 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-4] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:46:10,487 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-5] Securing GET /test/anonymous
2024-01-19 11:46:10,487 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-5] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:46:10,489 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-5] Secured GET /test/anonymous
2024-01-19 11:46:10,491 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-5] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:46:22,607 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:46:22,609 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 11:46:22,612 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 11:46:30,306 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 23192 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:46:30,308 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:46:30,353 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 11:46:30,354 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 11:46:31,158 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:46:31,275 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 111 ms. Found 1 JPA repository interface.
2024-01-19 11:46:31,580 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:46:31,602 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:46:31,849 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:46:31,856 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:46:31,857 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:46:31,858 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:46:31,918 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:46:31,918 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1564 ms
2024-01-19 11:46:32,056 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 11:46:32,178 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4c7bee80
2024-01-19 11:46:32,179 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 11:46:32,282 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:46:32,435 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:46:32,471 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:46:32,491 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:46:32,491 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:46:32,491 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:46:32,492 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:46:32,492 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:46:32,492 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:46:32,492 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:46:32,520 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:46:32,522 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:46:32,582 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:46:32,626 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 11:46:32,652 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:46:32,831 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:46:32,862 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:46:33,398 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:46:33,446 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:46:33,818 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:46:33,830 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:46:34,050 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1af7b39a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@42eacf67, org.springframework.security.web.context.SecurityContextHolderFilter@61a94c5a, org.springframework.security.web.header.HeaderWriterFilter@7630b4f7, org.springframework.web.filter.CorsFilter@13b62276, org.springframework.security.web.csrf.CsrfFilter@40c2053c, org.springframework.security.web.authentication.logout.LogoutFilter@4d6b29a1, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@33cc4824, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@10678982, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@210af11d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7b49c50a, org.springframework.security.web.session.SessionManagementFilter@6efa8f2d, org.springframework.security.web.access.ExceptionTranslationFilter@7bbe62cd, org.springframework.security.web.access.intercept.AuthorizationFilter@724f9f3f]
2024-01-19 11:46:34,530 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:46:34,559 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:46:34,576 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:46:34,584 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 4.625 seconds (process running for 5.865)
2024-01-19 11:46:35,974 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 11:46:35,974 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-2] Initializing Servlet 'dispatcherServlet'
2024-01-19 11:46:35,975 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-2] Completed initialization in 1 ms
2024-01-19 11:46:35,980 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Securing GET /test/anonymous
2024-01-19 11:46:35,985 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-2] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:46:35,995 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:46:35,997 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-2] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:46:36,001 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Secured GET /test/anonymous
2024-01-19 11:46:36,017 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-2] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:46:36,021 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Securing GET /error
2024-01-19 11:46:36,026 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:46:37,997 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-9] Securing GET /test/anonymous
2024-01-19 11:46:37,998 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-9] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:46:38,000 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-9] Secured GET /test/anonymous
2024-01-19 11:46:38,002 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-9] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:46:38,002 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-9] Securing GET /error
2024-01-19 11:46:38,005 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-9] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:46:43,630 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Securing GET /test/anonymous
2024-01-19 11:46:43,735 DEBUG o.s.s.o.j.JwtTimestampValidator [http-nio-8090-exec-4] Jwt expired at 2024-01-19T08:38:59Z
2024-01-19 11:46:43,736 DEBUG o.s.s.o.s.r.a.JwtAuthenticationProvider [http-nio-8090-exec-4] Failed to authenticate since the JWT was invalid
2024-01-19 11:46:46,349 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-5] Securing GET /test/anonymous
2024-01-19 11:46:46,350 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-5] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:46:46,352 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-5] Secured GET /test/anonymous
2024-01-19 11:46:46,352 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-5] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:46:46,352 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-5] Securing GET /error
2024-01-19 11:46:46,353 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-5] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:46:54,579 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-6] Securing GET /test/anonymous?hello=hhh
2024-01-19 11:46:54,580 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-6] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:46:54,581 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-6] Secured GET /test/anonymous?hello=hhh
2024-01-19 11:47:13,853 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:47:13,855 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 11:47:13,858 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 11:47:20,448 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 16728 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 11:47:20,450 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 11:47:20,488 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 11:47:20,488 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 11:47:21,178 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 11:47:21,274 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 91 ms. Found 1 JPA repository interface.
2024-01-19 11:47:21,500 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 11:47:21,516 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 11:47:21,724 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 11:47:21,731 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 11:47:21,732 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 11:47:21,732 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 11:47:21,794 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 11:47:21,795 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1306 ms
2024-01-19 11:47:21,878 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 11:47:22,005 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3b05af6c
2024-01-19 11:47:22,007 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 11:47:22,111 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 11:47:22,255 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:47:22,291 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 11:47:22,309 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 11:47:22,309 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 11:47:22,309 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 11:47:22,310 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 11:47:22,310 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 11:47:22,310 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 11:47:22,310 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 11:47:22,333 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 11:47:22,334 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 11:47:22,391 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 11:47:22,431 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 11:47:22,462 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 11:47:22,653 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 11:47:22,695 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 11:47:23,248 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 11:47:23,293 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 11:47:23,639 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 11:47:23,651 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 11:47:23,847 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6cf6b825, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6979f4c0, org.springframework.security.web.context.SecurityContextHolderFilter@23359d33, org.springframework.security.web.header.HeaderWriterFilter@5d24510, org.springframework.web.filter.CorsFilter@765ba592, org.springframework.security.web.csrf.CsrfFilter@d1ac9dd, org.springframework.security.web.authentication.logout.LogoutFilter@63ad165, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@17b1019c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5662a5a4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@48b066fc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@48181bad, org.springframework.security.web.session.SessionManagementFilter@3ff88a96, org.springframework.security.web.access.ExceptionTranslationFilter@35cf85da, org.springframework.security.web.access.intercept.AuthorizationFilter@36b57d13]
2024-01-19 11:47:24,286 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 11:47:24,314 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 11:47:24,341 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 11:47:24,348 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 4.2 seconds (process running for 5.459)
2024-01-19 11:47:34,556 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 11:47:34,557 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-2] Initializing Servlet 'dispatcherServlet'
2024-01-19 11:47:34,558 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-2] Completed initialization in 1 ms
2024-01-19 11:47:34,563 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Securing GET /test/anonymous
2024-01-19 11:47:34,566 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-2] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:47:34,576 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:47:34,577 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-2] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 11:47:34,580 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Secured GET /test/anonymous
2024-01-19 11:47:34,639 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-2] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 11:47:59,662 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-10] Securing GET /test/anonymous
2024-01-19 11:47:59,662 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-10] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 11:47:59,664 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-10] Secured GET /test/anonymous
2024-01-19 11:47:59,665 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-10] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 14:45:27,165 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 2 class path changes (0 additions, 2 deletions, 0 modifications)
2024-01-19 14:45:27,170 INFO o.a.j.l.DirectJDKLog [Thread-5] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 14:45:27,211 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-5] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 14:45:27,215 INFO c.z.h.HikariDataSource [Thread-5] HikariPool-1 - Shutdown initiated...
2024-01-19 14:45:27,219 INFO c.z.h.HikariDataSource [Thread-5] HikariPool-1 - Shutdown completed.
2024-01-19 14:45:27,314 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 16728 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 14:45:27,314 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 14:45:27,512 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 14:45:27,523 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 10 ms. Found 1 JPA repository interface.
2024-01-19 14:45:27,589 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 14:45:27,591 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 14:45:27,647 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 14:45:27,647 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 14:45:27,648 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 14:45:27,648 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 14:45:27,673 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 14:45:27,674 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 358 ms
2024-01-19 14:45:27,696 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-2 - Starting...
2024-01-19 14:45:27,720 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@2c223706
2024-01-19 14:45:27,720 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-2 - Start completed.
2024-01-19 14:45:27,729 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 14:45:27,746 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 14:45:27,766 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 14:45:27,767 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 14:45:27,767 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 14:45:27,767 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 14:45:27,767 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 14:45:27,767 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 14:45:27,767 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 14:45:27,777 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 14:45:27,779 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 14:45:27,795 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 14:45:27,799 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 14:45:27,803 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 14:45:27,804 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 14:45:27,830 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 14:45:27,865 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 14:45:27,930 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 14:45:27,942 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 14:45:28,032 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@834f088, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5fc556dd, org.springframework.security.web.context.SecurityContextHolderFilter@4807896b, org.springframework.security.web.header.HeaderWriterFilter@5bcb8f20, org.springframework.web.filter.CorsFilter@5bce87d4, org.springframework.security.web.csrf.CsrfFilter@2a11ffc0, org.springframework.security.web.authentication.logout.LogoutFilter@1db5a060, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@320e590, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f539b23, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@68e6ab66, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5fc6e558, org.springframework.security.web.session.SessionManagementFilter@6d4d94fd, org.springframework.security.web.access.ExceptionTranslationFilter@143678b0, org.springframework.security.web.access.intercept.AuthorizationFilter@33a6f524]
2024-01-19 14:45:28,162 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 14:45:28,174 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 14:45:28,181 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 14:45:28,186 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.91 seconds (process running for 10689.359)
2024-01-19 14:45:28,188 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 14:45:30,617 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 3 class path changes (3 additions, 0 deletions, 0 modifications)
2024-01-19 14:45:30,618 INFO o.a.j.l.DirectJDKLog [Thread-7] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 14:45:30,629 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-7] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 14:45:30,630 INFO c.z.h.HikariDataSource [Thread-7] HikariPool-2 - Shutdown initiated...
2024-01-19 14:45:30,632 INFO c.z.h.HikariDataSource [Thread-7] HikariPool-2 - Shutdown completed.
2024-01-19 14:45:30,688 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 16728 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 14:45:30,689 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 14:45:30,833 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 14:45:30,841 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 7 ms. Found 1 JPA repository interface.
2024-01-19 14:45:30,894 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 14:45:30,895 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 14:45:30,925 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 14:45:30,925 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 14:45:30,925 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 14:45:30,925 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 14:45:30,953 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 14:45:30,953 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 263 ms
2024-01-19 14:45:30,970 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-3 - Starting...
2024-01-19 14:45:30,992 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-3 - Added connection org.postgresql.jdbc.PgConnection@4922fc90
2024-01-19 14:45:30,992 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-3 - Start completed.
2024-01-19 14:45:31,000 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 14:45:31,015 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 14:45:31,028 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 14:45:31,028 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 14:45:31,028 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 14:45:31,028 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 14:45:31,028 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 14:45:31,028 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 14:45:31,028 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 14:45:31,040 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 14:45:31,042 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 14:45:31,053 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 14:45:31,055 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 14:45:31,058 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 14:45:31,059 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 14:45:31,082 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 14:45:31,109 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 14:45:31,149 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 14:45:31,154 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 14:45:31,199 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@64711b1c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3ff031e6, org.springframework.security.web.context.SecurityContextHolderFilter@7f6b0dca, org.springframework.security.web.header.HeaderWriterFilter@208e2831, org.springframework.web.filter.CorsFilter@5d849cac, org.springframework.security.web.csrf.CsrfFilter@5ff77b94, org.springframework.security.web.authentication.logout.LogoutFilter@738f94bc, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@6bd448ae, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@39dc169b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@68c26e31, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@14dc2e8a, org.springframework.security.web.session.SessionManagementFilter@1ba4eef1, org.springframework.security.web.access.ExceptionTranslationFilter@3b1fadd9, org.springframework.security.web.access.intercept.AuthorizationFilter@51766c18]
2024-01-19 14:45:31,295 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 14:45:31,309 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 14:45:31,316 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 14:45:31,321 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.651 seconds (process running for 10692.493)
2024-01-19 14:45:31,322 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 15:05:34,027 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 3 class path changes (3 additions, 0 deletions, 0 modifications)
2024-01-19 15:05:34,030 INFO o.a.j.l.DirectJDKLog [Thread-11] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 15:05:34,042 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-11] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 15:05:34,042 INFO c.z.h.HikariDataSource [Thread-11] HikariPool-3 - Shutdown initiated...
2024-01-19 15:05:34,047 INFO c.z.h.HikariDataSource [Thread-11] HikariPool-3 - Shutdown completed.
2024-01-19 15:05:34,114 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 16728 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 15:05:34,114 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 15:05:34,264 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 15:05:34,275 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 10 ms. Found 2 JPA repository interfaces.
2024-01-19 15:05:34,337 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 15:05:34,339 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 15:05:34,380 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 15:05:34,380 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 15:05:34,381 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 15:05:34,381 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 15:05:34,406 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 15:05:34,407 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 292 ms
2024-01-19 15:05:34,426 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-4 - Starting...
2024-01-19 15:05:34,454 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-4 - Added connection org.postgresql.jdbc.PgConnection@50ed476a
2024-01-19 15:05:34,455 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-4 - Start completed.
2024-01-19 15:05:34,462 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 15:05:34,479 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:05:34,493 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 15:05:34,493 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 15:05:34,493 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 15:05:34,493 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 15:05:34,493 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 15:05:34,493 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 15:05:34,493 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 15:05:34,501 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 15:05:34,503 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 15:05:34,515 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 15:05:34,518 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 15:05:34,522 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 15:05:34,523 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 15:05:34,563 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 15:05:34,572 WARN o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler [restartedMain] SQL Warning Code: 0, SQLState: 00000
2024-01-19 15:05:34,572 WARN o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler [restartedMain] table "api_appel_event" does not exist, skipping
2024-01-19 15:05:34,574 WARN o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler [restartedMain] SQL Warning Code: 0, SQLState: 00000
2024-01-19 15:05:34,574 WARN o.h.e.j.s.SqlExceptionHelper$StandardWarningHandler [restartedMain] sequence "api_appel_event_id_seq" does not exist, skipping
2024-01-19 15:05:34,616 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 15:05:34,697 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 15:05:34,702 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 15:05:34,759 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6b59ff44, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1502f5e6, org.springframework.security.web.context.SecurityContextHolderFilter@6e588f22, org.springframework.security.web.header.HeaderWriterFilter@2ac47d14, org.springframework.web.filter.CorsFilter@4b0c7729, org.springframework.security.web.csrf.CsrfFilter@60a93af, org.springframework.security.web.authentication.logout.LogoutFilter@6be044c8, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a3e6081, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1ba7649c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@12828621, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2ff3ca1, org.springframework.security.web.session.SessionManagementFilter@3c1df4e5, org.springframework.security.web.access.ExceptionTranslationFilter@242a3409, org.springframework.security.web.access.intercept.AuthorizationFilter@5391a83f]
2024-01-19 15:05:34,851 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 15:05:34,861 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 15:05:34,870 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 15:05:34,873 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.785 seconds (process running for 11896.047)
2024-01-19 15:05:34,874 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 15:07:09,422 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 15:07:09,423 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-4 - Shutdown initiated...
2024-01-19 15:07:09,426 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-4 - Shutdown completed.
2024-01-19 15:07:12,802 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 21460 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 15:07:12,804 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 15:07:12,836 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 15:07:12,837 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 15:07:13,424 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 15:07:13,519 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 91 ms. Found 2 JPA repository interfaces.
2024-01-19 15:07:13,734 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 15:07:13,757 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 15:07:13,959 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 15:07:13,967 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 15:07:13,969 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 15:07:13,969 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 15:07:14,022 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 15:07:14,022 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1185 ms
2024-01-19 15:07:14,122 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 15:07:14,236 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1e0b3829
2024-01-19 15:07:14,238 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 15:07:14,344 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 15:07:14,489 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:07:14,524 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:07:14,541 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 15:07:14,541 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 15:07:14,541 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 15:07:14,541 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 15:07:14,541 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 15:07:14,542 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 15:07:14,542 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 15:07:14,563 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 15:07:14,564 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 15:07:14,619 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 15:07:14,672 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 15:07:14,701 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 15:07:14,883 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 15:07:14,921 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 15:07:15,483 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 15:07:15,551 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 15:07:16,002 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 15:07:16,010 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 15:07:16,195 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@78d44c5e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7c7d28b4, org.springframework.security.web.context.SecurityContextHolderFilter@302c8c96, org.springframework.security.web.header.HeaderWriterFilter@66452b61, org.springframework.web.filter.CorsFilter@4e768f41, org.springframework.security.web.csrf.CsrfFilter@5dab12fc, org.springframework.security.web.authentication.logout.LogoutFilter@64095454, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@2472d97b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@43c61f2b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3afe9824, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@373c007a, org.springframework.security.web.session.SessionManagementFilter@70ca25fc, org.springframework.security.web.access.ExceptionTranslationFilter@7b34ae10, org.springframework.security.web.access.intercept.AuthorizationFilter@366eff3b]
2024-01-19 15:07:16,540 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 15:07:16,567 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 15:07:16,584 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 15:07:16,591 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 4.035 seconds (process running for 5.225)
2024-01-19 15:07:22,120 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-4] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 15:07:22,120 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-4] Initializing Servlet 'dispatcherServlet'
2024-01-19 15:07:22,121 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-4] Completed initialization in 1 ms
2024-01-19 15:07:22,125 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Securing GET /test/anonymous
2024-01-19 15:07:22,129 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-4] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 15:07:22,137 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-4] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 15:07:22,138 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-4] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 15:07:22,141 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-4] Secured GET /test/anonymous
2024-01-19 15:07:22,196 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-4] Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'hello' for method parameter type String is not present]
2024-01-19 15:07:39,264 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Securing GET /test/anonymous/hello=f
2024-01-19 15:07:39,266 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-2] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 15:07:39,271 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-2] Secured GET /test/anonymous/hello=f
2024-01-19 15:07:39,276 WARN o.s.w.s.h.AbstractHandlerExceptionResolver [http-nio-8090-exec-2] Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource test/anonymous/hello=f.]
2024-01-19 15:07:50,511 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-6] Securing GET /test/anonymous?hello=f
2024-01-19 15:07:50,512 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-6] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 15:07:50,513 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-6] Secured GET /test/anonymous?hello=f
2024-01-19 15:09:22,195 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 15:09:22,197 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 15:09:22,201 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 15:09:29,107 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 19116 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 15:09:29,109 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 15:09:29,142 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 15:09:29,142 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 15:09:29,712 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 15:09:29,805 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 88 ms. Found 2 JPA repository interfaces.
2024-01-19 15:09:30,024 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 15:09:30,040 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 15:09:30,238 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 15:09:30,245 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 15:09:30,246 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 15:09:30,246 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 15:09:30,300 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 15:09:30,300 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1158 ms
2024-01-19 15:09:30,394 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 15:09:30,500 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@59f35024
2024-01-19 15:09:30,501 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 15:09:30,592 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 15:09:30,715 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:09:30,751 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:09:30,771 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 15:09:30,771 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 15:09:30,771 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 15:09:30,771 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 15:09:30,771 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 15:09:30,771 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 15:09:30,771 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 15:09:30,792 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 15:09:30,794 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 15:09:30,842 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 15:09:30,879 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 15:09:30,902 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 15:09:31,046 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 15:09:31,071 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 15:09:31,597 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 15:09:31,665 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 15:09:32,118 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 15:09:32,125 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 15:09:32,376 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2e616ab4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@c77daeb, org.springframework.security.web.context.SecurityContextHolderFilter@2657e69, org.springframework.security.web.header.HeaderWriterFilter@3fca9ebd, org.springframework.web.filter.CorsFilter@6703c826, org.springframework.security.web.csrf.CsrfFilter@7b75a453, org.springframework.security.web.authentication.logout.LogoutFilter@201f1174, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@bd744f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@109c20e8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@75aee398, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1923dc89, org.springframework.security.web.session.SessionManagementFilter@3f0156c, org.springframework.security.web.access.ExceptionTranslationFilter@2f75d22d, org.springframework.security.web.access.intercept.AuthorizationFilter@6b982002]
2024-01-19 15:09:32,741 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 15:09:32,778 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 15:09:32,798 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 15:09:32,806 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 3.95 seconds (process running for 5.04)
2024-01-19 15:09:35,363 INFO o.a.j.l.DirectJDKLog [http-nio-8090-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-01-19 15:09:35,363 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-1] Initializing Servlet 'dispatcherServlet'
2024-01-19 15:09:35,364 INFO o.s.w.s.FrameworkServlet [http-nio-8090-exec-1] Completed initialization in 1 ms
2024-01-19 15:09:35,369 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-1] Securing GET /test/anonymous?hello=f
2024-01-19 15:09:35,372 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-1] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 15:09:35,380 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter [http-nio-8090-exec-1] Set SecurityContextHolder to anonymous SecurityContext
2024-01-19 15:09:35,381 WARN o.s.w.s.h.HandlerMappingIntrospector$CacheResultLogHelper [http-nio-8090-exec-1] Cache miss for REQUEST dispatch to '/api/test/anonymous' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2024-01-19 15:09:35,385 DEBUG o.s.s.w.FilterChainProxy [http-nio-8090-exec-1] Secured GET /test/anonymous?hello=f
2024-01-19 15:12:53,015 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2024-01-19 15:12:53,019 INFO o.a.j.l.DirectJDKLog [Thread-5] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-19 15:12:53,041 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-5] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 15:12:53,043 INFO c.z.h.HikariDataSource [Thread-5] HikariPool-1 - Shutdown initiated...
2024-01-19 15:12:53,046 INFO c.z.h.HikariDataSource [Thread-5] HikariPool-1 - Shutdown completed.
2024-01-19 15:12:53,117 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 19116 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 15:12:53,117 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 15:12:53,312 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 15:12:53,324 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 11 ms. Found 2 JPA repository interfaces.
2024-01-19 15:12:53,387 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 15:12:53,388 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 15:12:53,423 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 15:12:53,424 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 15:12:53,424 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 15:12:53,424 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 15:12:53,448 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 15:12:53,449 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 330 ms
2024-01-19 15:12:53,469 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-2 - Starting...
2024-01-19 15:12:53,499 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@178acdce
2024-01-19 15:12:53,499 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-2 - Start completed.
2024-01-19 15:12:53,507 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 15:12:53,524 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:12:53,544 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 15:12:53,544 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-19 15:12:53,544 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 15:12:53,544 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 15:12:53,544 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 15:12:53,544 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-19 15:12:53,544 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 15:12:53,556 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 15:12:53,558 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 15:12:53,573 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 15:12:53,576 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 15:12:53,580 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 15:12:53,582 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 15:12:53,622 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 15:12:53,688 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 15:12:53,775 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 15:12:53,780 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 15:12:53,839 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5a6545c7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@53132ed9, org.springframework.security.web.context.SecurityContextHolderFilter@32b8cd26, org.springframework.security.web.header.HeaderWriterFilter@7ae41109, org.springframework.web.filter.CorsFilter@50a82e5, org.springframework.security.web.csrf.CsrfFilter@2122bef0, org.springframework.security.web.authentication.logout.LogoutFilter@693e44b9, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@5f42ce1a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@88a034a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@52bc270b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4cf1ae40, org.springframework.security.web.session.SessionManagementFilter@6d92633, org.springframework.security.web.access.ExceptionTranslationFilter@464f88eb, org.springframework.security.web.access.intercept.AuthorizationFilter@44c251b7]
2024-01-19 15:12:53,946 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 15:12:53,959 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 15:12:53,966 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 15:12:53,970 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 0.878 seconds (process running for 206.204)
2024-01-19 15:12:53,971 INFO o.s.b.d.a.ConditionEvaluationDeltaLoggingListener [restartedMain] Condition evaluation unchanged
2024-01-19 15:13:54,346 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 15:13:54,347 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-2 - Shutdown initiated...
2024-01-19 15:13:54,349 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-2 - Shutdown completed.
2024-01-19 15:13:57,519 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 25092 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 15:13:57,522 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 15:13:57,555 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 15:13:57,555 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 15:13:58,142 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 15:13:58,230 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 83 ms. Found 2 JPA repository interfaces.
2024-01-19 15:13:58,436 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 15:13:58,450 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 15:13:58,632 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 15:13:58,637 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 15:13:58,639 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 15:13:58,640 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 15:13:58,694 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 15:13:58,694 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1138 ms
2024-01-19 15:13:58,786 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 15:13:58,887 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@39546c05
2024-01-19 15:13:58,889 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 15:13:58,978 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 15:13:59,130 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:13:59,183 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-19 15:13:59,185 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5673639185
2024-01-19 15:13:59,187 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:13:59,216 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll encountered an exception.
2024-01-19 15:13:59,219 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-19 15:13:59,226 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 15:13:59,227 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 15:13:59,229 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "api_appel_event_id_seq" already exists [Failed SQL: (0) CREATE SEQUENCE API_APPEL_EVENT_id_seq;

create table api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id              id BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
)]
2024-01-19 15:13:59,229 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-19 15:13:59,244 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-19 15:13:59,246 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 15:13:59,253 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 15:13:59,268 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "api_appel_event_id_seq" already exists [Failed SQL: (0) CREATE SEQUENCE API_APPEL_EVENT_id_seq;

create table api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id              id BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "api_appel_event_id_seq" already exists [Failed SQL: (0) CREATE SEQUENCE API_APPEL_EVENT_id_seq;

create table api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id              id BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "api_appel_event_id_seq" already exists [Failed SQL: (0) CREATE SEQUENCE API_APPEL_EVENT_id_seq;

create table api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id              id BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "api_appel_event_id_seq" already exists [Failed SQL: (0) CREATE SEQUENCE API_APPEL_EVENT_id_seq;

create table api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id              id BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: relation "api_appel_event_id_seq" already exists [Failed SQL: (0) CREATE SEQUENCE API_APPEL_EVENT_id_seq;

create table api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id              id BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: relation "api_appel_event_id_seq" already exists
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-19 15:15:36,547 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 17276 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 15:15:36,550 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 15:15:36,582 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 15:15:36,582 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 15:15:37,163 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 15:15:37,249 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 82 ms. Found 2 JPA repository interfaces.
2024-01-19 15:15:37,453 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 15:15:37,468 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 15:15:37,651 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 15:15:37,657 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 15:15:37,658 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 15:15:37,658 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 15:15:37,711 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 15:15:37,711 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1128 ms
2024-01-19 15:15:37,804 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 15:15:37,907 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2a672a6f
2024-01-19 15:15:37,908 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 15:15:37,997 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 15:15:38,121 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:15:38,145 INFO l.l.c.JavaLogger [restartedMain] Change failed validation!
2024-01-19 15:15:38,146 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 15:15:38,148 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:9bf279857f0377e79e4cf0f94507ea98 but is now: 9:1384c4959ac47eb7428e71f60de3bee1

2024-01-19 15:15:38,149 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-19 15:15:38,173 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-19 15:15:38,175 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 15:15:38,183 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 15:15:38,194 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:9bf279857f0377e79e4cf0f94507ea98 but is now: 9:1384c4959ac47eb7428e71f60de3bee1

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:9bf279857f0377e79e4cf0f94507ea98 but is now: 9:1384c4959ac47eb7428e71f60de3bee1

	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:9bf279857f0377e79e4cf0f94507ea98 but is now: 9:1384c4959ac47eb7428e71f60de3bee1

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:353)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
2024-01-19 15:18:48,186 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 11620 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 15:18:48,188 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 15:18:48,221 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 15:18:48,222 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 15:18:48,801 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 15:18:48,889 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 83 ms. Found 2 JPA repository interfaces.
2024-01-19 15:18:49,128 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 15:18:49,149 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 15:18:49,414 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 15:18:49,421 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 15:18:49,422 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 15:18:49,423 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 15:18:49,476 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 15:18:49,476 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1254 ms
2024-01-19 15:18:49,576 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 15:18:49,688 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6a0ffb9
2024-01-19 15:18:49,690 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 15:18:49,783 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 15:18:49,929 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:18:49,950 INFO l.l.c.JavaLogger [restartedMain] Change failed validation!
2024-01-19 15:18:49,951 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 15:18:49,953 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:9bf279857f0377e79e4cf0f94507ea98 but is now: 9:27f9083afe528c366a5978c84f0e46db

2024-01-19 15:18:49,953 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-19 15:18:49,970 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-19 15:18:49,972 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 15:18:49,980 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 15:18:49,992 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:9bf279857f0377e79e4cf0f94507ea98 but is now: 9:27f9083afe528c366a5978c84f0e46db

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:9bf279857f0377e79e4cf0f94507ea98 but is now: 9:27f9083afe528c366a5978c84f0e46db

	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:9bf279857f0377e79e4cf0f94507ea98 but is now: 9:27f9083afe528c366a5978c84f0e46db

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:353)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
2024-01-19 15:19:02,795 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 22840 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 15:19:02,798 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 15:19:02,828 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 15:19:02,828 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 15:19:03,404 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 15:19:03,497 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 88 ms. Found 2 JPA repository interfaces.
2024-01-19 15:19:03,712 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 15:19:03,727 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 15:19:03,917 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 15:19:03,922 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 15:19:03,924 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 15:19:03,925 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 15:19:03,984 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 15:19:03,984 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1155 ms
2024-01-19 15:19:04,112 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 15:19:04,225 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@35a007fa
2024-01-19 15:19:04,226 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 15:19:04,317 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 15:19:04,427 INFO l.l.c.JavaLogger [restartedMain] Creating database history table with name: public.databasechangelog
2024-01-19 15:19:04,460 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:19:04,518 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-19 15:19:04,519 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5673944519
2024-01-19 15:19:04,521 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:19:04,547 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-19 15:19:04,550 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-19 15:19:04,557 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 15:19:04,558 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 15:19:04,559 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "doctor_id_seq" already exists [Failed SQL: (0) CREATE SEQUENCE DOCTOR_id_seq;
CREATE TABLE DOCTOR (
                                 id BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
)]
2024-01-19 15:19:04,560 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-19 15:19:04,576 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-19 15:19:04,578 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 15:19:04,585 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 15:19:04,596 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "doctor_id_seq" already exists [Failed SQL: (0) CREATE SEQUENCE DOCTOR_id_seq;
CREATE TABLE DOCTOR (
                                 id BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "doctor_id_seq" already exists [Failed SQL: (0) CREATE SEQUENCE DOCTOR_id_seq;
CREATE TABLE DOCTOR (
                                 id BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "doctor_id_seq" already exists [Failed SQL: (0) CREATE SEQUENCE DOCTOR_id_seq;
CREATE TABLE DOCTOR (
                                 id BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "doctor_id_seq" already exists [Failed SQL: (0) CREATE SEQUENCE DOCTOR_id_seq;
CREATE TABLE DOCTOR (
                                 id BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: relation "doctor_id_seq" already exists [Failed SQL: (0) CREATE SEQUENCE DOCTOR_id_seq;
CREATE TABLE DOCTOR (
                                 id BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: relation "doctor_id_seq" already exists
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-19 15:19:25,195 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 24160 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 15:19:25,197 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 15:19:25,227 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 15:19:25,227 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 15:19:25,803 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 15:19:25,892 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 84 ms. Found 2 JPA repository interfaces.
2024-01-19 15:19:26,104 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 15:19:26,120 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 15:19:26,303 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 15:19:26,312 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 15:19:26,313 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 15:19:26,314 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 15:19:26,367 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 15:19:26,367 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1140 ms
2024-01-19 15:19:26,459 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 15:19:26,561 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@74b133f0
2024-01-19 15:19:26,562 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 15:19:26,653 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 15:19:26,755 INFO l.l.c.JavaLogger [restartedMain] Creating database history table with name: public.databasechangelog
2024-01-19 15:19:26,789 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:19:26,849 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-19 15:19:26,851 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5673966851
2024-01-19 15:19:26,853 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:19:26,878 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-19 15:19:26,881 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-19 15:19:26,887 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 15:19:26,888 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 15:19:26,890 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 113 [Failed SQL: (0) CREATE SEQUENCE DOCTOR_id_seq;
CREATE TABLE DOCTOR (
                                 id BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
)]
2024-01-19 15:19:26,890 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-19 15:19:26,892 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-19 15:19:26,895 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 15:19:26,904 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 15:19:26,916 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 113 [Failed SQL: (0) CREATE SEQUENCE DOCTOR_id_seq;
CREATE TABLE DOCTOR (
                                 id BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 113 [Failed SQL: (0) CREATE SEQUENCE DOCTOR_id_seq;
CREATE TABLE DOCTOR (
                                 id BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 113 [Failed SQL: (0) CREATE SEQUENCE DOCTOR_id_seq;
CREATE TABLE DOCTOR (
                                 id BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 113 [Failed SQL: (0) CREATE SEQUENCE DOCTOR_id_seq;
CREATE TABLE DOCTOR (
                                 id BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 113 [Failed SQL: (0) CREATE SEQUENCE DOCTOR_id_seq;
CREATE TABLE DOCTOR (
                                 id BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near ")"
  Position: 113
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-19 15:19:54,053 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 23932 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 15:19:54,055 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 15:19:54,084 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 15:19:54,085 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 15:19:54,666 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 15:19:54,755 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 84 ms. Found 2 JPA repository interfaces.
2024-01-19 15:19:54,964 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 15:19:54,978 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 15:19:55,160 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 15:19:55,166 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 15:19:55,168 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 15:19:55,168 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 15:19:55,242 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 15:19:55,242 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1156 ms
2024-01-19 15:19:55,341 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 15:19:55,445 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@39546c05
2024-01-19 15:19:55,446 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 15:19:55,535 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 15:19:55,672 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:19:55,722 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-19 15:19:55,723 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5673995723
2024-01-19 15:19:55,725 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:19:55,756 INFO l.l.c.JavaLogger [restartedMain] Custom SQL executed
2024-01-19 15:19:55,760 INFO l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll ran successfully in 18ms
2024-01-19 15:19:55,777 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll encountered an exception.
2024-01-19 15:19:55,781 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-19 15:19:55,795 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 15:19:55,796 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 15:19:55,798 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "BIGINT"
  Position: 171 [Failed SQL: (0) CREATE SEQUENCE API_APPEL_EVENT_id_seq;

create table api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id              id BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
)]
2024-01-19 15:19:55,799 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-19 15:19:55,809 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-19 15:19:55,811 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-19 15:19:55,818 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-19 15:19:55,834 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "BIGINT"
  Position: 171 [Failed SQL: (0) CREATE SEQUENCE API_APPEL_EVENT_id_seq;

create table api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id              id BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "BIGINT"
  Position: 171 [Failed SQL: (0) CREATE SEQUENCE API_APPEL_EVENT_id_seq;

create table api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id              id BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "BIGINT"
  Position: 171 [Failed SQL: (0) CREATE SEQUENCE API_APPEL_EVENT_id_seq;

create table api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id              id BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "BIGINT"
  Position: 171 [Failed SQL: (0) CREATE SEQUENCE API_APPEL_EVENT_id_seq;

create table api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id              id BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: syntax error at or near "BIGINT"
  Position: 171 [Failed SQL: (0) CREATE SEQUENCE API_APPEL_EVENT_id_seq;

create table api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id              id BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near "BIGINT"
  Position: 171
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-19 15:20:52,344 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 23272 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 15:20:52,346 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 15:20:52,377 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 15:20:52,377 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 15:20:52,954 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 15:20:53,046 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 86 ms. Found 2 JPA repository interfaces.
2024-01-19 15:20:53,254 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 15:20:53,268 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 15:20:53,459 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 15:20:53,465 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 15:20:53,467 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 15:20:53,467 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 15:20:53,534 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 15:20:53,534 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1156 ms
2024-01-19 15:20:53,636 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 15:20:53,743 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@39546c05
2024-01-19 15:20:53,744 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 15:20:53,834 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 15:20:53,967 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:20:54,018 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-19 15:20:54,021 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5674054020
2024-01-19 15:20:54,023 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:20:54,059 INFO l.l.c.JavaLogger [restartedMain] Custom SQL executed
2024-01-19 15:20:54,064 INFO l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll ran successfully in 23ms
2024-01-19 15:20:54,080 INFO l.l.c.JavaLogger [restartedMain] Custom SQL executed
2024-01-19 15:20:54,084 INFO l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/003-alter-table-doctor.sql::raw::includeAll ran successfully in 11ms
2024-01-19 15:20:54,092 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 15:20:54,092 INFO l.l.c.JavaLogger [restartedMain] Run:                          2
2024-01-19 15:20:54,093 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-19 15:20:54,093 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 15:20:54,093 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 15:20:54,093 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-19 15:20:54,093 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 15:20:54,094 INFO l.l.c.JavaLogger [restartedMain] Update command completed successfully.
2024-01-19 15:20:54,100 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 15:20:54,101 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 15:20:54,152 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 15:20:54,185 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 15:20:54,210 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 15:20:54,350 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 15:20:54,374 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 15:20:54,884 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 15:20:54,914 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 15:20:55,351 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 15:20:55,359 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 15:20:55,541 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@bcab9e2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7095e677, org.springframework.security.web.context.SecurityContextHolderFilter@7360544e, org.springframework.security.web.header.HeaderWriterFilter@5463b3b1, org.springframework.web.filter.CorsFilter@2195e68, org.springframework.security.web.csrf.CsrfFilter@1087e504, org.springframework.security.web.authentication.logout.LogoutFilter@213f96a4, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@11fc6045, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7f5989ab, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@494ba5cb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5b5005e9, org.springframework.security.web.session.SessionManagementFilter@5b8c2d2d, org.springframework.security.web.access.ExceptionTranslationFilter@70f6b30b, org.springframework.security.web.access.intercept.AuthorizationFilter@2c2fcde6]
2024-01-19 15:20:55,865 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 15:20:55,894 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 15:20:55,910 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 15:20:55,916 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 3.811 seconds (process running for 4.89)
2024-01-19 15:21:52,125 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 15:21:52,127 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 15:21:52,131 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-19 15:21:55,421 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 8048 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-19 15:21:55,423 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-19 15:21:55,455 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-19 15:21:55,456 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-19 15:21:56,056 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-19 15:21:56,150 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 89 ms. Found 2 JPA repository interfaces.
2024-01-19 15:21:56,362 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-19 15:21:56,379 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-19 15:21:56,556 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-19 15:21:56,561 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-19 15:21:56,562 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-19 15:21:56,562 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-19 15:21:56,614 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-19 15:21:56,614 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1158 ms
2024-01-19 15:21:56,712 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-19 15:21:56,804 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@39546c05
2024-01-19 15:21:56,805 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-19 15:21:56,899 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-19 15:21:57,010 INFO l.l.c.JavaLogger [restartedMain] Creating database history table with name: public.databasechangelog
2024-01-19 15:21:57,043 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:21:57,102 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-19 15:21:57,104 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5674117103
2024-01-19 15:21:57,106 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-19 15:21:57,146 INFO l.l.c.JavaLogger [restartedMain] Custom SQL executed
2024-01-19 15:21:57,150 INFO l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll ran successfully in 22ms
2024-01-19 15:21:57,176 INFO l.l.c.JavaLogger [restartedMain] Custom SQL executed
2024-01-19 15:21:57,180 INFO l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/002-add-api_appel_event-table.sql::raw::includeAll ran successfully in 20ms
2024-01-19 15:21:57,194 INFO l.l.c.JavaLogger [restartedMain] Custom SQL executed
2024-01-19 15:21:57,198 INFO l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/003-alter-table-doctor.sql::raw::includeAll ran successfully in 12ms
2024-01-19 15:21:57,206 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-19 15:21:57,206 INFO l.l.c.JavaLogger [restartedMain] Run:                          3
2024-01-19 15:21:57,206 INFO l.l.c.JavaLogger [restartedMain] Previously run:               0
2024-01-19 15:21:57,206 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-19 15:21:57,206 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-19 15:21:57,206 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-19 15:21:57,207 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-19 15:21:57,208 INFO l.l.c.JavaLogger [restartedMain] Update command completed successfully.
2024-01-19 15:21:57,214 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-19 15:21:57,215 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-19 15:21:57,269 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-19 15:21:57,301 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-19 15:21:57,323 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-19 15:21:57,460 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-19 15:21:57,486 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-19 15:21:58,023 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-19 15:21:58,052 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 15:21:58,489 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-19 15:21:58,496 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-19 15:21:58,680 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@36551522, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@60fbbcf3, org.springframework.security.web.context.SecurityContextHolderFilter@40ee2c64, org.springframework.security.web.header.HeaderWriterFilter@19bd3fb4, org.springframework.web.filter.CorsFilter@3d2c8cfe, org.springframework.security.web.csrf.CsrfFilter@1ee4c9f2, org.springframework.security.web.authentication.logout.LogoutFilter@7360544e, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@213f96a4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c3ad107, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4bcf1d6e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@58ab4578, org.springframework.security.web.session.SessionManagementFilter@2e67a7c6, org.springframework.security.web.access.ExceptionTranslationFilter@5d3d695d, org.springframework.security.web.access.intercept.AuthorizationFilter@65528d0d]
2024-01-19 15:21:59,006 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-19 15:21:59,033 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-19 15:21:59,055 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-19 15:21:59,061 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 3.881 seconds (process running for 4.958)
2024-01-19 15:35:49,632 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-19 15:35:49,635 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-19 15:35:49,638 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-22 08:39:56,222 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 8828 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:39:56,231 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:39:56,289 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 08:39:56,289 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 08:39:57,358 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:39:57,519 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 155 ms. Found 2 JPA repository interfaces.
2024-01-22 08:39:57,799 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 08:39:57,826 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 08:39:58,150 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 08:39:58,159 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 08:39:58,161 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 08:39:58,162 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 08:39:58,255 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 08:39:58,256 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1965 ms
2024-01-22 08:39:58,394 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 08:39:58,554 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@74c3fdf1
2024-01-22 08:39:58,555 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 08:39:58,691 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 08:39:58,873 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:39:58,915 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:39:58,951 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 08:39:58,952 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 08:39:58,952 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 08:39:58,952 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 08:39:58,953 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 08:39:58,953 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 08:39:58,953 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 08:39:58,980 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 08:39:58,983 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 08:39:59,067 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 08:39:59,142 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-22 08:39:59,202 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 08:39:59,462 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 08:39:59,508 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 08:40:00,269 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 08:40:00,311 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-22 08:40:00,936 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-22 08:40:00,946 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-22 08:40:01,216 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1f168eb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4ed19cc5, org.springframework.security.web.context.SecurityContextHolderFilter@44f96d5f, org.springframework.security.web.header.HeaderWriterFilter@59e3e3ae, org.springframework.web.filter.CorsFilter@65ecf37f, org.springframework.security.web.csrf.CsrfFilter@22ed973c, org.springframework.security.web.authentication.logout.LogoutFilter@1ba38020, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@38127090, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@995c27c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@602da101, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5c65c00c, org.springframework.security.web.session.SessionManagementFilter@2437b539, org.springframework.security.web.access.ExceptionTranslationFilter@6fe58523, org.springframework.security.web.access.intercept.AuthorizationFilter@11f55058]
2024-01-22 08:40:01,667 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-22 08:40:01,704 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-22 08:40:01,729 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-22 08:40:01,735 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 6.024 seconds (process running for 8.788)
2024-01-22 08:41:59,479 INFO o.s.o.j.AbstractEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-22 08:41:59,483 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-01-22 08:41:59,488 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2024-01-22 08:42:08,532 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:42:08,534 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:42:08,583 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 08:42:08,584 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 08:42:09,496 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:42:09,639 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 139 ms. Found 2 JPA repository interfaces.
2024-01-22 08:42:09,956 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 08:42:09,977 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 08:42:10,254 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 08:42:10,262 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 08:42:10,263 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 08:42:10,264 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 08:42:10,349 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 08:42:10,350 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1764 ms
2024-01-22 08:42:10,461 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 08:42:10,615 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@bb7fe22
2024-01-22 08:42:10,617 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 08:42:10,754 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 08:42:10,940 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:42:10,988 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:42:11,009 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 08:42:11,010 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 08:42:11,010 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 08:42:11,010 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 08:42:11,010 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 08:42:11,010 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 08:42:11,010 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 08:42:11,042 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 08:42:11,045 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 08:42:11,119 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 08:42:11,172 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-22 08:42:11,211 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 08:42:11,428 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 08:42:11,467 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 08:42:12,174 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 08:42:12,213 INFO o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-01-22 08:42:12,812 WARN o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-01-22 08:42:12,822 DEBUG o.s.s.c.a.a.b.AuthenticationManagerBuilder [restartedMain] No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-01-22 08:42:13,095 INFO o.s.s.w.DefaultSecurityFilterChain [restartedMain] Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1659ba00, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@64ce7d67, org.springframework.security.web.context.SecurityContextHolderFilter@61f3768e, org.springframework.security.web.header.HeaderWriterFilter@548ba807, org.springframework.web.filter.CorsFilter@78e15720, org.springframework.security.web.csrf.CsrfFilter@1db698c6, org.springframework.security.web.authentication.logout.LogoutFilter@5e556f07, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@56595d5b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@e56cf96, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5e8456dc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@a188f01, org.springframework.security.web.session.SessionManagementFilter@602da101, org.springframework.security.web.access.ExceptionTranslationFilter@6d897223, org.springframework.security.web.access.intercept.AuthorizationFilter@4bb9011d]
2024-01-22 08:42:13,574 INFO o.s.b.d.a.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2024-01-22 08:42:13,610 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8090"]
2024-01-22 08:42:13,632 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat started on port 8090 (http) with context path '/api'
2024-01-22 08:42:13,640 INFO o.s.b.StartupInfoLogger [restartedMain] Started AppApplication in 5.474 seconds (process running for 7.955)
2024-01-22 08:45:50,724 INFO o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener [File Watcher] Restarting due to 3 class path changes (0 additions, 3 deletions, 0 modifications)
2024-01-22 08:45:50,729 INFO o.a.j.l.DirectJDKLog [Thread-5] Stopping ProtocolHandler ["http-nio-8090"]
2024-01-22 08:45:50,754 INFO o.s.o.j.AbstractEntityManagerFactoryBean [Thread-5] Closing JPA EntityManagerFactory for persistence unit 'default'
2024-01-22 08:45:50,757 INFO c.z.h.HikariDataSource [Thread-5] HikariPool-1 - Shutdown initiated...
2024-01-22 08:45:50,761 INFO c.z.h.HikariDataSource [Thread-5] HikariPool-1 - Shutdown completed.
2024-01-22 08:45:50,843 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:45:50,844 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:45:51,048 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:45:51,056 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: java.lang.TypeNotPresentException: Type com.medico.app.domain.Doctor not present
2024-01-22 08:45:51,060 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 08:45:51,077 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
java.lang.TypeNotPresentException: Type com.medico.app.domain.Doctor not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117)
	at java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95)
	at java.base/java.lang.Class.getGenericInterfaces(Class.java:1211)
	at org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:517)
	at org.springframework.core.ResolvableType.as(ResolvableType.java:465)
	at org.springframework.data.util.TypeDiscoverer.getSuperTypeInformation(TypeDiscoverer.java:254)
	at org.springframework.data.util.ClassTypeInformation.getSuperTypeInformation(ClassTypeInformation.java:36)
	at org.springframework.data.util.TypeInformation.getRequiredSuperTypeInformation(TypeInformation.java:327)
	at org.springframework.data.repository.core.support.DefaultRepositoryMetadata.<init>(DefaultRepositoryMetadata.java:55)
	at org.springframework.data.repository.core.support.AbstractRepositoryMetadata.getMetadata(AbstractRepositoryMetadata.java:77)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:91)
	at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:164)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:376)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:375)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:428)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:289)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:775)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:597)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.ClassNotFoundException: com.medico.app.domain.Doctor
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 41 common frames omitted
2024-01-22 08:45:56,716 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:45:56,717 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:45:56,919 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:45:56,933 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 13 ms. Found 2 JPA repository interfaces.
2024-01-22 08:45:56,994 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 08:45:56,995 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 08:45:57,030 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 08:45:57,031 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 08:45:57,031 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 08:45:57,031 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 08:45:57,070 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 08:45:57,071 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 352 ms
2024-01-22 08:45:57,089 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-2 - Starting...
2024-01-22 08:45:57,119 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@6f6a18b8
2024-01-22 08:45:57,119 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-2 - Start completed.
2024-01-22 08:45:57,127 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 08:45:57,147 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:45:57,163 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 08:45:57,163 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 08:45:57,164 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 08:45:57,164 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 08:45:57,164 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 08:45:57,164 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 08:45:57,164 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 08:45:57,172 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 08:45:57,174 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 08:45:57,186 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 08:45:57,190 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 08:45:57,195 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 08:45:57,196 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 08:45:57,237 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 08:45:57,247 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:45:57,247 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:45:57,247 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-2 - Shutdown initiated...
2024-01-22 08:45:57,280 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-2 - Shutdown completed.
2024-01-22 08:45:57,280 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 08:45:57,286 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 08:45:57,290 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 08:46:34,553 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:46:34,554 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:46:35,077 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:46:35,107 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: java.lang.TypeNotPresentException: Type com.medico.app.domain.Doctor not present
2024-01-22 08:46:35,114 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 08:46:35,119 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
java.lang.TypeNotPresentException: Type com.medico.app.domain.Doctor not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117)
	at java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95)
	at java.base/java.lang.Class.getGenericInterfaces(Class.java:1211)
	at org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:517)
	at org.springframework.core.ResolvableType.as(ResolvableType.java:465)
	at org.springframework.data.util.TypeDiscoverer.getSuperTypeInformation(TypeDiscoverer.java:254)
	at org.springframework.data.util.ClassTypeInformation.getSuperTypeInformation(ClassTypeInformation.java:36)
	at org.springframework.data.util.TypeInformation.getRequiredSuperTypeInformation(TypeInformation.java:327)
	at org.springframework.data.repository.core.support.DefaultRepositoryMetadata.<init>(DefaultRepositoryMetadata.java:55)
	at org.springframework.data.repository.core.support.AbstractRepositoryMetadata.getMetadata(AbstractRepositoryMetadata.java:77)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:91)
	at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:164)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:376)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:375)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:428)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:289)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:775)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:597)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.ClassNotFoundException: com.medico.app.domain.Doctor
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 41 common frames omitted
2024-01-22 08:53:02,765 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:53:02,766 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:53:03,325 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:53:03,348 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 22 ms. Found 2 JPA repository interfaces.
2024-01-22 08:53:03,460 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 08:53:03,461 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 08:53:03,529 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 08:53:03,530 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 08:53:03,530 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 08:53:03,530 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 08:53:03,620 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 08:53:03,620 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 847 ms
2024-01-22 08:53:03,648 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-3 - Starting...
2024-01-22 08:53:03,700 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-3 - Added connection org.postgresql.jdbc.PgConnection@69164366
2024-01-22 08:53:03,700 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-3 - Start completed.
2024-01-22 08:53:03,719 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 08:53:03,753 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:53:03,785 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 08:53:03,786 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 08:53:03,786 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 08:53:03,786 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 08:53:03,786 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 08:53:03,786 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 08:53:03,787 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 08:53:03,803 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 08:53:03,806 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 08:53:03,830 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 08:53:03,837 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 08:53:03,851 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 08:53:03,853 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 08:53:03,951 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 08:53:03,968 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:53:03,969 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:53:03,969 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-3 - Shutdown initiated...
2024-01-22 08:53:03,993 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-3 - Shutdown completed.
2024-01-22 08:53:03,994 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 08:53:04,000 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 08:53:04,005 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 08:55:26,719 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:55:26,719 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:55:26,981 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:55:26,998 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 16 ms. Found 2 JPA repository interfaces.
2024-01-22 08:55:27,075 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 08:55:27,076 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 08:55:27,129 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 08:55:27,129 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 08:55:27,129 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 08:55:27,130 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 08:55:27,204 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 08:55:27,204 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 482 ms
2024-01-22 08:55:27,241 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-4 - Starting...
2024-01-22 08:55:27,299 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-4 - Added connection org.postgresql.jdbc.PgConnection@6b65c519
2024-01-22 08:55:27,300 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-4 - Start completed.
2024-01-22 08:55:27,312 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 08:55:27,342 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:55:27,365 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 08:55:27,365 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 08:55:27,365 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 08:55:27,365 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 08:55:27,366 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 08:55:27,366 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 08:55:27,366 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 08:55:27,377 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 08:55:27,379 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 08:55:27,396 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 08:55:27,401 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 08:55:27,407 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 08:55:27,409 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 08:55:27,424 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Entity 'com.medico.app.domain.City' has no identifier (every '@Entity' class must declare or inherit at least one '@Id' or '@EmbeddedId' property)
2024-01-22 08:55:27,424 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Entity 'com.medico.app.domain.City' has no identifier (every '@Entity' class must declare or inherit at least one '@Id' or '@EmbeddedId' property)
2024-01-22 08:55:27,425 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-4 - Shutdown initiated...
2024-01-22 08:55:27,451 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-4 - Shutdown completed.
2024-01-22 08:55:27,453 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 08:55:27,459 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 08:55:27,463 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Entity 'com.medico.app.domain.City' has no identifier (every '@Entity' class must declare or inherit at least one '@Id' or '@EmbeddedId' property)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Entity 'com.medico.app.domain.City' has no identifier (every '@Entity' class must declare or inherit at least one '@Id' or '@EmbeddedId' property)
	at org.hibernate.boot.model.internal.InheritanceState.determineDefaultAccessType(InheritanceState.java:279)
	at org.hibernate.boot.model.internal.InheritanceState.getElementsToProcess(InheritanceState.java:215)
	at org.hibernate.boot.model.internal.InheritanceState.postProcess(InheritanceState.java:160)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:296)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 08:56:22,162 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:56:22,162 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:56:22,338 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:56:22,351 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 12 ms. Found 2 JPA repository interfaces.
2024-01-22 08:56:22,397 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 08:56:22,398 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 08:56:22,428 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 08:56:22,428 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 08:56:22,428 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 08:56:22,428 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 08:56:22,467 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 08:56:22,467 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 303 ms
2024-01-22 08:56:22,487 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-5 - Starting...
2024-01-22 08:56:22,517 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-5 - Added connection org.postgresql.jdbc.PgConnection@30f38d8b
2024-01-22 08:56:22,517 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-5 - Start completed.
2024-01-22 08:56:22,525 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 08:56:22,541 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:56:22,556 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 08:56:22,556 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 08:56:22,557 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 08:56:22,557 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 08:56:22,557 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 08:56:22,557 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 08:56:22,557 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 08:56:22,568 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 08:56:22,570 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 08:56:22,581 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 08:56:22,584 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 08:56:22,589 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 08:56:22,590 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 08:56:22,627 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 08:56:22,634 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:56:22,635 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:56:22,635 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-5 - Shutdown initiated...
2024-01-22 08:56:22,658 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-5 - Shutdown completed.
2024-01-22 08:56:22,658 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 08:56:22,662 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 08:56:22,665 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 08:56:49,061 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:56:49,063 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:56:49,347 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:56:49,365 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 17 ms. Found 2 JPA repository interfaces.
2024-01-22 08:56:49,425 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 08:56:49,426 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 08:56:49,463 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 08:56:49,463 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 08:56:49,464 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 08:56:49,464 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 08:56:49,517 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 08:56:49,517 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 446 ms
2024-01-22 08:56:49,539 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-6 - Starting...
2024-01-22 08:56:49,575 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-6 - Added connection org.postgresql.jdbc.PgConnection@7602fff9
2024-01-22 08:56:49,575 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-6 - Start completed.
2024-01-22 08:56:49,601 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 08:56:49,629 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:56:49,649 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 08:56:49,650 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 08:56:49,650 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 08:56:49,650 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 08:56:49,650 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 08:56:49,650 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 08:56:49,650 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 08:56:49,659 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 08:56:49,661 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 08:56:49,677 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 08:56:49,682 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 08:56:49,690 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 08:56:49,692 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 08:56:49,745 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 08:56:49,757 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:56:49,757 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:56:49,757 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-6 - Shutdown initiated...
2024-01-22 08:56:49,774 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-6 - Shutdown completed.
2024-01-22 08:56:49,775 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 08:56:49,780 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 08:56:49,784 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 08:58:18,259 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:58:18,260 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:58:18,701 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:58:18,752 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 50 ms. Found 2 JPA repository interfaces.
2024-01-22 08:58:18,885 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 08:58:18,887 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 08:58:18,968 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 08:58:18,969 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 08:58:18,969 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 08:58:18,969 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 08:58:19,047 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 08:58:19,047 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 785 ms
2024-01-22 08:58:19,076 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-7 - Starting...
2024-01-22 08:58:19,129 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-7 - Added connection org.postgresql.jdbc.PgConnection@15995b23
2024-01-22 08:58:19,130 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-7 - Start completed.
2024-01-22 08:58:19,142 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 08:58:19,170 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:58:19,196 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 08:58:19,196 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 08:58:19,196 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 08:58:19,197 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 08:58:19,197 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 08:58:19,197 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 08:58:19,197 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 08:58:19,212 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 08:58:19,215 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 08:58:19,234 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 08:58:19,241 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 08:58:19,249 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 08:58:19,250 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 08:58:19,325 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 08:58:19,343 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:58:19,343 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:58:19,343 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-7 - Shutdown initiated...
2024-01-22 08:58:19,368 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-7 - Shutdown completed.
2024-01-22 08:58:19,368 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 08:58:19,379 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 08:58:19,383 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 08:58:25,044 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:58:25,044 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:58:25,258 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:58:25,274 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 15 ms. Found 2 JPA repository interfaces.
2024-01-22 08:58:25,330 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 08:58:25,331 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 08:58:25,363 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 08:58:25,364 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 08:58:25,364 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 08:58:25,364 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 08:58:25,421 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 08:58:25,421 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 375 ms
2024-01-22 08:58:25,445 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-8 - Starting...
2024-01-22 08:58:25,477 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-8 - Added connection org.postgresql.jdbc.PgConnection@16e06675
2024-01-22 08:58:25,477 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-8 - Start completed.
2024-01-22 08:58:25,488 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 08:58:25,513 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:58:25,542 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 08:58:25,543 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 08:58:25,543 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 08:58:25,543 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 08:58:25,543 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 08:58:25,543 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 08:58:25,543 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 08:58:25,556 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 08:58:25,558 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 08:58:25,576 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 08:58:25,581 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 08:58:25,587 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 08:58:25,593 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 08:58:25,690 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 08:58:25,703 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:58:25,703 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:58:25,704 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-8 - Shutdown initiated...
2024-01-22 08:58:25,742 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-8 - Shutdown completed.
2024-01-22 08:58:25,742 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 08:58:25,749 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 08:58:25,752 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 08:58:49,128 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:58:49,128 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:58:49,309 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:58:49,323 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 13 ms. Found 2 JPA repository interfaces.
2024-01-22 08:58:49,374 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 08:58:49,375 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 08:58:49,408 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 08:58:49,408 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 08:58:49,408 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 08:58:49,408 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 08:58:49,455 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 08:58:49,455 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 325 ms
2024-01-22 08:58:49,476 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-9 - Starting...
2024-01-22 08:58:49,509 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-9 - Added connection org.postgresql.jdbc.PgConnection@5761e393
2024-01-22 08:58:49,510 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-9 - Start completed.
2024-01-22 08:58:49,518 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 08:58:49,537 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:58:49,553 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 08:58:49,553 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 08:58:49,554 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 08:58:49,554 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 08:58:49,554 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 08:58:49,554 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 08:58:49,554 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 08:58:49,564 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 08:58:49,566 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 08:58:49,578 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 08:58:49,582 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 08:58:49,587 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 08:58:49,588 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 08:58:49,621 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 08:58:49,631 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:58:49,631 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:58:49,632 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-9 - Shutdown initiated...
2024-01-22 08:58:49,656 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-9 - Shutdown completed.
2024-01-22 08:58:49,656 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 08:58:49,661 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 08:58:49,664 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 08:58:53,355 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:58:53,356 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:58:53,741 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:58:53,771 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 29 ms. Found 2 JPA repository interfaces.
2024-01-22 08:58:53,843 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 08:58:53,844 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 08:58:53,891 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 08:58:53,891 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 08:58:53,891 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 08:58:53,891 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 08:58:54,013 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 08:58:54,013 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 653 ms
2024-01-22 08:58:54,046 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-10 - Starting...
2024-01-22 08:58:54,095 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-10 - Added connection org.postgresql.jdbc.PgConnection@22460f9e
2024-01-22 08:58:54,096 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-10 - Start completed.
2024-01-22 08:58:54,113 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 08:58:54,152 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:58:54,184 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 08:58:54,184 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 08:58:54,184 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 08:58:54,184 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 08:58:54,184 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 08:58:54,184 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 08:58:54,184 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 08:58:54,223 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 08:58:54,226 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 08:58:54,252 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 08:58:54,258 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 08:58:54,272 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 08:58:54,274 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 08:58:54,334 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 08:58:54,353 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:58:54,354 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:58:54,354 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-10 - Shutdown initiated...
2024-01-22 08:58:54,372 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-10 - Shutdown completed.
2024-01-22 08:58:54,373 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 08:58:54,381 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 08:58:54,385 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 08:59:05,208 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 08:59:05,208 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 08:59:05,482 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 08:59:05,501 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 18 ms. Found 2 JPA repository interfaces.
2024-01-22 08:59:05,572 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 08:59:05,573 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 08:59:05,610 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 08:59:05,611 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 08:59:05,611 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 08:59:05,611 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 08:59:05,670 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 08:59:05,671 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 461 ms
2024-01-22 08:59:05,693 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-11 - Starting...
2024-01-22 08:59:05,726 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-11 - Added connection org.postgresql.jdbc.PgConnection@2bf89087
2024-01-22 08:59:05,727 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-11 - Start completed.
2024-01-22 08:59:05,742 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 08:59:05,772 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 08:59:05,801 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 08:59:05,801 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 08:59:05,801 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 08:59:05,801 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 08:59:05,801 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 08:59:05,801 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 08:59:05,801 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 08:59:05,811 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 08:59:05,813 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 08:59:05,837 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 08:59:05,844 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 08:59:05,853 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 08:59:05,854 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 08:59:05,907 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 08:59:05,922 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:59:05,923 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 08:59:05,923 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-11 - Shutdown initiated...
2024-01-22 08:59:05,970 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-11 - Shutdown completed.
2024-01-22 08:59:05,971 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 08:59:05,979 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 08:59:05,984 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 09:04:23,982 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:04:23,982 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:04:24,434 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:04:24,473 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 39 ms. Found 2 JPA repository interfaces.
2024-01-22 09:04:24,573 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:04:24,575 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:04:24,625 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:04:24,625 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:04:24,625 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:04:24,625 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:04:24,696 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:04:24,696 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 709 ms
2024-01-22 09:04:24,723 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-12 - Starting...
2024-01-22 09:04:24,768 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-12 - Added connection org.postgresql.jdbc.PgConnection@1a670acb
2024-01-22 09:04:24,769 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-12 - Start completed.
2024-01-22 09:04:24,779 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:04:24,803 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:04:24,824 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:04:24,825 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:04:24,825 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:04:24,825 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:04:24,825 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:04:24,825 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:04:24,825 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:04:24,835 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:04:24,837 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:04:24,855 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:04:24,861 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:04:24,868 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:04:24,869 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:04:24,942 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Collection 'com.medico.app.domain.Region.cities' is 'mappedBy' a property named 'region' which does not exist in the target entity 'com.medico.app.domain.City'
2024-01-22 09:04:24,943 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Collection 'com.medico.app.domain.Region.cities' is 'mappedBy' a property named 'region' which does not exist in the target entity 'com.medico.app.domain.City'
2024-01-22 09:04:24,943 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-12 - Shutdown initiated...
2024-01-22 09:04:24,974 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-12 - Shutdown completed.
2024-01-22 09:04:24,975 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:04:24,980 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:04:24,984 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Collection 'com.medico.app.domain.Region.cities' is 'mappedBy' a property named 'region' which does not exist in the target entity 'com.medico.app.domain.City'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Collection 'com.medico.app.domain.Region.cities' is 'mappedBy' a property named 'region' which does not exist in the target entity 'com.medico.app.domain.City'
	at org.hibernate.boot.model.internal.CollectionBinder.isReversePropertyInJoin(CollectionBinder.java:1611)
	at org.hibernate.boot.model.internal.CollectionBinder.noAssociationTable(CollectionBinder.java:1625)
	at org.hibernate.boot.model.internal.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:1586)
	at org.hibernate.boot.model.internal.CollectionBinder$1.secondPass(CollectionBinder.java:1577)
	at org.hibernate.boot.model.internal.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1815)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1774)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:331)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 09:05:26,921 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:05:26,922 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:05:27,149 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:05:27,164 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 14 ms. Found 2 JPA repository interfaces.
2024-01-22 09:05:27,219 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:05:27,220 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:05:27,256 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:05:27,256 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:05:27,256 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:05:27,256 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:05:27,301 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:05:27,301 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 377 ms
2024-01-22 09:05:27,320 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-13 - Starting...
2024-01-22 09:05:27,354 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-13 - Added connection org.postgresql.jdbc.PgConnection@60b37564
2024-01-22 09:05:27,354 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-13 - Start completed.
2024-01-22 09:05:27,361 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:05:27,378 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:05:27,392 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:05:27,392 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:05:27,392 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:05:27,392 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:05:27,393 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:05:27,393 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:05:27,393 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:05:27,401 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:05:27,403 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:05:27,415 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:05:27,419 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:05:27,424 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:05:27,425 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:05:27,447 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Type com.medico.app.domain.City not present
2024-01-22 09:05:27,447 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-13 - Shutdown initiated...
2024-01-22 09:05:27,448 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-13 - Shutdown completed.
2024-01-22 09:05:27,448 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:05:27,453 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:05:27,457 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Type com.medico.app.domain.City not present
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.TypeNotPresentException: Type com.medico.app.domain.City not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.repository.MethodRepository.computeReturnType(MethodRepository.java:75)
	at java.base/sun.reflect.generics.repository.MethodRepository.getReturnType(MethodRepository.java:66)
	at java.base/java.lang.reflect.Method.getGenericReturnType(Method.java:295)
	at org.hibernate.annotations.common.reflection.java.JavaXClass.getDeclaredMethodProperties(JavaXClass.java:139)
	at org.hibernate.annotations.common.reflection.java.JavaXClass.getDeclaredProperties(JavaXClass.java:175)
	at org.hibernate.annotations.common.reflection.java.JavaXClass.getDeclaredProperties(JavaXClass.java:167)
	at org.hibernate.boot.model.internal.InheritanceState.determineDefaultAccessType(InheritanceState.java:259)
	at org.hibernate.boot.model.internal.InheritanceState.getElementsToProcess(InheritanceState.java:215)
	at org.hibernate.boot.model.internal.InheritanceState.postProcess(InheritanceState.java:160)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:296)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: java.lang.ClassNotFoundException: com.medico.app.domain.City
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 50 common frames omitted
2024-01-22 09:05:32,099 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:05:32,099 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:05:32,454 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:05:32,496 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 41 ms. Found 2 JPA repository interfaces.
2024-01-22 09:05:32,578 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:05:32,579 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:05:32,625 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:05:32,625 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:05:32,625 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:05:32,625 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:05:32,701 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:05:32,701 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 599 ms
2024-01-22 09:05:32,728 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-14 - Starting...
2024-01-22 09:05:32,763 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-14 - Added connection org.postgresql.jdbc.PgConnection@517798cc
2024-01-22 09:05:32,763 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-14 - Start completed.
2024-01-22 09:05:32,776 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:05:32,807 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:05:32,831 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:05:32,832 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:05:32,832 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:05:32,832 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:05:32,832 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:05:32,832 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:05:32,832 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:05:32,847 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:05:32,849 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:05:32,869 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:05:32,875 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:05:32,886 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:05:32,888 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:05:33,166 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 09:05:33,188 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 09:05:33,188 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 09:05:33,188 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-14 - Shutdown initiated...
2024-01-22 09:05:33,257 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-14 - Shutdown completed.
2024-01-22 09:05:33,257 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:05:33,267 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:05:33,272 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 09:11:00,408 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:11:00,408 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:11:00,784 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:11:00,812 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 27 ms. Found 2 JPA repository interfaces.
2024-01-22 09:11:00,966 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:11:00,967 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:11:01,073 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:11:01,073 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:11:01,073 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:11:01,074 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:11:01,190 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:11:01,190 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 780 ms
2024-01-22 09:11:01,217 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-15 - Starting...
2024-01-22 09:11:01,258 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-15 - Added connection org.postgresql.jdbc.PgConnection@3f71aa38
2024-01-22 09:11:01,258 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-15 - Start completed.
2024-01-22 09:11:01,266 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:11:01,286 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:11:01,304 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:11:01,304 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:11:01,304 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:11:01,304 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:11:01,304 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:11:01,304 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:11:01,304 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:11:01,316 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:11:01,317 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:11:01,329 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:11:01,332 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:11:01,337 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:11:01,338 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:11:01,367 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 09:11:01,376 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 09:11:01,376 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 09:11:01,377 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-15 - Shutdown initiated...
2024-01-22 09:11:01,415 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-15 - Shutdown completed.
2024-01-22 09:11:01,415 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:11:01,421 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:11:01,433 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 09:11:06,243 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:11:06,244 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:11:07,172 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:11:07,237 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 64 ms. Found 2 JPA repository interfaces.
2024-01-22 09:11:07,338 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:11:07,339 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:11:07,396 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:11:07,397 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:11:07,397 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:11:07,397 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:11:07,472 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:11:07,472 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1223 ms
2024-01-22 09:11:07,504 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-16 - Starting...
2024-01-22 09:11:07,537 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-16 - Added connection org.postgresql.jdbc.PgConnection@350eedd5
2024-01-22 09:11:07,537 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-16 - Start completed.
2024-01-22 09:11:07,551 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:11:07,581 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:11:07,611 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:11:07,612 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:11:07,612 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:11:07,612 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:11:07,612 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:11:07,612 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:11:07,612 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:11:07,640 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:11:07,642 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:11:07,668 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:11:07,674 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:11:07,682 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:11:07,684 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:11:07,771 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 09:11:07,785 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 09:11:07,785 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
2024-01-22 09:11:07,785 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-16 - Shutdown initiated...
2024-01-22 09:11:07,830 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-16 - Shutdown completed.
2024-01-22 09:11:07,831 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:11:07,837 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:11:07,841 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [email] in table [public.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 09:12:09,954 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:12:09,954 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:12:10,146 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:12:10,155 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: java.lang.TypeNotPresentException: Type com.medico.app.domain.Doctor not present
2024-01-22 09:12:10,158 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:12:10,160 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
java.lang.TypeNotPresentException: Type com.medico.app.domain.Doctor not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117)
	at java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95)
	at java.base/java.lang.Class.getGenericInterfaces(Class.java:1211)
	at org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:517)
	at org.springframework.core.ResolvableType.as(ResolvableType.java:465)
	at org.springframework.data.util.TypeDiscoverer.getSuperTypeInformation(TypeDiscoverer.java:254)
	at org.springframework.data.util.ClassTypeInformation.getSuperTypeInformation(ClassTypeInformation.java:36)
	at org.springframework.data.util.TypeInformation.getRequiredSuperTypeInformation(TypeInformation.java:327)
	at org.springframework.data.repository.core.support.DefaultRepositoryMetadata.<init>(DefaultRepositoryMetadata.java:55)
	at org.springframework.data.repository.core.support.AbstractRepositoryMetadata.getMetadata(AbstractRepositoryMetadata.java:77)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:91)
	at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:164)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:376)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:375)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:428)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:289)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:775)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:597)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.ClassNotFoundException: com.medico.app.domain.Doctor
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 41 common frames omitted
2024-01-22 09:15:38,048 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:15:38,049 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:15:38,347 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:15:38,367 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 20 ms. Found 2 JPA repository interfaces.
2024-01-22 09:15:38,458 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:15:38,460 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:15:38,514 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:15:38,515 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:15:38,515 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:15:38,515 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:15:38,582 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:15:38,582 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 531 ms
2024-01-22 09:15:38,606 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-17 - Starting...
2024-01-22 09:15:38,656 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-17 - Added connection org.postgresql.jdbc.PgConnection@4a12d607
2024-01-22 09:15:38,656 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-17 - Start completed.
2024-01-22 09:15:38,672 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:15:38,698 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:15:38,720 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:15:38,721 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:15:38,721 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:15:38,721 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:15:38,721 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:15:38,721 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:15:38,721 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:15:38,731 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:15:38,733 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:15:38,750 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:15:38,756 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:15:38,763 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:15:38,764 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:15:38,814 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Association 'com.medico.app.domain.Doctor.workSpaces' targets the type 'com.medico.app.domain.WorkSpace' which is not an '@Entity' type
2024-01-22 09:15:38,814 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Association 'com.medico.app.domain.Doctor.workSpaces' targets the type 'com.medico.app.domain.WorkSpace' which is not an '@Entity' type
2024-01-22 09:15:38,814 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-17 - Shutdown initiated...
2024-01-22 09:15:38,825 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-17 - Shutdown completed.
2024-01-22 09:15:38,825 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:15:38,837 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:15:38,845 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Association 'com.medico.app.domain.Doctor.workSpaces' targets the type 'com.medico.app.domain.WorkSpace' which is not an '@Entity' type
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Association 'com.medico.app.domain.Doctor.workSpaces' targets the type 'com.medico.app.domain.WorkSpace' which is not an '@Entity' type
	at org.hibernate.boot.model.internal.CollectionBinder.detectManyToManyProblems(CollectionBinder.java:2547)
	at org.hibernate.boot.model.internal.CollectionBinder.bindManyToManySecondPass(CollectionBinder.java:2144)
	at org.hibernate.boot.model.internal.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:1593)
	at org.hibernate.boot.model.internal.CollectionBinder$1.secondPass(CollectionBinder.java:1577)
	at org.hibernate.boot.model.internal.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1815)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1774)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:331)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 09:18:59,727 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:18:59,727 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:18:59,917 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:18:59,936 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 18 ms. Found 2 JPA repository interfaces.
2024-01-22 09:18:59,987 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:18:59,988 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:19:00,059 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:19:00,059 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:19:00,060 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:19:00,060 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:19:00,102 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:19:00,102 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 373 ms
2024-01-22 09:19:00,123 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-18 - Starting...
2024-01-22 09:19:00,154 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-18 - Added connection org.postgresql.jdbc.PgConnection@7062a07c
2024-01-22 09:19:00,154 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-18 - Start completed.
2024-01-22 09:19:00,162 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:19:00,178 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:19:00,192 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:19:00,192 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:19:00,192 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:19:00,192 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:19:00,192 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:19:00,192 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:19:00,192 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:19:00,204 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:19:00,205 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:19:00,220 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:19:00,225 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:19:00,231 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:19:00,233 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:19:00,247 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Type com.medico.app.domain.WorkSpace not present
2024-01-22 09:19:00,247 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-18 - Shutdown initiated...
2024-01-22 09:19:00,248 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-18 - Shutdown completed.
2024-01-22 09:19:00,249 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:19:00,253 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:19:00,256 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Type com.medico.app.domain.WorkSpace not present
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.TypeNotPresentException: Type com.medico.app.domain.WorkSpace not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.repository.MethodRepository.computeReturnType(MethodRepository.java:75)
	at java.base/sun.reflect.generics.repository.MethodRepository.getReturnType(MethodRepository.java:66)
	at java.base/java.lang.reflect.Method.getGenericReturnType(Method.java:295)
	at org.hibernate.annotations.common.reflection.java.JavaXClass.getDeclaredMethodProperties(JavaXClass.java:139)
	at org.hibernate.annotations.common.reflection.java.JavaXClass.getDeclaredProperties(JavaXClass.java:175)
	at org.hibernate.annotations.common.reflection.java.JavaXClass.getDeclaredProperties(JavaXClass.java:167)
	at org.hibernate.boot.model.internal.InheritanceState.determineDefaultAccessType(InheritanceState.java:259)
	at org.hibernate.boot.model.internal.InheritanceState.getElementsToProcess(InheritanceState.java:215)
	at org.hibernate.boot.model.internal.InheritanceState.postProcess(InheritanceState.java:160)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:296)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: java.lang.ClassNotFoundException: com.medico.app.domain.WorkSpace
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 50 common frames omitted
2024-01-22 09:19:04,889 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:19:04,889 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:19:05,109 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:19:05,123 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 13 ms. Found 2 JPA repository interfaces.
2024-01-22 09:19:05,174 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:19:05,175 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:19:05,207 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:19:05,208 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:19:05,208 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:19:05,208 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:19:05,253 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:19:05,253 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 361 ms
2024-01-22 09:19:05,273 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-19 - Starting...
2024-01-22 09:19:05,296 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-19 - Added connection org.postgresql.jdbc.PgConnection@308eb0e1
2024-01-22 09:19:05,296 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-19 - Start completed.
2024-01-22 09:19:05,306 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:19:05,326 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:19:05,349 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:19:05,349 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:19:05,349 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:19:05,349 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:19:05,350 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:19:05,350 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:19:05,350 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:19:05,359 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:19:05,361 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:19:05,381 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:19:05,385 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:19:05,391 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:19:05,393 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:19:05,416 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:19:05,417 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:19:05,417 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-19 - Shutdown initiated...
2024-01-22 09:19:05,455 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-19 - Shutdown completed.
2024-01-22 09:19:05,455 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:19:05,460 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:19:05,463 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.hibernate.boot.model.internal.BasicValueBinder.prepareBasicAttribute(BasicValueBinder.java:805)
	at org.hibernate.boot.model.internal.BasicValueBinder.setType(BasicValueBinder.java:374)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyAndValue(PropertyBinder.java:261)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:297)
	at org.hibernate.boot.model.internal.PropertyBinder.createBasicBinder(PropertyBinder.java:1169)
	at org.hibernate.boot.model.internal.PropertyBinder.bindBasic(PropertyBinder.java:1071)
	at org.hibernate.boot.model.internal.PropertyBinder.bindProperty(PropertyBinder.java:890)
	at org.hibernate.boot.model.internal.PropertyBinder.buildProperty(PropertyBinder.java:788)
	at org.hibernate.boot.model.internal.PropertyBinder.processElementAnnotations(PropertyBinder.java:709)
	at org.hibernate.boot.model.internal.EntityBinder.processIdPropertiesIfNotAlready(EntityBinder.java:977)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:305)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 09:25:05,806 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:25:05,806 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:25:06,016 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:25:06,026 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: java.lang.TypeNotPresentException: Type com.medico.app.domain.Doctor not present
2024-01-22 09:25:06,029 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:25:06,032 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
java.lang.TypeNotPresentException: Type com.medico.app.domain.Doctor not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117)
	at java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95)
	at java.base/java.lang.Class.getGenericInterfaces(Class.java:1211)
	at org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:517)
	at org.springframework.core.ResolvableType.as(ResolvableType.java:465)
	at org.springframework.data.util.TypeDiscoverer.getSuperTypeInformation(TypeDiscoverer.java:254)
	at org.springframework.data.util.ClassTypeInformation.getSuperTypeInformation(ClassTypeInformation.java:36)
	at org.springframework.data.util.TypeInformation.getRequiredSuperTypeInformation(TypeInformation.java:327)
	at org.springframework.data.repository.core.support.DefaultRepositoryMetadata.<init>(DefaultRepositoryMetadata.java:55)
	at org.springframework.data.repository.core.support.AbstractRepositoryMetadata.getMetadata(AbstractRepositoryMetadata.java:77)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:91)
	at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:164)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:376)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:375)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:428)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:289)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:775)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:597)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.ClassNotFoundException: com.medico.app.domain.Doctor
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 41 common frames omitted
2024-01-22 09:25:11,706 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:25:11,706 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:25:11,936 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:25:11,955 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 18 ms. Found 2 JPA repository interfaces.
2024-01-22 09:25:12,014 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:25:12,015 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:25:12,054 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:25:12,054 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:25:12,054 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:25:12,054 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:25:12,116 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:25:12,116 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 408 ms
2024-01-22 09:25:12,140 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-20 - Starting...
2024-01-22 09:25:12,180 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-20 - Added connection org.postgresql.jdbc.PgConnection@3dd23575
2024-01-22 09:25:12,180 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-20 - Start completed.
2024-01-22 09:25:12,188 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:25:12,210 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:25:12,230 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:25:12,230 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:25:12,230 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:25:12,230 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:25:12,230 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:25:12,230 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:25:12,230 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:25:12,251 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:25:12,254 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:25:12,273 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:25:12,278 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:25:12,284 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:25:12,286 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:25:12,310 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:25:12,310 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:25:12,311 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-20 - Shutdown initiated...
2024-01-22 09:25:12,331 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-20 - Shutdown completed.
2024-01-22 09:25:12,332 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:25:12,338 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:25:12,341 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.hibernate.boot.model.internal.BasicValueBinder.prepareBasicAttribute(BasicValueBinder.java:805)
	at org.hibernate.boot.model.internal.BasicValueBinder.setType(BasicValueBinder.java:374)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyAndValue(PropertyBinder.java:261)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:297)
	at org.hibernate.boot.model.internal.PropertyBinder.createBasicBinder(PropertyBinder.java:1169)
	at org.hibernate.boot.model.internal.PropertyBinder.bindBasic(PropertyBinder.java:1071)
	at org.hibernate.boot.model.internal.PropertyBinder.bindProperty(PropertyBinder.java:890)
	at org.hibernate.boot.model.internal.PropertyBinder.buildProperty(PropertyBinder.java:788)
	at org.hibernate.boot.model.internal.PropertyBinder.processElementAnnotations(PropertyBinder.java:709)
	at org.hibernate.boot.model.internal.EntityBinder.processIdPropertiesIfNotAlready(EntityBinder.java:977)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:305)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 09:28:24,837 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:28:24,838 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:28:25,008 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:28:25,023 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 14 ms. Found 2 JPA repository interfaces.
2024-01-22 09:28:25,068 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:28:25,068 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:28:25,096 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:28:25,096 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:28:25,096 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:28:25,096 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:28:25,140 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:28:25,140 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 301 ms
2024-01-22 09:28:25,158 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-21 - Starting...
2024-01-22 09:28:25,188 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-21 - Added connection org.postgresql.jdbc.PgConnection@439f691a
2024-01-22 09:28:25,188 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-21 - Start completed.
2024-01-22 09:28:25,195 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:28:25,210 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:28:25,222 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:28:25,222 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:28:25,222 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:28:25,222 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:28:25,222 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:28:25,222 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:28:25,222 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:28:25,229 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:28:25,230 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:28:25,242 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:28:25,245 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:28:25,250 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:28:25,251 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:28:25,268 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:28:25,268 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:28:25,269 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-21 - Shutdown initiated...
2024-01-22 09:28:25,270 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-21 - Shutdown completed.
2024-01-22 09:28:25,270 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:28:25,276 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:28:25,278 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.hibernate.boot.model.internal.BasicValueBinder.prepareBasicAttribute(BasicValueBinder.java:805)
	at org.hibernate.boot.model.internal.BasicValueBinder.setType(BasicValueBinder.java:374)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyAndValue(PropertyBinder.java:261)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:297)
	at org.hibernate.boot.model.internal.PropertyBinder.createBasicBinder(PropertyBinder.java:1169)
	at org.hibernate.boot.model.internal.PropertyBinder.bindBasic(PropertyBinder.java:1071)
	at org.hibernate.boot.model.internal.PropertyBinder.bindProperty(PropertyBinder.java:890)
	at org.hibernate.boot.model.internal.PropertyBinder.buildProperty(PropertyBinder.java:788)
	at org.hibernate.boot.model.internal.PropertyBinder.processElementAnnotations(PropertyBinder.java:709)
	at org.hibernate.boot.model.internal.EntityBinder.processIdPropertiesIfNotAlready(EntityBinder.java:977)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:305)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 09:28:28,873 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:28:28,873 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:28:29,153 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:28:29,180 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2024-01-22 09:28:29,261 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:28:29,262 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:28:29,349 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:28:29,349 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:28:29,350 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:28:29,350 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:28:29,431 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:28:29,432 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 557 ms
2024-01-22 09:28:29,454 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-22 - Starting...
2024-01-22 09:28:29,488 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-22 - Added connection org.postgresql.jdbc.PgConnection@2cea1b
2024-01-22 09:28:29,489 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-22 - Start completed.
2024-01-22 09:28:29,498 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:28:29,520 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:28:29,539 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:28:29,539 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:28:29,539 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:28:29,540 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:28:29,540 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:28:29,540 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:28:29,540 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:28:29,549 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:28:29,550 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:28:29,566 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:28:29,571 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:28:29,577 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:28:29,579 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:28:29,604 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:28:29,604 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:28:29,604 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-22 - Shutdown initiated...
2024-01-22 09:28:29,646 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-22 - Shutdown completed.
2024-01-22 09:28:29,647 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:28:29,653 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:28:29,656 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.hibernate.boot.model.internal.BasicValueBinder.prepareBasicAttribute(BasicValueBinder.java:805)
	at org.hibernate.boot.model.internal.BasicValueBinder.setType(BasicValueBinder.java:374)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyAndValue(PropertyBinder.java:261)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:297)
	at org.hibernate.boot.model.internal.PropertyBinder.createBasicBinder(PropertyBinder.java:1169)
	at org.hibernate.boot.model.internal.PropertyBinder.bindBasic(PropertyBinder.java:1071)
	at org.hibernate.boot.model.internal.PropertyBinder.bindProperty(PropertyBinder.java:890)
	at org.hibernate.boot.model.internal.PropertyBinder.buildProperty(PropertyBinder.java:788)
	at org.hibernate.boot.model.internal.PropertyBinder.processElementAnnotations(PropertyBinder.java:709)
	at org.hibernate.boot.model.internal.EntityBinder.processIdPropertiesIfNotAlready(EntityBinder.java:977)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:305)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 09:30:20,062 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:30:20,063 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:30:20,359 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:30:20,380 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 21 ms. Found 2 JPA repository interfaces.
2024-01-22 09:30:20,445 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:30:20,445 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:30:20,502 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:30:20,502 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:30:20,502 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:30:20,502 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:30:20,585 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:30:20,586 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 521 ms
2024-01-22 09:30:20,621 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-23 - Starting...
2024-01-22 09:30:20,681 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-23 - Added connection org.postgresql.jdbc.PgConnection@1925513c
2024-01-22 09:30:20,681 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-23 - Start completed.
2024-01-22 09:30:20,692 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:30:20,719 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:30:20,749 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:30:20,749 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:30:20,749 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:30:20,749 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:30:20,749 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:30:20,749 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:30:20,749 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:30:20,764 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:30:20,766 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:30:20,798 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:30:20,804 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:30:20,812 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:30:20,813 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:30:20,837 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:30:20,838 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:30:20,838 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-23 - Shutdown initiated...
2024-01-22 09:30:20,883 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-23 - Shutdown completed.
2024-01-22 09:30:20,883 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:30:20,895 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:30:20,901 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.hibernate.boot.model.internal.BasicValueBinder.prepareBasicAttribute(BasicValueBinder.java:805)
	at org.hibernate.boot.model.internal.BasicValueBinder.setType(BasicValueBinder.java:374)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyAndValue(PropertyBinder.java:261)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:297)
	at org.hibernate.boot.model.internal.PropertyBinder.createBasicBinder(PropertyBinder.java:1169)
	at org.hibernate.boot.model.internal.PropertyBinder.bindBasic(PropertyBinder.java:1071)
	at org.hibernate.boot.model.internal.PropertyBinder.bindProperty(PropertyBinder.java:890)
	at org.hibernate.boot.model.internal.PropertyBinder.buildProperty(PropertyBinder.java:788)
	at org.hibernate.boot.model.internal.PropertyBinder.processElementAnnotations(PropertyBinder.java:709)
	at org.hibernate.boot.model.internal.EntityBinder.processIdPropertiesIfNotAlready(EntityBinder.java:977)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:305)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 09:30:27,793 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:30:27,793 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:30:28,183 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:30:28,228 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 43 ms. Found 2 JPA repository interfaces.
2024-01-22 09:30:28,310 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:30:28,311 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:30:28,360 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:30:28,361 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:30:28,361 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:30:28,361 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:30:28,453 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:30:28,453 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 655 ms
2024-01-22 09:30:28,478 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-24 - Starting...
2024-01-22 09:30:28,510 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-24 - Added connection org.postgresql.jdbc.PgConnection@3ba38f14
2024-01-22 09:30:28,510 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-24 - Start completed.
2024-01-22 09:30:28,520 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:30:28,545 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:30:28,572 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:30:28,572 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:30:28,572 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:30:28,572 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:30:28,572 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:30:28,572 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:30:28,572 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:30:28,587 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:30:28,589 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:30:28,619 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:30:28,629 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:30:28,637 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:30:28,639 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:30:28,701 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:30:28,702 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:30:28,702 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-24 - Shutdown initiated...
2024-01-22 09:30:28,779 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-24 - Shutdown completed.
2024-01-22 09:30:28,780 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:30:28,795 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:30:28,807 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.hibernate.boot.model.internal.BasicValueBinder.prepareBasicAttribute(BasicValueBinder.java:805)
	at org.hibernate.boot.model.internal.BasicValueBinder.setType(BasicValueBinder.java:374)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyAndValue(PropertyBinder.java:261)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:297)
	at org.hibernate.boot.model.internal.PropertyBinder.createBasicBinder(PropertyBinder.java:1169)
	at org.hibernate.boot.model.internal.PropertyBinder.bindBasic(PropertyBinder.java:1071)
	at org.hibernate.boot.model.internal.PropertyBinder.bindProperty(PropertyBinder.java:890)
	at org.hibernate.boot.model.internal.PropertyBinder.buildProperty(PropertyBinder.java:788)
	at org.hibernate.boot.model.internal.PropertyBinder.processElementAnnotations(PropertyBinder.java:709)
	at org.hibernate.boot.model.internal.EntityBinder.processIdPropertiesIfNotAlready(EntityBinder.java:977)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:305)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 09:31:50,791 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:31:50,792 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:31:50,996 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:31:51,006 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: java.lang.TypeNotPresentException: Type com.medico.app.domain.Doctor not present
2024-01-22 09:31:51,010 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:31:51,012 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
java.lang.TypeNotPresentException: Type com.medico.app.domain.Doctor not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117)
	at java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95)
	at java.base/java.lang.Class.getGenericInterfaces(Class.java:1211)
	at org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:517)
	at org.springframework.core.ResolvableType.as(ResolvableType.java:465)
	at org.springframework.data.util.TypeDiscoverer.getSuperTypeInformation(TypeDiscoverer.java:254)
	at org.springframework.data.util.ClassTypeInformation.getSuperTypeInformation(ClassTypeInformation.java:36)
	at org.springframework.data.util.TypeInformation.getRequiredSuperTypeInformation(TypeInformation.java:327)
	at org.springframework.data.repository.core.support.DefaultRepositoryMetadata.<init>(DefaultRepositoryMetadata.java:55)
	at org.springframework.data.repository.core.support.AbstractRepositoryMetadata.getMetadata(AbstractRepositoryMetadata.java:77)
	at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:91)
	at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:164)
	at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:376)
	at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:375)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:148)
	at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:120)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:428)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:289)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:775)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:597)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.ClassNotFoundException: com.medico.app.domain.Doctor
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 41 common frames omitted
2024-01-22 09:32:01,915 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:32:01,916 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:32:02,300 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:32:02,332 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 31 ms. Found 2 JPA repository interfaces.
2024-01-22 09:32:02,410 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:32:02,410 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:32:02,481 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:32:02,482 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:32:02,482 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:32:02,483 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:32:02,596 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:32:02,596 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 676 ms
2024-01-22 09:32:02,621 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-25 - Starting...
2024-01-22 09:32:02,667 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-25 - Added connection org.postgresql.jdbc.PgConnection@6a20c85
2024-01-22 09:32:02,667 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-25 - Start completed.
2024-01-22 09:32:02,678 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:32:02,701 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:32:02,722 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:32:02,722 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:32:02,722 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:32:02,722 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:32:02,722 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:32:02,722 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:32:02,722 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:32:02,737 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:32:02,740 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:32:02,759 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:32:02,768 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:32:02,775 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:32:02,777 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:32:02,808 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:32:02,808 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:32:02,808 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-25 - Shutdown initiated...
2024-01-22 09:32:02,840 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-25 - Shutdown completed.
2024-01-22 09:32:02,840 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:32:02,849 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:32:02,855 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.hibernate.boot.model.internal.BasicValueBinder.prepareBasicAttribute(BasicValueBinder.java:805)
	at org.hibernate.boot.model.internal.BasicValueBinder.setType(BasicValueBinder.java:374)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyAndValue(PropertyBinder.java:261)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:297)
	at org.hibernate.boot.model.internal.PropertyBinder.createBasicBinder(PropertyBinder.java:1169)
	at org.hibernate.boot.model.internal.PropertyBinder.bindBasic(PropertyBinder.java:1071)
	at org.hibernate.boot.model.internal.PropertyBinder.bindProperty(PropertyBinder.java:890)
	at org.hibernate.boot.model.internal.PropertyBinder.buildProperty(PropertyBinder.java:788)
	at org.hibernate.boot.model.internal.PropertyBinder.processElementAnnotations(PropertyBinder.java:709)
	at org.hibernate.boot.model.internal.EntityBinder.processIdPropertiesIfNotAlready(EntityBinder.java:977)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:305)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 09:36:14,908 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:36:14,908 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:36:15,253 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:36:15,275 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 21 ms. Found 2 JPA repository interfaces.
2024-01-22 09:36:15,345 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:36:15,346 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:36:15,389 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:36:15,389 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:36:15,389 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:36:15,390 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:36:15,544 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:36:15,544 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 633 ms
2024-01-22 09:36:15,604 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-26 - Starting...
2024-01-22 09:36:15,670 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-26 - Added connection org.postgresql.jdbc.PgConnection@5ba021ea
2024-01-22 09:36:15,670 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-26 - Start completed.
2024-01-22 09:36:15,688 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:36:15,722 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:36:15,755 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:36:15,755 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:36:15,755 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:36:15,755 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:36:15,755 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:36:15,755 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:36:15,755 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:36:15,770 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:36:15,773 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:36:15,818 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:36:15,833 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:36:15,856 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:36:15,859 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:36:15,935 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Type com.medico.app.domain.Assignement not present
2024-01-22 09:36:15,935 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-26 - Shutdown initiated...
2024-01-22 09:36:15,989 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-26 - Shutdown completed.
2024-01-22 09:36:15,990 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:36:16,007 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:36:16,019 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Type com.medico.app.domain.Assignement not present
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.lang.TypeNotPresentException: Type com.medico.app.domain.Assignement not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.repository.MethodRepository.computeReturnType(MethodRepository.java:75)
	at java.base/sun.reflect.generics.repository.MethodRepository.getReturnType(MethodRepository.java:66)
	at java.base/java.lang.reflect.Method.getGenericReturnType(Method.java:295)
	at org.hibernate.annotations.common.reflection.java.JavaXClass.getDeclaredMethodProperties(JavaXClass.java:139)
	at org.hibernate.annotations.common.reflection.java.JavaXClass.getDeclaredProperties(JavaXClass.java:175)
	at org.hibernate.annotations.common.reflection.java.JavaXClass.getDeclaredProperties(JavaXClass.java:167)
	at org.hibernate.boot.model.internal.InheritanceState.determineDefaultAccessType(InheritanceState.java:259)
	at org.hibernate.boot.model.internal.InheritanceState.getElementsToProcess(InheritanceState.java:215)
	at org.hibernate.boot.model.internal.InheritanceState.postProcess(InheritanceState.java:160)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:296)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: java.lang.ClassNotFoundException: com.medico.app.domain.Assignement
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:467)
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 50 common frames omitted
2024-01-22 09:36:51,089 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:36:51,089 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:36:51,614 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:36:51,667 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 52 ms. Found 2 JPA repository interfaces.
2024-01-22 09:36:51,762 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:36:51,762 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:36:51,813 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:36:51,813 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:36:51,814 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:36:51,814 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:36:51,913 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:36:51,914 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 823 ms
2024-01-22 09:36:51,940 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-27 - Starting...
2024-01-22 09:36:51,990 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-27 - Added connection org.postgresql.jdbc.PgConnection@6dac80af
2024-01-22 09:36:51,990 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-27 - Start completed.
2024-01-22 09:36:52,004 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:36:52,030 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:36:52,055 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:36:52,056 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:36:52,056 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:36:52,056 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:36:52,056 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:36:52,056 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:36:52,056 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:36:52,070 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:36:52,072 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:36:52,095 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:36:52,100 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:36:52,117 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:36:52,122 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:36:52,218 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:36:52,219 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:36:52,219 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-27 - Shutdown initiated...
2024-01-22 09:36:52,241 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-27 - Shutdown completed.
2024-01-22 09:36:52,242 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:36:52,257 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:36:52,262 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.hibernate.boot.model.internal.BasicValueBinder.prepareBasicAttribute(BasicValueBinder.java:805)
	at org.hibernate.boot.model.internal.BasicValueBinder.setType(BasicValueBinder.java:374)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyAndValue(PropertyBinder.java:261)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:297)
	at org.hibernate.boot.model.internal.PropertyBinder.createBasicBinder(PropertyBinder.java:1169)
	at org.hibernate.boot.model.internal.PropertyBinder.bindBasic(PropertyBinder.java:1071)
	at org.hibernate.boot.model.internal.PropertyBinder.bindProperty(PropertyBinder.java:890)
	at org.hibernate.boot.model.internal.PropertyBinder.buildProperty(PropertyBinder.java:788)
	at org.hibernate.boot.model.internal.PropertyBinder.processElementAnnotations(PropertyBinder.java:709)
	at org.hibernate.boot.model.internal.EntityBinder.processIdPropertiesIfNotAlready(EntityBinder.java:977)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:305)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 09:38:27,979 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:38:27,979 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:38:28,190 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:38:28,209 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 18 ms. Found 2 JPA repository interfaces.
2024-01-22 09:38:28,267 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:38:28,267 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:38:28,308 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:38:28,309 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:38:28,309 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:38:28,309 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:38:28,367 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:38:28,367 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 387 ms
2024-01-22 09:38:28,389 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-28 - Starting...
2024-01-22 09:38:28,427 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-28 - Added connection org.postgresql.jdbc.PgConnection@6ac28753
2024-01-22 09:38:28,427 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-28 - Start completed.
2024-01-22 09:38:28,436 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:38:28,459 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:38:28,477 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:38:28,478 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:38:28,478 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:38:28,478 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:38:28,478 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:38:28,478 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:38:28,478 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:38:28,487 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:38:28,489 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:38:28,503 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:38:28,508 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:38:28,515 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:38:28,516 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:38:28,539 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:38:28,539 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:38:28,539 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-28 - Shutdown initiated...
2024-01-22 09:38:28,540 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-28 - Shutdown completed.
2024-01-22 09:38:28,541 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:38:28,549 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:38:28,553 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.hibernate.boot.model.internal.BasicValueBinder.prepareBasicAttribute(BasicValueBinder.java:805)
	at org.hibernate.boot.model.internal.BasicValueBinder.setType(BasicValueBinder.java:374)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyAndValue(PropertyBinder.java:261)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:297)
	at org.hibernate.boot.model.internal.PropertyBinder.createBasicBinder(PropertyBinder.java:1169)
	at org.hibernate.boot.model.internal.PropertyBinder.bindBasic(PropertyBinder.java:1071)
	at org.hibernate.boot.model.internal.PropertyBinder.bindProperty(PropertyBinder.java:890)
	at org.hibernate.boot.model.internal.PropertyBinder.buildProperty(PropertyBinder.java:788)
	at org.hibernate.boot.model.internal.PropertyBinder.processElementAnnotations(PropertyBinder.java:709)
	at org.hibernate.boot.model.internal.EntityBinder.processIdPropertiesIfNotAlready(EntityBinder.java:977)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:305)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 09:38:35,433 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:38:35,433 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:38:35,695 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:38:35,715 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 20 ms. Found 2 JPA repository interfaces.
2024-01-22 09:38:35,812 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:38:35,813 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:38:35,854 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:38:35,854 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:38:35,854 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:38:35,854 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:38:35,918 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:38:35,918 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 483 ms
2024-01-22 09:38:35,945 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-29 - Starting...
2024-01-22 09:38:35,982 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-29 - Added connection org.postgresql.jdbc.PgConnection@34e65a97
2024-01-22 09:38:35,982 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-29 - Start completed.
2024-01-22 09:38:35,991 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:38:36,017 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:38:36,035 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:38:36,035 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:38:36,035 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:38:36,035 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:38:36,036 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:38:36,036 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:38:36,036 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:38:36,047 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:38:36,049 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:38:36,069 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:38:36,076 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:38:36,085 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:38:36,087 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:38:36,135 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:38:36,135 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:38:36,135 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-29 - Shutdown initiated...
2024-01-22 09:38:36,152 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-29 - Shutdown completed.
2024-01-22 09:38:36,153 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:38:36,160 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:38:36,164 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.hibernate.boot.model.internal.BasicValueBinder.prepareBasicAttribute(BasicValueBinder.java:805)
	at org.hibernate.boot.model.internal.BasicValueBinder.setType(BasicValueBinder.java:374)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyAndValue(PropertyBinder.java:261)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:297)
	at org.hibernate.boot.model.internal.PropertyBinder.createBasicBinder(PropertyBinder.java:1169)
	at org.hibernate.boot.model.internal.PropertyBinder.bindBasic(PropertyBinder.java:1071)
	at org.hibernate.boot.model.internal.PropertyBinder.bindProperty(PropertyBinder.java:890)
	at org.hibernate.boot.model.internal.PropertyBinder.buildProperty(PropertyBinder.java:788)
	at org.hibernate.boot.model.internal.PropertyBinder.processElementAnnotations(PropertyBinder.java:709)
	at org.hibernate.boot.model.internal.EntityBinder.processIdPropertiesIfNotAlready(EntityBinder.java:977)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:305)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 09:41:03,205 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 2012 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 09:41:03,206 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 09:41:03,549 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 09:41:03,569 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 19 ms. Found 2 JPA repository interfaces.
2024-01-22 09:41:03,643 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 09:41:03,643 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 09:41:03,687 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 09:41:03,687 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 09:41:03,687 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 09:41:03,687 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 09:41:03,789 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 09:41:03,789 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 578 ms
2024-01-22 09:41:03,826 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-30 - Starting...
2024-01-22 09:41:03,871 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-30 - Added connection org.postgresql.jdbc.PgConnection@78b17a11
2024-01-22 09:41:03,871 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-30 - Start completed.
2024-01-22 09:41:03,881 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 09:41:03,905 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 09:41:03,930 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 09:41:03,930 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 09:41:03,930 INFO l.l.c.JavaLogger [restartedMain] Previously run:               3
2024-01-22 09:41:03,930 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 09:41:03,930 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 09:41:03,930 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            3
2024-01-22 09:41:03,930 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 09:41:03,947 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 09:41:03,949 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 09:41:03,967 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 09:41:03,974 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 09:41:03,986 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 09:41:03,988 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 09:41:04,016 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:41:04,016 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 09:41:04,017 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-30 - Shutdown initiated...
2024-01-22 09:41:04,031 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-30 - Shutdown completed.
2024-01-22 09:41:04,032 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 09:41:04,043 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 09:41:04,046 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.hibernate.boot.model.internal.BasicValueBinder.prepareBasicAttribute(BasicValueBinder.java:805)
	at org.hibernate.boot.model.internal.BasicValueBinder.setType(BasicValueBinder.java:374)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyAndValue(PropertyBinder.java:261)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:297)
	at org.hibernate.boot.model.internal.PropertyBinder.createBasicBinder(PropertyBinder.java:1169)
	at org.hibernate.boot.model.internal.PropertyBinder.bindBasic(PropertyBinder.java:1071)
	at org.hibernate.boot.model.internal.PropertyBinder.bindProperty(PropertyBinder.java:890)
	at org.hibernate.boot.model.internal.PropertyBinder.buildProperty(PropertyBinder.java:788)
	at org.hibernate.boot.model.internal.PropertyBinder.processElementAnnotations(PropertyBinder.java:709)
	at org.hibernate.boot.model.internal.EntityBinder.processIdPropertiesIfNotAlready(EntityBinder.java:977)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:305)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 11:13:33,293 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 548 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:13:33,295 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:13:33,338 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:13:33,338 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:13:34,280 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:13:34,438 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 151 ms. Found 2 JPA repository interfaces.
2024-01-22 11:13:34,811 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:13:34,844 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:13:35,140 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:13:35,148 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:13:35,149 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:13:35,150 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:13:35,232 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:13:35,232 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1893 ms
2024-01-22 11:13:35,350 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:13:35,512 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5b1303bc
2024-01-22 11:13:35,513 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:13:35,648 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:13:35,818 INFO l.l.c.JavaLogger [restartedMain] Creating database history table with name: public.databasechangelog
2024-01-22 11:13:35,865 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:13:35,945 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:13:35,948 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5918415947
2024-01-22 11:13:35,951 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:13:36,048 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:13:36,053 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:13:36,062 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:13:36,064 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:13:36,065 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 169 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                     id BIGINT PRIMARY KEY,
                                     name varchar(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(40) COLLATE utf8_unicode_ci NOT NULL
    );



CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
2024-01-22 11:13:36,067 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:13:36,072 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:13:36,077 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:13:36,090 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:13:36,112 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 169 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                     id BIGINT PRIMARY KEY,
                                     name varchar(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(40) COLLATE utf8_unicode_ci NOT NULL
    );



CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 169 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                     id BIGINT PRIMARY KEY,
                                     name varchar(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(40) COLLATE utf8_unicode_ci NOT NULL
    );



CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 169 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                     id BIGINT PRIMARY KEY,
                                     name varchar(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(40) COLLATE utf8_unicode_ci NOT NULL
    );



CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 169 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                     id BIGINT PRIMARY KEY,
                                     name varchar(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(40) COLLATE utf8_unicode_ci NOT NULL
    );



CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 169 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                     id BIGINT PRIMARY KEY,
                                     name varchar(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(40) COLLATE utf8_unicode_ci NOT NULL
    );



CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 169
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:15:48,927 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 17324 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:15:48,930 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:15:48,960 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:15:48,962 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:15:49,622 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:15:49,732 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 105 ms. Found 2 JPA repository interfaces.
2024-01-22 11:15:49,956 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:15:49,976 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:15:50,181 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:15:50,187 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:15:50,189 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:15:50,189 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:15:50,257 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:15:50,257 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1295 ms
2024-01-22 11:15:50,348 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:15:50,472 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6ac383e8
2024-01-22 11:15:50,473 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:15:50,570 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:15:50,716 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:15:50,771 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:15:50,773 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5918550773
2024-01-22 11:15:50,775 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:15:50,858 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:15:50,861 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:15:50,867 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:15:50,868 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:15:50,870 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "ENGINE"
  Position: 314 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
2024-01-22 11:15:50,871 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:15:50,874 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:15:50,878 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:15:50,886 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:15:50,900 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "ENGINE"
  Position: 314 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "ENGINE"
  Position: 314 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "ENGINE"
  Position: 314 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "ENGINE"
  Position: 314 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: syntax error at or near "ENGINE"
  Position: 314 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near "ENGINE"
  Position: 314
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:16:59,620 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 17240 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:16:59,622 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:16:59,653 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:16:59,653 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:17:00,324 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:17:00,433 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 104 ms. Found 2 JPA repository interfaces.
2024-01-22 11:17:00,666 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:17:00,682 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:17:00,893 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:17:00,901 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:17:00,903 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:17:00,903 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:17:00,973 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:17:00,974 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1320 ms
2024-01-22 11:17:01,077 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:17:01,214 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1e815515
2024-01-22 11:17:01,216 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:17:01,322 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:17:01,472 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:17:01,528 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:17:01,530 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5918621530
2024-01-22 11:17:01,532 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:17:01,612 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:17:01,619 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:17:01,626 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:17:01,628 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:17:01,630 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 193 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
2024-01-22 11:17:01,631 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:17:01,664 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:17:01,666 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:17:01,675 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:17:01,688 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 193 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 193 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 193 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 193 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 193 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE utf8_unicode_ci NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: collation "utf8_unicode_ci" for encoding "UTF8" does not exist
  Position: 193
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:17:45,164 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 17412 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:17:45,166 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:17:45,199 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:17:45,200 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:17:45,875 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:17:45,981 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 100 ms. Found 2 JPA repository interfaces.
2024-01-22 11:17:46,214 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:17:46,227 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:17:46,448 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:17:46,454 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:17:46,455 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:17:46,456 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:17:46,523 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:17:46,524 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1322 ms
2024-01-22 11:17:46,612 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:17:46,765 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2bf06627
2024-01-22 11:17:46,766 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:17:46,867 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:17:47,004 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:17:47,059 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:17:47,061 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5918667061
2024-01-22 11:17:47,063 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:17:47,143 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:17:47,146 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:17:47,152 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:17:47,154 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:17:47,155 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
2024-01-22 11:17:47,156 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:17:47,169 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:17:47,171 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:17:47,178 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:17:47,192 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: relation "region" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:18:33,621 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 23916 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:18:33,623 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:18:33,656 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:18:33,657 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:18:34,340 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:18:34,449 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 104 ms. Found 2 JPA repository interfaces.
2024-01-22 11:18:34,683 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:18:34,698 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:18:34,911 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:18:34,918 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:18:34,920 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:18:34,920 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:18:34,989 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:18:34,989 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1331 ms
2024-01-22 11:18:35,118 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:18:35,244 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@ea7016
2024-01-22 11:18:35,245 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:18:35,356 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:18:35,519 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:18:35,584 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:18:35,586 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5918715585
2024-01-22 11:18:35,589 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:18:35,672 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:18:35,676 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:18:35,682 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:18:35,683 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:18:35,685 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
2024-01-22 11:18:35,686 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:18:35,700 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:18:35,702 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:18:35,710 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:18:35,725 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near ")"
  Position: 312
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:19:26,300 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 26328 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:19:26,302 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:19:26,336 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:19:26,336 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:19:27,022 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:19:27,131 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 104 ms. Found 2 JPA repository interfaces.
2024-01-22 11:19:27,368 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:19:27,386 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:19:27,654 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:19:27,661 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:19:27,662 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:19:27,662 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:19:27,735 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:19:27,736 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1398 ms
2024-01-22 11:19:27,827 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:19:27,959 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@38d155c5
2024-01-22 11:19:27,960 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:19:28,060 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:19:28,212 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:19:28,266 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:19:28,268 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5918768268
2024-01-22 11:19:28,270 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:19:28,346 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:19:28,349 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:19:28,356 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:19:28,357 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:19:28,359 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
2024-01-22 11:19:28,360 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:19:28,373 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:19:28,374 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:19:28,382 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:19:28,397 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id),
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id),
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near ")"
  Position: 312
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:21:00,039 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 20144 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:21:00,041 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:21:00,073 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:21:00,074 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:21:00,771 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:21:00,885 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 106 ms. Found 2 JPA repository interfaces.
2024-01-22 11:21:01,129 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:21:01,145 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:21:01,355 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:21:01,362 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:21:01,363 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:21:01,364 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:21:01,437 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:21:01,438 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1363 ms
2024-01-22 11:21:01,526 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:21:01,657 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5148b3e4
2024-01-22 11:21:01,658 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:21:01,757 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:21:01,900 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:21:01,956 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:21:01,958 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5918861958
2024-01-22 11:21:01,960 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:21:02,036 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:21:02,039 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:21:02,046 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:21:02,048 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:21:02,049 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
2024-01-22 11:21:02,050 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:21:02,052 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:21:02,056 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:21:02,064 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:21:02,078 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: syntax error at or near ")"
  Position: 312 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near ")"
  Position: 312
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:22:40,193 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 14180 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:22:40,194 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:22:40,226 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:22:40,226 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:22:40,897 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:22:41,002 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 99 ms. Found 2 JPA repository interfaces.
2024-01-22 11:22:41,231 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:22:41,248 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:22:41,460 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:22:41,467 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:22:41,469 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:22:41,469 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:22:41,538 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:22:41,539 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1311 ms
2024-01-22 11:22:41,626 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:22:41,751 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@66c99626
2024-01-22 11:22:41,752 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:22:41,852 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:22:41,989 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:22:42,054 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:22:42,055 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5918962055
2024-01-22 11:22:42,057 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:22:42,145 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:22:42,149 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:22:42,156 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:22:42,157 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:22:42,159 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "region_id" of relation "city" does not exist
  Position: 82 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
2024-01-22 11:22:42,160 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:22:42,175 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:22:42,178 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:22:42,186 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:22:42,201 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "region_id" of relation "city" does not exist
  Position: 82 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "region_id" of relation "city" does not exist
  Position: 82 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "region_id" of relation "city" does not exist
  Position: 82 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "region_id" of relation "city" does not exist
  Position: 82 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: column "region_id" of relation "city" does not exist
  Position: 82 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
--     region_id BIGINT NOT NULL,
--     FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: column "region_id" of relation "city" does not exist
  Position: 82
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:23:05,808 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 15784 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:23:05,811 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:23:05,842 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:23:05,843 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:23:06,521 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:23:06,627 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 100 ms. Found 2 JPA repository interfaces.
2024-01-22 11:23:06,852 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:23:06,869 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:23:07,084 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:23:07,091 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:23:07,092 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:23:07,093 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:23:07,160 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:23:07,160 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1316 ms
2024-01-22 11:23:07,247 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:23:07,371 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@70a3ea63
2024-01-22 11:23:07,372 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:23:07,473 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:23:07,608 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:23:07,661 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:23:07,663 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5918987663
2024-01-22 11:23:07,665 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:23:07,746 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:23:07,750 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:23:07,759 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:23:07,760 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:23:07,762 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "region_id"
  Position: 227 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
2024-01-22 11:23:07,763 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:23:07,766 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:23:07,770 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:23:07,778 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:23:07,792 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "region_id"
  Position: 227 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "region_id"
  Position: 227 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "region_id"
  Position: 227 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: syntax error at or near "region_id"
  Position: 227 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: syntax error at or near "region_id"
  Position: 227 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near "region_id"
  Position: 227
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:23:52,016 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 6776 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:23:52,018 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:23:52,051 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:23:52,051 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:23:52,720 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:23:52,823 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 98 ms. Found 2 JPA repository interfaces.
2024-01-22 11:23:53,053 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:23:53,068 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:23:53,359 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:23:53,367 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:23:53,368 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:23:53,368 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:23:53,454 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:23:53,455 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1403 ms
2024-01-22 11:23:53,585 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:23:53,727 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@70a3ea63
2024-01-22 11:23:53,728 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:23:53,833 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:23:53,984 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:23:54,041 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:23:54,043 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5919034043
2024-01-22 11:23:54,045 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:23:54,128 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:23:54,131 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:23:54,138 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:23:54,139 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:23:54,142 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
2024-01-22 11:23:54,143 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:23:54,188 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:23:54,190 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:23:54,199 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:23:54,213 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: relation "region" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:24:25,879 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 25764 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:24:25,881 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:24:25,913 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:24:25,913 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:24:26,586 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:24:26,694 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 102 ms. Found 2 JPA repository interfaces.
2024-01-22 11:24:26,929 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:24:26,946 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:24:27,160 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:24:27,168 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:24:27,170 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:24:27,170 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:24:27,241 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:24:27,241 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1327 ms
2024-01-22 11:24:27,340 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:24:27,471 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@50e9b38b
2024-01-22 11:24:27,473 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:24:27,568 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:24:27,713 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:24:27,768 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:24:27,770 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5919067770
2024-01-22 11:24:27,772 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:24:27,851 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:24:27,854 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:24:27,861 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:24:27,863 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:24:27,866 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
2024-01-22 11:24:27,867 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:24:27,870 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:24:27,874 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:24:27,883 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:24:27,896 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: relation "region" does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: relation "region" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:25:29,402 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 19904 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:25:29,404 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:25:29,443 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:25:29,443 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:25:30,137 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:25:30,247 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 105 ms. Found 2 JPA repository interfaces.
2024-01-22 11:25:30,481 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:25:30,497 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:25:30,717 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:25:30,724 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:25:30,725 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:25:30,725 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:25:30,792 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:25:30,793 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1349 ms
2024-01-22 11:25:30,880 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:25:31,008 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@227d7371
2024-01-22 11:25:31,009 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:25:31,106 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:25:31,243 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:25:31,298 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:25:31,299 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5919131299
2024-01-22 11:25:31,302 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:25:31,407 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:25:31,412 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:25:31,420 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:25:31,422 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:25:31,424 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
2024-01-22 11:25:31,425 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:25:31,455 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:25:31,456 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:25:31,466 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:25:31,482 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:26:53,100 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 21948 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:26:53,102 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:26:53,134 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:26:53,135 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:26:53,803 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:26:53,912 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 101 ms. Found 2 JPA repository interfaces.
2024-01-22 11:26:54,145 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:26:54,160 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:26:54,371 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:26:54,378 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:26:54,379 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:26:54,380 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:26:54,450 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:26:54,450 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1315 ms
2024-01-22 11:26:54,540 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:26:54,665 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@513450f9
2024-01-22 11:26:54,667 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:26:54,763 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:26:54,900 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:26:54,955 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:26:54,957 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5919214957
2024-01-22 11:26:54,959 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:26:55,062 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:26:55,066 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:26:55,076 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:26:55,078 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:26:55,080 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
2024-01-22 11:26:55,081 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:26:55,100 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:26:55,102 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:26:55,113 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:26:55,129 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: relation "workspace_id_seq" does not exist
  Position: 129
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:28:55,672 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 15964 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:28:55,674 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:28:55,706 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:28:55,707 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:28:56,487 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:28:56,599 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 107 ms. Found 2 JPA repository interfaces.
2024-01-22 11:28:56,843 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:28:56,857 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:28:57,061 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:28:57,068 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:28:57,069 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:28:57,070 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:28:57,142 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:28:57,142 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1434 ms
2024-01-22 11:28:57,236 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:28:57,365 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2bf06627
2024-01-22 11:28:57,367 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:28:57,467 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:28:57,600 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:28:57,656 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:28:57,657 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5919337657
2024-01-22 11:28:57,659 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:28:57,786 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:28:57,790 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:28:57,797 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:28:57,798 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:28:57,800 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
2024-01-22 11:28:57,801 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:28:57,804 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:28:57,808 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:28:57,817 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:28:57,832 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:29:58,872 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 17540 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:29:58,873 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:29:58,906 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:29:58,906 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:29:59,578 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:29:59,681 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 98 ms. Found 2 JPA repository interfaces.
2024-01-22 11:29:59,918 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:29:59,934 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:30:00,153 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:30:00,162 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:30:00,162 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:30:00,162 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:30:00,230 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:30:00,231 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1324 ms
2024-01-22 11:30:00,326 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:30:00,445 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@513450f9
2024-01-22 11:30:00,446 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:30:00,541 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:30:00,677 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:30:00,734 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:30:00,736 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5919400736
2024-01-22 11:30:00,738 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:30:00,870 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:30:00,875 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:30:00,883 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:30:00,886 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:30:00,887 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
2024-01-22 11:30:00,888 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:30:00,914 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:30:00,916 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:30:00,925 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:30:00,940 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (doctor_occupation) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: column "doctor_occupation" referenced in foreign key constraint does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:32:11,746 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 7612 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:32:11,748 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:32:11,780 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:32:11,780 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:32:12,464 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:32:12,578 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 106 ms. Found 2 JPA repository interfaces.
2024-01-22 11:32:12,813 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:32:12,828 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:32:13,043 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:32:13,052 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:32:13,053 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:32:13,053 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:32:13,123 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:32:13,124 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1343 ms
2024-01-22 11:32:13,213 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:32:13,339 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@41fbb037
2024-01-22 11:32:13,341 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:32:13,439 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:32:13,582 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:32:13,637 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:32:13,638 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5919533638
2024-01-22 11:32:13,640 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:32:13,779 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:32:13,783 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:32:13,792 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:32:13,795 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:32:13,798 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_assignement" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                       id BIGINT PRIMARY KEY,
                                                       name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
2024-01-22 11:32:13,799 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:32:13,803 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:32:13,807 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:32:13,817 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:32:13,833 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_assignement" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                       id BIGINT PRIMARY KEY,
                                                       name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_assignement" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                       id BIGINT PRIMARY KEY,
                                                       name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_assignement" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                       id BIGINT PRIMARY KEY,
                                                       name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: column "doctor_assignement" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                       id BIGINT PRIMARY KEY,
                                                       name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: column "doctor_assignement" referenced in foreign key constraint does not exist [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                       id BIGINT PRIMARY KEY,
                                                       name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_assignement) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_assignement) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      text,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_prescription) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_file) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_file) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescriptoin_medecine) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescriptoin_medecine_custom) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_checkup) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_checkup) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_checkup) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: column "doctor_assignement" referenced in foreign key constraint does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:33:29,036 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 22960 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:33:29,037 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:33:29,070 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:33:29,071 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:33:29,744 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:33:29,853 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 101 ms. Found 2 JPA repository interfaces.
2024-01-22 11:33:30,088 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:33:30,104 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:33:30,317 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:33:30,325 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:33:30,326 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:33:30,327 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:33:30,395 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:33:30,396 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1325 ms
2024-01-22 11:33:30,483 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:33:30,608 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@41fbb037
2024-01-22 11:33:30,610 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:33:30,711 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:33:30,850 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:33:30,910 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:33:30,912 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5919610912
2024-01-22 11:33:30,915 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:33:31,140 INFO l.l.c.JavaLogger [restartedMain] Custom SQL executed
2024-01-22 11:33:31,144 INFO l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll ran successfully in 209ms
2024-01-22 11:33:31,156 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 11:33:31,156 INFO l.l.c.JavaLogger [restartedMain] Run:                          1
2024-01-22 11:33:31,157 INFO l.l.c.JavaLogger [restartedMain] Previously run:               0
2024-01-22 11:33:31,157 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 11:33:31,157 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 11:33:31,157 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-22 11:33:31,157 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 11:33:31,158 INFO l.l.c.JavaLogger [restartedMain] Update command completed successfully.
2024-01-22 11:33:31,165 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:33:31,166 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:33:31,234 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 11:33:31,296 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-22 11:33:31,326 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 11:33:31,573 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 11:33:31,618 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 11:33:31,808 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 11:33:31,809 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
2024-01-22 11:33:31,810 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:33:31,814 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:33:31,818 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:33:31,828 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:33:31,843 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Property 'com.medico.app.domain.WorkSpace.typeWorkSpace' is annotated '@Enumerated' but its type 'com.medico.app.enums.TypeWorkSpace' is not an enum
	at org.hibernate.boot.model.internal.BasicValueBinder.prepareBasicAttribute(BasicValueBinder.java:805)
	at org.hibernate.boot.model.internal.BasicValueBinder.setType(BasicValueBinder.java:374)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyAndValue(PropertyBinder.java:261)
	at org.hibernate.boot.model.internal.PropertyBinder.makePropertyValueAndBind(PropertyBinder.java:297)
	at org.hibernate.boot.model.internal.PropertyBinder.createBasicBinder(PropertyBinder.java:1169)
	at org.hibernate.boot.model.internal.PropertyBinder.bindBasic(PropertyBinder.java:1071)
	at org.hibernate.boot.model.internal.PropertyBinder.bindProperty(PropertyBinder.java:890)
	at org.hibernate.boot.model.internal.PropertyBinder.buildProperty(PropertyBinder.java:788)
	at org.hibernate.boot.model.internal.PropertyBinder.processElementAnnotations(PropertyBinder.java:709)
	at org.hibernate.boot.model.internal.EntityBinder.processIdPropertiesIfNotAlready(EntityBinder.java:977)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:305)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:231)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:422)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:255)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:278)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:321)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 11:35:08,780 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 21952 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:35:08,782 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:35:08,815 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:35:08,815 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:35:09,477 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:35:09,580 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 97 ms. Found 2 JPA repository interfaces.
2024-01-22 11:35:09,810 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:35:09,825 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:35:10,036 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:35:10,044 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:35:10,046 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:35:10,046 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:35:10,113 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:35:10,113 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1297 ms
2024-01-22 11:35:10,201 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:35:10,327 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5b1303bc
2024-01-22 11:35:10,329 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:35:10,429 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:35:10,565 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:35:10,598 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:35:10,615 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 11:35:10,615 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 11:35:10,615 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-22 11:35:10,615 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 11:35:10,615 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 11:35:10,615 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-22 11:35:10,615 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 11:35:10,640 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:35:10,641 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:35:10,695 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 11:35:10,734 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-22 11:35:10,765 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 11:35:10,932 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 11:35:10,965 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 11:35:11,141 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Association 'com.medico.app.domain.WorkSpace.assignements' is 'mappedBy' a property named 'doctor' which references the wrong entity type 'com.medico.app.domain.Doctor', expected 'com.medico.app.domain.WorkSpace'
2024-01-22 11:35:11,142 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Association 'com.medico.app.domain.WorkSpace.assignements' is 'mappedBy' a property named 'doctor' which references the wrong entity type 'com.medico.app.domain.Doctor', expected 'com.medico.app.domain.WorkSpace'
2024-01-22 11:35:11,143 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:35:11,147 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:35:11,150 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:35:11,161 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:35:11,176 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Association 'com.medico.app.domain.WorkSpace.assignements' is 'mappedBy' a property named 'doctor' which references the wrong entity type 'com.medico.app.domain.Doctor', expected 'com.medico.app.domain.WorkSpace'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Association 'com.medico.app.domain.WorkSpace.assignements' is 'mappedBy' a property named 'doctor' which references the wrong entity type 'com.medico.app.domain.Doctor', expected 'com.medico.app.domain.WorkSpace'
	at org.hibernate.boot.model.internal.BinderHelper.checkMappedByType(BinderHelper.java:1108)
	at org.hibernate.boot.model.internal.CollectionBinder.isReversePropertyInJoin(CollectionBinder.java:1614)
	at org.hibernate.boot.model.internal.CollectionBinder.noAssociationTable(CollectionBinder.java:1625)
	at org.hibernate.boot.model.internal.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:1586)
	at org.hibernate.boot.model.internal.CollectionBinder$1.secondPass(CollectionBinder.java:1577)
	at org.hibernate.boot.model.internal.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1815)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1774)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:331)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 11:36:07,241 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 24904 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:36:07,243 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:36:07,276 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:36:07,277 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:36:07,961 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:36:08,072 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 103 ms. Found 2 JPA repository interfaces.
2024-01-22 11:36:08,308 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:36:08,324 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:36:08,532 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:36:08,539 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:36:08,540 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:36:08,541 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:36:08,608 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:36:08,609 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1331 ms
2024-01-22 11:36:08,695 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:36:08,820 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@700a2a36
2024-01-22 11:36:08,821 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:36:08,924 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:36:09,063 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:36:09,089 INFO l.l.c.JavaLogger [restartedMain] Change failed validation!
2024-01-22 11:36:09,089 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:36:09,091 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:0e315a4e4922ce3b86a48d1a2695f76b but is now: 9:2a9ee5cad8e8c7847fd7c971bea54af2

2024-01-22 11:36:09,091 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:36:09,101 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:36:09,103 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:36:09,112 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:36:09,127 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:0e315a4e4922ce3b86a48d1a2695f76b but is now: 9:2a9ee5cad8e8c7847fd7c971bea54af2

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:0e315a4e4922ce3b86a48d1a2695f76b but is now: 9:2a9ee5cad8e8c7847fd7c971bea54af2

	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:0e315a4e4922ce3b86a48d1a2695f76b but is now: 9:2a9ee5cad8e8c7847fd7c971bea54af2

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:353)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
2024-01-22 11:36:56,260 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 25096 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:36:56,262 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:36:56,293 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:36:56,293 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:36:56,972 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:36:57,089 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 109 ms. Found 2 JPA repository interfaces.
2024-01-22 11:36:57,337 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:36:57,353 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:36:57,572 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:36:57,579 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:36:57,580 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:36:57,580 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:36:57,648 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:36:57,649 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1354 ms
2024-01-22 11:36:57,735 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:36:57,864 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2bf06627
2024-01-22 11:36:57,865 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:36:57,964 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:36:58,103 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:36:58,129 INFO l.l.c.JavaLogger [restartedMain] Change failed validation!
2024-01-22 11:36:58,129 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:36:58,131 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:0e315a4e4922ce3b86a48d1a2695f76b but is now: 9:2a9ee5cad8e8c7847fd7c971bea54af2

2024-01-22 11:36:58,131 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:36:58,152 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:36:58,154 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:36:58,162 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:36:58,176 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:0e315a4e4922ce3b86a48d1a2695f76b but is now: 9:2a9ee5cad8e8c7847fd7c971bea54af2

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:0e315a4e4922ce3b86a48d1a2695f76b but is now: 9:2a9ee5cad8e8c7847fd7c971bea54af2

	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:0e315a4e4922ce3b86a48d1a2695f76b but is now: 9:2a9ee5cad8e8c7847fd7c971bea54af2

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:353)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
2024-01-22 11:37:34,243 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 26564 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:37:34,244 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:37:34,278 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:37:34,279 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:37:34,961 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:37:35,071 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 104 ms. Found 2 JPA repository interfaces.
2024-01-22 11:37:35,310 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:37:35,325 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:37:35,540 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:37:35,547 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:37:35,549 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:37:35,549 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:37:35,615 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:37:35,616 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1335 ms
2024-01-22 11:37:35,700 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:37:35,823 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@42fe3a36
2024-01-22 11:37:35,824 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:37:35,921 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:37:36,058 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:37:36,084 INFO l.l.c.JavaLogger [restartedMain] Change failed validation!
2024-01-22 11:37:36,085 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:37:36,086 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:0e315a4e4922ce3b86a48d1a2695f76b but is now: 9:2a9ee5cad8e8c7847fd7c971bea54af2

2024-01-22 11:37:36,087 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:37:36,097 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:37:36,099 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:37:36,108 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:37:36,121 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:0e315a4e4922ce3b86a48d1a2695f76b but is now: 9:2a9ee5cad8e8c7847fd7c971bea54af2

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:0e315a4e4922ce3b86a48d1a2695f76b but is now: 9:2a9ee5cad8e8c7847fd7c971bea54af2

	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:0e315a4e4922ce3b86a48d1a2695f76b but is now: 9:2a9ee5cad8e8c7847fd7c971bea54af2

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:353)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
2024-01-22 11:39:51,630 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 14220 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:39:51,632 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:39:51,664 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:39:51,664 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:39:52,341 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:39:52,455 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 106 ms. Found 2 JPA repository interfaces.
2024-01-22 11:39:52,689 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:39:52,705 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:39:52,916 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:39:52,924 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:39:52,925 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:39:52,926 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:39:52,996 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:39:52,997 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1332 ms
2024-01-22 11:39:53,088 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:39:53,214 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2a64337e
2024-01-22 11:39:53,215 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:39:53,315 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:39:53,428 INFO l.l.c.JavaLogger [restartedMain] Creating database history table with name: public.databasechangelog
2024-01-22 11:39:53,477 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:39:53,536 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:39:53,538 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5919993537
2024-01-22 11:39:53,540 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:39:53,606 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:39:53,610 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:39:53,618 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:39:53,619 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:39:53,621 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: schema "medical_file" does not exist
  Position: 28 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
2024-01-22 11:39:53,622 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:39:53,643 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:39:53,644 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:39:53,653 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:39:53,669 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: schema "medical_file" does not exist
  Position: 28 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: schema "medical_file" does not exist
  Position: 28 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: schema "medical_file" does not exist
  Position: 28 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: schema "medical_file" does not exist
  Position: 28 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: schema "medical_file" does not exist
  Position: 28 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: schema "medical_file" does not exist
  Position: 28
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:40:25,843 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 6164 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:40:25,845 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:40:25,880 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:40:25,880 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:40:26,559 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:40:26,663 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 100 ms. Found 2 JPA repository interfaces.
2024-01-22 11:40:26,898 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:40:26,915 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:40:27,122 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:40:27,129 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:40:27,130 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:40:27,130 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:40:27,200 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:40:27,201 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1320 ms
2024-01-22 11:40:27,288 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:40:27,415 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1266e1d0
2024-01-22 11:40:27,416 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:40:27,516 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:40:27,628 INFO l.l.c.JavaLogger [restartedMain] Creating database history table with name: public.databasechangelog
2024-01-22 11:40:27,668 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:40:27,730 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:40:27,731 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5920027731
2024-01-22 11:40:27,733 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:40:27,970 INFO l.l.c.JavaLogger [restartedMain] Custom SQL executed
2024-01-22 11:40:27,974 INFO l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll ran successfully in 221ms
2024-01-22 11:40:27,985 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 11:40:27,985 INFO l.l.c.JavaLogger [restartedMain] Run:                          1
2024-01-22 11:40:27,985 INFO l.l.c.JavaLogger [restartedMain] Previously run:               0
2024-01-22 11:40:27,985 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 11:40:27,985 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 11:40:27,986 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-22 11:40:27,986 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 11:40:27,987 INFO l.l.c.JavaLogger [restartedMain] Update command completed successfully.
2024-01-22 11:40:27,993 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:40:27,995 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:40:28,045 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 11:40:28,081 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-22 11:40:28,103 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 11:40:28,264 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 11:40:28,297 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 11:40:28,470 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Association 'com.medico.app.domain.WorkSpace.assignements' is 'mappedBy' a property named 'doctor' which references the wrong entity type 'com.medico.app.domain.Doctor', expected 'com.medico.app.domain.WorkSpace'
2024-01-22 11:40:28,470 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Association 'com.medico.app.domain.WorkSpace.assignements' is 'mappedBy' a property named 'doctor' which references the wrong entity type 'com.medico.app.domain.Doctor', expected 'com.medico.app.domain.WorkSpace'
2024-01-22 11:40:28,471 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:40:28,475 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:40:28,479 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:40:28,490 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:40:28,504 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Association 'com.medico.app.domain.WorkSpace.assignements' is 'mappedBy' a property named 'doctor' which references the wrong entity type 'com.medico.app.domain.Doctor', expected 'com.medico.app.domain.WorkSpace'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Association 'com.medico.app.domain.WorkSpace.assignements' is 'mappedBy' a property named 'doctor' which references the wrong entity type 'com.medico.app.domain.Doctor', expected 'com.medico.app.domain.WorkSpace'
	at org.hibernate.boot.model.internal.BinderHelper.checkMappedByType(BinderHelper.java:1108)
	at org.hibernate.boot.model.internal.CollectionBinder.isReversePropertyInJoin(CollectionBinder.java:1614)
	at org.hibernate.boot.model.internal.CollectionBinder.noAssociationTable(CollectionBinder.java:1625)
	at org.hibernate.boot.model.internal.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:1586)
	at org.hibernate.boot.model.internal.CollectionBinder$1.secondPass(CollectionBinder.java:1577)
	at org.hibernate.boot.model.internal.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1815)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1774)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:331)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 11:42:21,426 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 19220 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:42:21,428 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:42:21,460 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:42:21,461 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:42:22,151 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:42:22,253 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 96 ms. Found 2 JPA repository interfaces.
2024-01-22 11:42:22,487 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:42:22,505 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:42:22,714 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:42:22,721 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:42:22,722 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:42:22,723 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:42:22,794 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:42:22,795 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1332 ms
2024-01-22 11:42:22,892 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:42:23,015 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@60cd94c9
2024-01-22 11:42:23,016 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:42:23,111 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:42:23,245 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:42:23,276 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:42:23,294 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 11:42:23,294 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 11:42:23,295 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-22 11:42:23,295 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 11:42:23,295 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 11:42:23,295 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-22 11:42:23,295 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 11:42:23,317 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:42:23,320 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:42:23,374 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 11:42:23,416 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-22 11:42:23,450 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 11:42:23,612 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 11:42:23,642 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 11:42:23,817 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: Collection 'com.medico.app.domain.WorkSpace.assignements' is 'mappedBy' a property named 'workspace' which does not exist in the target entity 'com.medico.app.domain.Assignement'
2024-01-22 11:42:23,817 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Collection 'com.medico.app.domain.WorkSpace.assignements' is 'mappedBy' a property named 'workspace' which does not exist in the target entity 'com.medico.app.domain.Assignement'
2024-01-22 11:42:23,818 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:42:23,822 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:42:23,826 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:42:23,835 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:42:23,848 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Collection 'com.medico.app.domain.WorkSpace.assignements' is 'mappedBy' a property named 'workspace' which does not exist in the target entity 'com.medico.app.domain.Assignement'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Collection 'com.medico.app.domain.WorkSpace.assignements' is 'mappedBy' a property named 'workspace' which does not exist in the target entity 'com.medico.app.domain.Assignement'
	at org.hibernate.boot.model.internal.CollectionBinder.isReversePropertyInJoin(CollectionBinder.java:1611)
	at org.hibernate.boot.model.internal.CollectionBinder.noAssociationTable(CollectionBinder.java:1625)
	at org.hibernate.boot.model.internal.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:1586)
	at org.hibernate.boot.model.internal.CollectionBinder$1.secondPass(CollectionBinder.java:1577)
	at org.hibernate.boot.model.internal.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:45)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1815)
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1774)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:331)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1432)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1503)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
2024-01-22 11:43:13,679 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 19864 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:43:13,680 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:43:13,711 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:43:13,712 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:43:14,377 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:43:14,483 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 98 ms. Found 2 JPA repository interfaces.
2024-01-22 11:43:14,715 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:43:14,731 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:43:14,945 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:43:14,951 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:43:14,953 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:43:14,953 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:43:15,020 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:43:15,020 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1308 ms
2024-01-22 11:43:15,114 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:43:15,238 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@bb7fe22
2024-01-22 11:43:15,240 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:43:15,340 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:43:15,481 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:43:15,514 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:43:15,530 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 11:43:15,530 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 11:43:15,530 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-22 11:43:15,530 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 11:43:15,530 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 11:43:15,530 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-22 11:43:15,530 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 11:43:15,556 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:43:15,558 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:43:15,611 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 11:43:15,650 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-22 11:43:15,681 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 11:43:15,846 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 11:43:15,876 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 11:43:16,759 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 11:43:16,795 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
2024-01-22 11:43:16,796 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
2024-01-22 11:43:16,797 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:43:16,800 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:43:16,803 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:43:16,813 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:43:16,828 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 11:45:10,664 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 11276 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:45:10,665 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:45:10,700 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:45:10,700 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:45:11,418 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:45:11,542 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 118 ms. Found 2 JPA repository interfaces.
2024-01-22 11:45:11,830 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:45:11,851 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:45:12,125 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:45:12,131 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:45:12,132 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:45:12,133 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:45:12,203 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:45:12,203 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1501 ms
2024-01-22 11:45:12,309 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:45:12,424 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@bd136c6
2024-01-22 11:45:12,425 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:45:12,522 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:45:12,666 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:45:12,693 INFO l.l.c.JavaLogger [restartedMain] Change failed validation!
2024-01-22 11:45:12,694 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:45:12,695 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:2a9ee5cad8e8c7847fd7c971bea54af2 but is now: 9:ee80487410c3af9720d94a9b8551ccc7

2024-01-22 11:45:12,695 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:45:12,706 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:45:12,708 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:45:12,717 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:45:12,731 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:2a9ee5cad8e8c7847fd7c971bea54af2 but is now: 9:ee80487410c3af9720d94a9b8551ccc7

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:2a9ee5cad8e8c7847fd7c971bea54af2 but is now: 9:ee80487410c3af9720d94a9b8551ccc7

	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll was: 9:2a9ee5cad8e8c7847fd7c971bea54af2 but is now: 9:ee80487410c3af9720d94a9b8551ccc7

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:353)
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
2024-01-22 11:45:25,878 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 21716 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:45:25,880 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:45:25,913 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:45:25,913 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:45:26,602 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:45:26,706 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 99 ms. Found 2 JPA repository interfaces.
2024-01-22 11:45:26,938 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:45:26,954 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:45:27,163 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:45:27,170 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:45:27,171 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:45:27,171 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:45:27,241 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:45:27,242 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1327 ms
2024-01-22 11:45:27,338 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:45:27,457 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@409c42ae
2024-01-22 11:45:27,458 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:45:27,559 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:45:27,674 INFO l.l.c.JavaLogger [restartedMain] Creating database history table with name: public.databasechangelog
2024-01-22 11:45:27,719 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:45:27,781 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:45:27,782 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5920327782
2024-01-22 11:45:27,785 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:45:27,850 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:45:27,853 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:45:27,861 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:45:27,862 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:45:27,863 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: duplicate key value violates unique constraint "region_pkey"
  Dtail: Key (id)=(1) already exists. [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    path        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
2024-01-22 11:45:27,864 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:45:27,873 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:45:27,874 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:45:27,882 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:45:27,898 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: duplicate key value violates unique constraint "region_pkey"
  Dtail: Key (id)=(1) already exists. [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    path        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: duplicate key value violates unique constraint "region_pkey"
  Dtail: Key (id)=(1) already exists. [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    path        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: duplicate key value violates unique constraint "region_pkey"
  Dtail: Key (id)=(1) already exists. [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    path        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: duplicate key value violates unique constraint "region_pkey"
  Dtail: Key (id)=(1) already exists. [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    path        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: duplicate key value violates unique constraint "region_pkey"
  Dtail: Key (id)=(1) already exists. [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    path        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "region_pkey"
  Dtail: Key (id)=(1) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:46:01,177 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 20796 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:46:01,178 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:46:01,211 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:46:01,212 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:46:01,894 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:46:02,000 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 100 ms. Found 2 JPA repository interfaces.
2024-01-22 11:46:02,235 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:46:02,253 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:46:02,459 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:46:02,466 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:46:02,468 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:46:02,468 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:46:02,537 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:46:02,538 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1324 ms
2024-01-22 11:46:02,625 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:46:02,749 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7485b4c5
2024-01-22 11:46:02,750 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:46:02,851 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:46:02,963 INFO l.l.c.JavaLogger [restartedMain] Creating database history table with name: public.databasechangelog
2024-01-22 11:46:03,010 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:46:03,068 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:46:03,070 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5920363069
2024-01-22 11:46:03,072 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:46:03,297 INFO l.l.c.JavaLogger [restartedMain] Custom SQL executed
2024-01-22 11:46:03,302 INFO l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll ran successfully in 211ms
2024-01-22 11:46:03,314 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 11:46:03,314 INFO l.l.c.JavaLogger [restartedMain] Run:                          1
2024-01-22 11:46:03,314 INFO l.l.c.JavaLogger [restartedMain] Previously run:               0
2024-01-22 11:46:03,314 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 11:46:03,314 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 11:46:03,314 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-22 11:46:03,315 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 11:46:03,316 INFO l.l.c.JavaLogger [restartedMain] Update command completed successfully.
2024-01-22 11:46:03,322 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:46:03,323 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:46:03,374 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 11:46:03,409 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-22 11:46:03,433 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 11:46:03,600 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 11:46:03,632 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 11:46:04,370 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 11:46:04,401 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [mutual_id] in table [medical_file.doctor]
2024-01-22 11:46:04,401 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [mutual_id] in table [medical_file.doctor]
2024-01-22 11:46:04,402 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:46:04,405 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:46:04,407 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:46:04,417 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:46:04,432 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [mutual_id] in table [medical_file.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [mutual_id] in table [medical_file.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [mutual_id] in table [medical_file.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 11:47:26,881 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 21628 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:47:26,882 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:47:26,915 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:47:26,916 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:47:27,587 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:47:27,697 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 104 ms. Found 2 JPA repository interfaces.
2024-01-22 11:47:27,928 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:47:27,945 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:47:28,156 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:47:28,163 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:47:28,165 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:47:28,165 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:47:28,230 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:47:28,231 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1315 ms
2024-01-22 11:47:28,319 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:47:28,448 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3c0ea545
2024-01-22 11:47:28,449 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:47:28,548 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:47:28,666 INFO l.l.c.JavaLogger [restartedMain] Creating database history table with name: public.databasechangelog
2024-01-22 11:47:28,707 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:47:28,775 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:47:28,777 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5920448777
2024-01-22 11:47:28,779 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:47:29,019 INFO l.l.c.JavaLogger [restartedMain] Custom SQL executed
2024-01-22 11:47:29,024 INFO l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll ran successfully in 227ms
2024-01-22 11:47:29,034 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 11:47:29,034 INFO l.l.c.JavaLogger [restartedMain] Run:                          1
2024-01-22 11:47:29,034 INFO l.l.c.JavaLogger [restartedMain] Previously run:               0
2024-01-22 11:47:29,034 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 11:47:29,034 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 11:47:29,035 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-22 11:47:29,035 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 11:47:29,036 INFO l.l.c.JavaLogger [restartedMain] Update command completed successfully.
2024-01-22 11:47:29,042 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:47:29,043 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:47:29,094 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 11:47:29,133 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-22 11:47:29,158 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 11:47:29,326 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 11:47:29,356 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 11:47:30,095 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 11:47:30,127 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
2024-01-22 11:47:30,127 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
2024-01-22 11:47:30,128 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:47:30,132 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:47:30,134 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:47:30,145 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:47:30,159 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 11:48:30,278 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 21104 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:48:30,279 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:48:30,313 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:48:30,313 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:48:30,984 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:48:31,088 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 99 ms. Found 2 JPA repository interfaces.
2024-01-22 11:48:31,316 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:48:31,332 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:48:31,548 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:48:31,554 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:48:31,556 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:48:31,556 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:48:31,625 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:48:31,626 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1311 ms
2024-01-22 11:48:31,708 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:48:31,838 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@45b3eb16
2024-01-22 11:48:31,840 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:48:31,936 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:48:32,072 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:48:32,105 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:48:32,122 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 11:48:32,122 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 11:48:32,122 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-22 11:48:32,123 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 11:48:32,123 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 11:48:32,123 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-22 11:48:32,123 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 11:48:32,154 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:48:32,156 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:48:32,210 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 11:48:32,250 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-22 11:48:32,280 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 11:48:32,440 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 11:48:32,468 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 11:48:33,207 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 11:48:33,237 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
2024-01-22 11:48:33,237 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
2024-01-22 11:48:33,238 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:48:33,241 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:48:33,243 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:48:33,252 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:48:33,266 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 11:52:03,948 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 9652 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:52:03,950 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:52:03,983 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:52:03,983 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:52:04,654 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:52:04,757 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 97 ms. Found 2 JPA repository interfaces.
2024-01-22 11:52:04,988 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:52:05,003 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:52:05,207 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:52:05,214 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:52:05,216 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:52:05,216 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:52:05,286 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:52:05,287 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1303 ms
2024-01-22 11:52:05,378 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:52:05,506 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@50344551
2024-01-22 11:52:05,508 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:52:05,611 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:52:05,725 INFO l.l.c.JavaLogger [restartedMain] Creating database history table with name: public.databasechangelog
2024-01-22 11:52:05,761 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:52:05,819 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:52:05,821 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5920725820
2024-01-22 11:52:05,823 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:52:06,044 INFO l.l.c.JavaLogger [restartedMain] Custom SQL executed
2024-01-22 11:52:06,049 INFO l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll ran successfully in 207ms
2024-01-22 11:52:06,061 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 11:52:06,061 INFO l.l.c.JavaLogger [restartedMain] Run:                          1
2024-01-22 11:52:06,061 INFO l.l.c.JavaLogger [restartedMain] Previously run:               0
2024-01-22 11:52:06,061 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 11:52:06,061 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 11:52:06,061 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-22 11:52:06,061 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 11:52:06,063 INFO l.l.c.JavaLogger [restartedMain] Update command completed successfully.
2024-01-22 11:52:06,069 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:52:06,070 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:52:06,122 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 11:52:06,157 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-22 11:52:06,179 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 11:52:06,341 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 11:52:06,375 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 11:52:07,125 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 11:52:07,158 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
2024-01-22 11:52:07,158 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
2024-01-22 11:52:07,159 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:52:07,162 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:52:07,164 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:52:07,174 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:52:07,189 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 11:56:37,647 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 3448 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:56:37,649 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:56:37,683 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:56:37,683 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:56:38,354 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:56:38,455 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 96 ms. Found 2 JPA repository interfaces.
2024-01-22 11:56:38,690 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:56:38,705 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:56:38,913 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:56:38,919 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:56:38,921 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:56:38,921 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:56:38,992 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:56:38,993 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1308 ms
2024-01-22 11:56:39,096 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:56:39,211 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5110e3ca
2024-01-22 11:56:39,212 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:56:39,308 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:56:39,423 INFO l.l.c.JavaLogger [restartedMain] Creating database history table with name: public.databasechangelog
2024-01-22 11:56:39,483 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:56:39,545 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:56:39,547 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5920999547
2024-01-22 11:56:39,550 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:56:39,617 ERROR l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll encountered an exception.
2024-01-22 11:56:39,620 INFO l.l.c.JavaLogger [restartedMain] Update command encountered an exception.
2024-01-22 11:56:39,628 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:56:39,630 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:56:39,632 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: schema "medical_file" does not exist
  Position: 28 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    last_name        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
2024-01-22 11:56:39,633 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:56:39,644 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:56:39,646 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:56:39,656 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:56:39,671 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: schema "medical_file" does not exist
  Position: 28 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    last_name        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: schema "medical_file" does not exist
  Position: 28 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    last_name        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.command.CommandScope.execute(CommandScope.java:237)
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:222)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Liquibase.runInScope(Liquibase.java:1371)
	at liquibase.Liquibase.update(Liquibase.java:211)
	at liquibase.Liquibase.update(Liquibase.java:193)
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:331)
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:286)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: schema "medical_file" does not exist
  Position: 28 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    last_name        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:122)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$doRun$1(AbstractUpdateCommandStep.java:105)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.doRun(AbstractUpdateCommandStep.java:104)
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:63)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:62)
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:106)
	at liquibase.command.CommandScope.execute(CommandScope.java:214)
	... 35 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll:
     Reason: liquibase.exception.DatabaseException: ERROR: schema "medical_file" does not exist
  Position: 28 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    last_name        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:785)
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:118)
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68)
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:110)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:100)
	at liquibase.Scope.lambda$child$0(Scope.java:184)
	at liquibase.Scope.child(Scope.java:193)
	at liquibase.Scope.child(Scope.java:183)
	at liquibase.Scope.child(Scope.java:162)
	at liquibase.Scope.child(Scope.java:250)
	at liquibase.Scope.child(Scope.java:254)
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:74)
	... 49 common frames omitted
Caused by: liquibase.exception.DatabaseException: ERROR: schema "medical_file" does not exist
  Position: 28 [Failed SQL: (0) CREATE TABLE IF NOT EXISTS medical_file.REGION (
                                      id BIGINT PRIMARY KEY,
                                      name varchar(40) NOT NULL
    );

INSERT INTO medical_file.REGION (id, name) VALUES
                                    (1, 'Tanger-Ttouan-Al Hocema'),
                                    (2, 'l''Oriental'),
                                    (3, 'Fs-Mekns'),
                                    (4, 'Rabat-Sal-Knitra'),
                                    (5, 'Bni Mellal-Khnifra'),
                                    (6, 'Casablanca-Settat'),
                                    (7, 'Marrakech-Safi'),
                                    (8, 'Dra-Tafilalet'),
                                    (9, 'Souss-Massa'),
                                    (10, 'Guelmim-Oued Noun'),
                                    (11, 'Layoune-Sakia El Hamra'),
                                    (12, 'Dakhla-Oued Ed Dahab');






CREATE TABLE IF NOT EXISTS medical_file.CITY (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL,
    region_id BIGINT NOT NULL,
    FOREIGN KEY (region_id) REFERENCES  medical_file.region(id)
    );

--
-- Contenu de la table `ville`
--

INSERT INTO medical_file.CITY (id, name, region_id) VALUES
    (1, 'An Harrouda', 6),
    (2, 'Ben Yakhlef', 6),
    (3, 'Bouskoura', 6),
    (4, 'Casablanca', 6),
    (5, 'Mdiouna', 6),
    (6, 'Mohammadia', 6),
    (7, 'Tit Mellil', 6),
    (8, 'Ben Yakhlef', 6),
    (9, 'Bejad', 5),
    (10, 'Ben Ahmed', 6),
    (11, 'Benslimane', 6),
    (12, 'Berrechid', 6),
    (13, 'Boujniba', 5),
    (14, 'Boulanouare', 5),
    (15, 'Bouznika', 6),
    (16, 'Deroua', 6),
    (17, 'El Borouj', 6),
    (18, 'El Gara', 6),
    (19, 'Guisser', 6),
    (20, 'Hattane', 5),
    (21, 'Khouribga', 5),
    (22, 'Loulad', 6),
    (23, 'Oued Zem', 5),
    (24, 'Oulad Abbou', 6),
    (25, 'Oulad H''Riz Sahel', 6),
    (26, 'Oulad M''rah', 6),
    (27, 'Oulad Sad', 6),
    (28, 'Oulad Sidi Ben Daoud', 6),
    (29, 'Ras El An', 6),
    (30, 'Settat', 6),
    (31, 'Sidi Rahhal Chata', 6),
    (32, 'Soualem', 6),
    (33, 'Azemmour', 6),
    (34, 'Bir Jdid', 6),
    (35, 'Bouguedra', 7),
    (36, 'Echemmaia', 7),
    (37, 'El Jadida', 6),
    (38, 'Hrara', 7),
    (39, 'Ighoud', 7),
    (40, 'Jamat Shaim', 7),
    (41, 'Jorf Lasfar', 6),
    (42, 'Khemis Zemamra', 6),
    (43, 'Laaounate', 6),
    (44, 'Moulay Abdallah', 6),
    (45, 'Oualidia', 6),
    (46, 'Oulad Amrane', 6),
    (47, 'Oulad Frej', 6),
    (48, 'Oulad Ghadbane', 6),
    (49, 'Safi', 7),
    (50, 'Sebt El Marif', 6),
    (51, 'Sebt Gzoula', 7),
    (52, 'Sidi Ahmed', 7),
    (53, 'Sidi Ali Ban Hamdouche', 6),
    (54, 'Sidi Bennour', 6),
    (55, 'Sidi Bouzid', 6),
    (56, 'Sidi Smal', 6),
    (57, 'Youssoufia', 7),
    (58, 'Fs', 3),
    (59, 'An Cheggag', 3),
    (60, 'Bhalil', 3),
    (61, 'Boulemane', 3),
    (62, 'El Menzel', 3),
    (63, 'Guigou', 3),
    (64, 'Imouzzer Kandar', 3),
    (65, 'Imouzzer Marmoucha', 3),
    (66, 'Missour', 3),
    (67, 'Moulay Yacoub', 3),
    (68, 'Ouled Tayeb', 3),
    (69, 'Outat El Haj', 3),
    (70, 'Ribate El Kheir', 3),
    (71, 'Sfrou', 3),
    (72, 'Skhinate', 3),
    (73, 'Tafajight', 3),
    (74, 'Arbaoua', 4),
    (75, 'An Dorij', 1),
    (76, 'Dar Gueddari', 4),
    (77, 'Had Kourt', 4),
    (78, 'Jorf El Melha', 4),
    (79, 'Knitra', 4),
    (80, 'Khenichet', 4),
    (81, 'Lalla Mimouna', 4),
    (82, 'Mechra Bel Ksiri', 4),
    (83, 'Mehdia', 4),
    (84, 'Moulay Bousselham', 4),
    (85, 'Sidi Allal Tazi', 4),
    (86, 'Sidi Kacem', 4),
    (87, 'Sidi Slimane', 4),
    (88, 'Sidi Taibi', 4),
    (89, 'Sidi Yahya El Gharb', 4),
    (90, 'Souk El Arbaa', 4),
    (91, 'Akka', 9),
    (92, 'Assa', 10),
    (93, 'Bouizakarne', 10),
    (94, 'El Ouatia', 10),
    (95, 'Es-Semara', 11),
    (96, 'Fam El Hisn', 9),
    (97, 'Foum Zguid', 9),
    (98, 'Guelmim', 10),
    (99, 'Taghjijt', 10),
    (100, 'Tan-Tan', 10),
    (101, 'Tata', 9),
    (102, 'Zag', 10),
    (103, 'Marrakech', 7),
    (104, 'Ait Daoud', 7),
    (115, 'Amizmiz', 7),
    (116, 'Assahrij', 7),
    (117, 'At Ourir', 7),
    (118, 'Ben Guerir', 7),
    (119, 'Chichaoua', 7),
    (120, 'El Hanchane', 7),
    (121, 'El Kela des Sraghna', 7),
    (122, 'Essaouira', 7),
    (123, 'Frata', 7),
    (124, 'Ghmate', 7),
    (125, 'Ighounane', 8),
    (126, 'Imintanoute', 7),
    (127, 'Kattara', 7),
    (128, 'Lalla Takerkoust', 7),
    (129, 'Loudaya', 7),
    (130, 'Lattaouia', 7),
    (131, 'Moulay Brahim', 7),
    (132, 'Mzouda', 7),
    (133, 'Ounagha', 7),
    (134, 'Sid L''Mokhtar', 7),
    (135, 'Sid Zouin', 7),
    (136, 'Sidi Abdallah Ghiat', 7),
    (137, 'Sidi Bou Othmane', 7),
    (138, 'Sidi Rahhal', 7),
    (139, 'Skhour Rehamna', 7),
    (140, 'Smimou', 7),
    (141, 'Tafetachte', 7),
    (142, 'Tahannaout', 7),
    (143, 'Talmest', 7),
    (144, 'Tamallalt', 7),
    (145, 'Tamanar', 7),
    (146, 'Tamansourt', 7),
    (147, 'Tameslouht', 7),
    (148, 'Tanalt', 9),
    (149, 'Zeubelemok', 7),
    (150, 'Mekns', 3),
    (151, 'Khnifra', 5),
    (152, 'Agourai', 3),
    (153, 'Ain Taoujdate', 3),
    (154, 'MyAliCherif', 8),
    (155, 'Rissani', 8),
    (156, 'Amalou Ighriben', 5),
    (157, 'Aoufous', 8),
    (158, 'Arfoud', 8),
    (159, 'Azrou', 3),
    (160, 'An Jemaa', 3),
    (161, 'An Karma', 3),
    (162, 'An Leuh', 3),
    (163, 'At Boubidmane', 3),
    (164, 'At Ishaq', 5),
    (165, 'Boudnib', 8),
    (166, 'Boufakrane', 3),
    (167, 'Boumia', 8),
    (168, 'El Hajeb', 3),
    (169, 'Elkbab', 5),
    (170, 'Er-Rich', 5),
    (171, 'Errachidia', 8),
    (172, 'Gardmit', 8),
    (173, 'Goulmima', 8),
    (174, 'Gourrama', 8),
    (175, 'Had Bouhssoussen', 5),
    (176, 'Haj Kaddour', 3),
    (177, 'Ifrane', 3),
    (178, 'Itzer', 8),
    (179, 'Jorf', 8),
    (180, 'Kehf Nsour', 5),
    (181, 'Kerrouchen', 5),
    (182, 'M''haya', 3),
    (183, 'M''rirt', 5),
    (184, 'Midelt', 8),
    (185, 'Moulay Ali Cherif', 8),
    (186, 'Moulay Bouazza', 5),
    (187, 'Moulay Idriss Zerhoun', 3),
    (188, 'Moussaoua', 3),
    (189, 'N''Zalat Bni Amar', 3),
    (190, 'Ouaoumana', 5),
    (191, 'Oued Ifrane', 3),
    (192, 'Sabaa Aiyoun', 3),
    (193, 'Sebt Jahjouh', 3),
    (194, 'Sidi Addi', 3),
    (195, 'Tichoute', 8),
    (196, 'Tighassaline', 5),
    (197, 'Tighza', 5),
    (198, 'Timahdite', 3),
    (199, 'Tinejdad', 8),
    (200, 'Tizguite', 3),
    (201, 'Toulal', 3),
    (202, 'Tounfite', 8),
    (203, 'Zaouia d''Ifrane', 3),
    (204, 'Zada', 8),
    (205, 'Ahfir', 2),
    (206, 'Aklim', 2),
    (207, 'Al Aroui', 2),
    (208, 'An Bni Mathar', 2),
    (209, 'An Erreggada', 2),
    (210, 'Ben Taeb', 2),
    (211, 'Berkane', 2),
    (212, 'Bni Ansar', 2),
    (213, 'Bni Chiker', 2),
    (214, 'Bni Drar', 2),
    (215, 'Bni Tadjite', 2),
    (216, 'Bouanane', 2),
    (217, 'Bouarfa', 2),
    (218, 'Bouhdila', 2),
    (219, 'Dar El Kebdani', 2),
    (220, 'Debdou', 2),
    (221, 'Douar Kannine', 2),
    (222, 'Driouch', 2),
    (223, 'El Aoun Sidi Mellouk', 2),
    (224, 'Farkhana', 2),
    (225, 'Figuig', 2),
    (226, 'Ihddaden', 2),
    (227, 'Jadar', 2),
    (228, 'Jerada', 2),
    (229, 'Kariat Arekmane', 2),
    (230, 'Kassita', 2),
    (231, 'Kerouna', 2),
    (232, 'Latamna', 2),
    (233, 'Madagh', 2),
    (234, 'Midar', 2),
    (235, 'Nador', 2),
    (236, 'Naima', 2),
    (237, 'Oued Heimer', 2),
    (238, 'Oujda', 2),
    (239, 'Ras El Ma', 2),
    (240, 'Sadia', 2),
    (241, 'Selouane', 2),
    (242, 'Sidi Boubker', 2),
    (243, 'Sidi Slimane Echcharaa', 2),
    (244, 'Talsint', 2),
    (245, 'Taourirt', 2),
    (246, 'Tendrara', 2),
    (247, 'Tiztoutine', 2),
    (248, 'Touima', 2),
    (249, 'Touissit', 2),
    (250, 'Zao', 2),
    (251, 'Zeghanghane', 2),
    (252, 'Rabat', 4),
    (253, 'Sal', 4),
    (254, 'Ain El Aouda', 4),
    (255, 'Harhoura', 4),
    (256, 'Khmisset', 4),
    (257, 'Oulms', 4),
    (258, 'Rommani', 4),
    (259, 'Sidi Allal El Bahraoui', 4),
    (260, 'Sidi Bouknadel', 4),
    (261, 'Skhirate', 4),
    (262, 'Tamesna', 4),
    (263, 'Tmara', 4),
    (264, 'Tiddas', 4),
    (265, 'Tiflet', 4),
    (266, 'Touarga', 4),
    (267, 'Agadir', 9),
    (268, 'Agdz', 8),
    (269, 'Agni Izimmer', 9),
    (270, 'At Melloul', 9),
    (271, 'Alnif', 8),
    (272, 'Anzi', 9),
    (273, 'Aoulouz', 9),
    (274, 'Aourir', 9),
    (275, 'Arazane', 9),
    (276, 'At Baha', 9),
    (277, 'At Iaza', 9),
    (278, 'At Yalla', 8),
    (279, 'Ben Sergao', 9),
    (280, 'Biougra', 9),
    (281, 'Boumalne-Dads', 8),
    (282, 'Dcheira El Jihadia', 9),
    (283, 'Drargua', 9),
    (284, 'El Guerdane', 9),
    (285, 'Harte Lyamine', 8),
    (286, 'Ida Ougnidif', 9),
    (287, 'Ifri', 8),
    (288, 'Igdamen', 9),
    (289, 'Ighil n''Oumgoun', 8),
    (290, 'Imassine', 8),
    (291, 'Inezgane', 9),
    (292, 'Irherm', 9),
    (293, 'Kelaat-M''Gouna', 8),
    (294, 'Lakhsas', 9),
    (295, 'Lakhsass', 9),
    (296, 'Lqlia', 9),
    (297, 'M''semrir', 8),
    (298, 'Massa (Maroc)', 9),
    (299, 'Megousse', 9),
    (300, 'Ouarzazate', 8),
    (301, 'Oulad Berhil', 9),
    (302, 'Oulad Tema', 9),
    (303, 'Sarghine', 8),
    (304, 'Sidi Ifni', 10),
    (305, 'Skoura', 8),
    (306, 'Tabounte', 8),
    (307, 'Tafraout', 9),
    (308, 'Taghzout', 1),
    (309, 'Tagzen', 9),
    (310, 'Taliouine', 9),
    (311, 'Tamegroute', 8),
    (312, 'Tamraght', 9),
    (313, 'Tanoumrite Nkob Zagora', 8),
    (314, 'Taourirt ait zaghar', 8),
    (315, 'Taroudannt', 9),
    (316, 'Temsia', 9),
    (317, 'Tifnit', 9),
    (318, 'Tisgdal', 9),
    (319, 'Tiznit', 9),
    (320, 'Toundoute', 8),
    (321, 'Zagora', 8),
    (322, 'Afourar', 5),
    (323, 'Aghbala', 5),
    (324, 'Azilal', 5),
    (325, 'At Majden', 5),
    (326, 'Beni Ayat', 5),
    (327, 'Bni Mellal', 5),
    (328, 'Bin elouidane', 5),
    (329, 'Bradia', 5),
    (330, 'Bzou', 5),
    (331, 'Dar Oulad Zidouh', 5),
    (332, 'Demnate', 5),
    (333, 'Dra''a', 8),
    (334, 'El Ksiba', 5),
    (335, 'Foum Jamaa', 5),
    (336, 'Fquih Ben Salah', 5),
    (337, 'Kasba Tadla', 5),
    (338, 'Ouaouizeght', 5),
    (339, 'Oulad Ayad', 5),
    (340, 'Oulad M''Barek', 5),
    (341, 'Oulad Yaich', 5),
    (342, 'Sidi Jaber', 5),
    (343, 'Souk Sebt Oulad Nemma', 5),
    (344, 'Zaouat Cheikh', 5),
    (345, 'Tanger', 1),
    (346, 'Ttouan', 1),
    (347, 'Akchour', 1),
    (348, 'Assilah', 1),
    (349, 'Bab Berred', 1),
    (350, 'Bab Taza', 1),
    (351, 'Brikcha', 1),
    (352, 'Chefchaouen', 1),
    (353, 'Dar Bni Karrich', 1),
    (354, 'Dar Chaoui', 1),
    (355, 'Fnideq', 1),
    (356, 'Gueznaia', 1),
    (357, 'Jebha', 1),
    (358, 'Karia', 3),
    (359, 'Khmis Sahel', 1),
    (360, 'Ksar El Kbir', 1),
    (361, 'Larache', 1),
    (362, 'M''diq', 1),
    (363, 'Martil', 1),
    (364, 'Moqrisset', 1),
    (365, 'Oued Laou', 1),
    (366, 'Oued Rmel', 1),
    (367, 'Ouazzane', 1),
    (368, 'Point Cires', 1),
    (369, 'Sidi Lyamani', 1),
    (370, 'Sidi Mohamed ben Abdallah el-Raisuni', 1),
    (371, 'Zinat', 1),
    (372, 'Ajdir', 1),
    (373, 'Aknoul', 3),
    (374, 'Al Hocema', 1),
    (375, 'At Hichem', 1),
    (376, 'Bni Bouayach', 1),
    (377, 'Bni Hadifa', 1),
    (378, 'Ghafsai', 3),
    (379, 'Guercif', 2),
    (380, 'Imzouren', 1),
    (381, 'Inahnahen', 1),
    (382, 'Issaguen (Ketama)', 1),
    (383, 'Karia (El Jadida)', 6),
    (384, 'Karia Ba Mohamed', 3),
    (385, 'Oued Amlil', 3),
    (386, 'Oulad Zbair', 3),
    (387, 'Tahla', 3),
    (388, 'Tala Tazegwaght', 1),
    (389, 'Tamassint', 1),
    (390, 'Taounate', 3),
    (391, 'Targuist', 1),
    (392, 'Taza', 3),
    (393, 'Tanaste', 3),
    (394, 'Thar Es-Souk', 3),
    (395, 'Tissa', 3),
    (396, 'Tizi Ouasli', 3),
    (397, 'Laayoune', 11),
    (398, 'El Marsa', 11),
    (399, 'Tarfaya', 11),
    (400, 'Boujdour', 11),
    (401, 'Awsard', 12),
    (402, 'Oued-Eddahab', 12),
    (403, 'Stehat', 1),
    (404, 'At Attab', 5);

CREATE TABLE IF NOT EXISTS medical_file.OCCUPATION (
                                                 id BIGINT PRIMARY KEY,
                                                 name VARCHAR(40) COLLATE "en_US.utf8" NOT NULL
    );


CREATE SEQUENCE medical_file.API_APPEL_EVENT_id_seq;
CREATE SEQUENCE medical_file.ASSIGNEMENT_id_seq;
CREATE SEQUENCE medical_file.MEDICAL_CHECK_UP_id_seq;
CREATE SEQUENCE medical_file.DOCTOR_id_seq;
CREATE SEQUENCE medical_file.FILE_id_seq;
CREATE SEQUENCE medical_file.MEDECINE_CUSTOM_id_seq;
CREATE SEQUENCE medical_file.MUTUAL_id_seq;
CREATE SEQUENCE medical_file.PATIENT_id_seq;
CREATE SEQUENCE medical_file.WORKSPACE_id_seq;
CREATE SEQUENCE medical_file.PRESCRIPTION_id_seq;

create table medical_file.api_appel_event
(
    created_at       timestamp(6) not null,
    date_debut_appel timestamp(6),
    date_fin_appel   timestamp(6),
    id               BIGINT DEFAULT nextval('medical_file.API_APPEL_EVENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    appel_adresse    varchar(255),
    appel_user       varchar(255),
    created_by       varchar(255),
    demande_uid      varchar(255),
    err_code         varchar(255),
    updated_by       varchar(255),
    err_trace        oid
);

create table medical_file.WORKSPACE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.WORKSPACE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    TYPE_WORKSPACE             varchar(255)
);

create table medical_file.DOCTOR
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.DOCTOR_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    last_name        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    occupation_id        BIGINT not null , FOREIGN KEY (occupation_id) REFERENCES medical_file.OCCUPATION(id)
);

create table medical_file.ASSIGNEMENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.ASSIGNEMENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    DATE_DEBUT       timestamp(6) not null,
    DATE_FIN         timestamp(6),
    doctor_id        BIGINT not null , FOREIGN KEY (doctor_id) REFERENCES medical_file.DOCTOR(id),
    workspace_id     BIGINT not null , FOREIGN KEY (workspace_id) REFERENCES medical_file.WORKSPACE(id)
);

create table medical_file.MUTUAL
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MUTUAL_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255)
);

create table medical_file.PRESCRIPTION
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PRESCRIPTION_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    description      oid,
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id)
);

create table medical_file.FILE
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.FILE_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    path             varchar(255),
    name             varchar(255),
    mutual_id        BIGINT not null , FOREIGN KEY (mutual_id) REFERENCES medical_file.MUTUAL(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDECINE_CUSTOM
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDECINE_CUSTOM_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

CREATE TABLE IF NOT EXISTS medical_file.MEDECINE (
                                                 id BIGINT PRIMARY KEY,
                                                 name varchar(255),
    prescription_id BIGINT NOT NULL,
    FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
    );

create table medical_file.PATIENT
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.PATIENT_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    name             varchar(255),
    LAST_NAME        varchar(255),
    username        varchar(255) not null unique,
    email        varchar(255) not null unique,
    phone        varchar(255),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id)
);

create table medical_file.MEDICAL_CHECK_UP
(
    created_at       timestamp(6) not null,
    id               BIGINT DEFAULT nextval('medical_file.MEDICAL_CHECK_UP_id_seq') PRIMARY KEY,
    updated_at       timestamp(6) not null,
    created_by       varchar(255),
    updated_by       varchar(255),
    CHECK_UP_DATE    timestamp(6),
    assignement_id        BIGINT not null , FOREIGN KEY (assignement_id) REFERENCES medical_file.ASSIGNEMENT(id),
    prescription_id     BIGINT not null , FOREIGN KEY (prescription_id) REFERENCES medical_file.PRESCRIPTION(id),
    patient_id     BIGINT not null , FOREIGN KEY (patient_id) REFERENCES medical_file.PATIENT(id)
)]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:468)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:77)
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:177)
	at liquibase.database.AbstractJdbcDatabase.execute(AbstractJdbcDatabase.java:1291)
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1273)
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:744)
	... 65 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: schema "medical_file" does not exist
  Position: 28
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:462)
	... 70 common frames omitted
2024-01-22 11:57:03,832 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 26120 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 11:57:03,834 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 11:57:03,868 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 11:57:03,868 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 11:57:04,553 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 11:57:04,660 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 101 ms. Found 2 JPA repository interfaces.
2024-01-22 11:57:04,887 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 11:57:04,902 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 11:57:05,115 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 11:57:05,123 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 11:57:05,125 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 11:57:05,125 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 11:57:05,195 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 11:57:05,196 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1328 ms
2024-01-22 11:57:05,282 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 11:57:05,412 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5148b3e4
2024-01-22 11:57:05,414 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 11:57:05,513 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 11:57:05,654 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:57:05,714 INFO l.l.c.JavaLogger [restartedMain] Successfully acquired change log lock
2024-01-22 11:57:05,716 INFO l.l.c.JavaLogger [restartedMain] Using deploymentId: 5921025715
2024-01-22 11:57:05,718 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 11:57:05,946 INFO l.l.c.JavaLogger [restartedMain] Custom SQL executed
2024-01-22 11:57:05,950 INFO l.l.c.JavaLogger [restartedMain] ChangeSet classpath:/db/changelog/changes/001-initial-schema.sql::raw::includeAll ran successfully in 212ms
2024-01-22 11:57:05,961 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 11:57:05,961 INFO l.l.c.JavaLogger [restartedMain] Run:                          1
2024-01-22 11:57:05,961 INFO l.l.c.JavaLogger [restartedMain] Previously run:               0
2024-01-22 11:57:05,962 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 11:57:05,962 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 11:57:05,962 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-22 11:57:05,962 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 11:57:05,963 INFO l.l.c.JavaLogger [restartedMain] Update command completed successfully.
2024-01-22 11:57:05,972 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 11:57:05,973 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 11:57:06,025 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 11:57:06,061 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-22 11:57:06,083 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 11:57:06,255 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 11:57:06,285 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 11:57:07,030 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 11:57:07,060 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
2024-01-22 11:57:07,061 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
2024-01-22 11:57:07,062 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 11:57:07,065 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 11:57:07,067 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 11:57:07,077 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 11:57:07,092 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing column [path] in table [medical_file.doctor]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:145)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
2024-01-22 12:00:12,943 INFO o.s.b.StartupInfoLogger [restartedMain] Starting AppApplication using Java 17.0.9 with PID 24072 (C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico\target\classes started by e.elmokhtar in C:\Users\e.elmokhtar\Desktop\project-test\learning\app-medico)
2024-01-22 12:00:12,945 INFO o.s.b.SpringApplication [restartedMain] No active profile set, falling back to 1 default profile: "default"
2024-01-22 12:00:12,986 INFO o.s.b.l.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-01-22 12:00:12,987 INFO o.s.b.l.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2024-01-22 12:00:13,773 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-01-22 12:00:13,892 INFO o.s.d.r.c.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 114 ms. Found 2 JPA repository interfaces.
2024-01-22 12:00:14,157 WARN o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [annotationActionEndpointMapping] is declared through a non-static factory method on that class; consider declaring it as static instead.
2024-01-22 12:00:14,175 INFO o.s.w.s.a.s.AbstractAddressingEndpointMapping [restartedMain] Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2024-01-22 12:00:14,412 INFO o.s.b.w.e.t.TomcatWebServer [restartedMain] Tomcat initialized with port 8090 (http)
2024-01-22 12:00:14,419 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8090"]
2024-01-22 12:00:14,421 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting service [Tomcat]
2024-01-22 12:00:14,421 INFO o.a.j.l.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/10.1.16]
2024-01-22 12:00:14,492 INFO o.a.j.l.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2024-01-22 12:00:14,493 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 1505 ms
2024-01-22 12:00:14,589 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2024-01-22 12:00:14,722 INFO c.z.h.p.HikariPool [restartedMain] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5b1303bc
2024-01-22 12:00:14,724 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2024-01-22 12:00:14,826 INFO l.l.c.JavaLogger [restartedMain] Set default schema name to public
2024-01-22 12:00:14,975 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 12:00:15,016 INFO l.l.c.JavaLogger [restartedMain] Reading from public.databasechangelog
2024-01-22 12:00:15,037 INFO l.l.c.JavaLogger [restartedMain] UPDATE SUMMARY
2024-01-22 12:00:15,038 INFO l.l.c.JavaLogger [restartedMain] Run:                          0
2024-01-22 12:00:15,038 INFO l.l.c.JavaLogger [restartedMain] Previously run:               1
2024-01-22 12:00:15,038 INFO l.l.c.JavaLogger [restartedMain] Filtered out:                 0
2024-01-22 12:00:15,038 INFO l.l.c.JavaLogger [restartedMain] -------------------------------
2024-01-22 12:00:15,038 INFO l.l.c.JavaLogger [restartedMain] Total change sets:            1
2024-01-22 12:00:15,038 INFO l.l.c.JavaLogger [restartedMain] Update summary generated
2024-01-22 12:00:15,067 INFO l.l.c.JavaLogger [restartedMain] Successfully released change log lock
2024-01-22 12:00:15,070 INFO l.l.c.JavaLogger [restartedMain] Command execution complete
2024-01-22 12:00:15,140 INFO o.h.j.i.u.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2024-01-22 12:00:15,191 INFO o.h.Version [restartedMain] HHH000412: Hibernate ORM core version 6.3.1.Final
2024-01-22 12:00:15,239 INFO o.h.c.i.RegionFactoryInitiator [restartedMain] HHH000026: Second-level cache disabled
2024-01-22 12:00:15,438 INFO o.s.o.j.p.SpringPersistenceUnitInfo [restartedMain] No LoadTimeWeaver setup: ignoring JPA class transformer
2024-01-22 12:00:15,473 WARN o.h.e.j.d.i.DialectFactoryImpl [restartedMain] HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2024-01-22 12:00:16,373 INFO o.h.e.t.j.p.i.JtaPlatformInitiator [restartedMain] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-01-22 12:00:16,406 ERROR o.s.o.j.AbstractEntityManagerFactoryBean [restartedMain] Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [api_appel_event]
2024-01-22 12:00:16,407 WARN o.s.c.s.AbstractApplicationContext [restartedMain] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [api_appel_event]
2024-01-22 12:00:16,409 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown initiated...
2024-01-22 12:00:16,413 INFO c.z.h.HikariDataSource [restartedMain] HikariPool-1 - Shutdown completed.
2024-01-22 12:00:16,415 INFO o.a.j.l.DirectJDKLog [restartedMain] Stopping service [Tomcat]
2024-01-22 12:00:16,430 INFO o.s.b.a.l.ConditionEvaluationReportLogger [restartedMain] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-01-22 12:00:16,447 ERROR o.s.b.SpringApplication [restartedMain] Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [api_appel_event]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.medico.app.AppApplication.main(AppApplication.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [api_appel_event]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 21 common frames omitted
Caused by: org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [api_appel_event]
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.validateTable(AbstractSchemaValidator.java:134)
	at org.hibernate.tool.schema.internal.GroupedSchemaValidatorImpl.validateTables(GroupedSchemaValidatorImpl.java:46)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.performValidation(AbstractSchemaValidator.java:97)
	at org.hibernate.tool.schema.internal.AbstractSchemaValidator.doValidation(AbstractSchemaValidator.java:75)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:295)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:295)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 25 common frames omitted
